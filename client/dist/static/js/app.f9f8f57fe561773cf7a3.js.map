{"version":3,"sources":["webpack:///src/components/tabs/view.vue","webpack:///./src/config.js","webpack:///./src/modules/util.js","webpack:///./src/modules/rpc.js","webpack:///./src/modules/auth.js","webpack:///src/components/Navbar.vue","webpack:///./src/components/Navbar.vue?1da4","webpack:///./src/components/Navbar.vue","webpack:///src/App.vue","webpack:///./src/App.vue?1ba5","webpack:///./src/App.vue","webpack:///src/components/Login.vue","webpack:///./src/components/Login.vue?0dd7","webpack:///./src/components/Login.vue","webpack:///src/components/Register.vue","webpack:///./src/components/Register.vue?e355","webpack:///./src/components/Register.vue","webpack:///src/components/EditUser.vue","webpack:///./src/components/EditUser.vue?fed4","webpack:///./src/components/EditUser.vue","webpack:///src/components/AdminUsers.vue","webpack:///./src/components/AdminUsers.vue?b6f9","webpack:///./src/components/AdminUsers.vue","webpack:///src/components/ResetPassword.vue","webpack:///./src/components/ResetPassword.vue?a731","webpack:///./src/components/ResetPassword.vue","webpack:///src/components/search/search-form.vue","webpack:///./src/components/search/search-form.vue?7be2","webpack:///./src/components/search/search-form.vue","webpack:///src/components/search/search-list.vue","webpack:///./src/components/search/search-list.vue?d2bc","webpack:///./src/components/search/search-list.vue","webpack:///src/components/tabs/search.vue","webpack:///./src/components/tabs/search.vue?e94d","webpack:///./src/components/tabs/search.vue","webpack:///./src/components/tabs/home.vue?3ab6","webpack:///./src/components/tabs/home.vue","webpack:///./src/components/tabs/view.vue?27e9","webpack:///./src/components/tabs/view.vue","webpack:///./src/router.js","webpack:///./src/main.js","webpack:///./src/jolecule/animation.js","webpack:///./src/jolecule/v3.js","webpack:///./src/jolecule/util.js","webpack:///./src/jolecule/glgeom.js","webpack:///./src/jolecule/pairs.js","webpack:///./src/jolecule/store.js","webpack:///./src/jolecule/bitarray.js","webpack:///./src/jolecule/data.js","webpack:///./src/jolecule/soup.js","webpack:///./src/jolecule/widgets.js","webpack:///./src/jolecule/display.js","webpack:///./src/jolecule/embedjolecule.js","webpack:///./src/jolecule/fullpagejolecule.js","webpack:///./src/jolecule/main.js","webpack:///./src/store.js"],"names":["__webpack_exports__","computed","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","Object","__WEBPACK_IMPORTED_MODULE_1_vuex__","isWorking","get","this","$store","state","set","v","commit","pdb","energyCutoffSet","value","console","log","isValidEnergyCutOffSet","data","query","text","search","pdbSelectItems","querySelectItems","customFilter","item","queryText","itemText","localEnergyCutoffSets","methods","checkValue","addDataServer","_ref","embededJolecule","index","url","axios","then","response","dataServerFn","replace","dataServer","eval","asyncAddDataServer","querySelections","_this","searchResults","rows","forEach","row","push","protein_type","protein_description","binding_energy","reDisplayJolecule","document","getElementById","innerHTML","j","__WEBPACK_IMPORTED_MODULE_2__jolecule_main__","divTag","viewId","viewHeight","isLoop","isGrid","isEditable","newURL","window","location","protocol","host","href","history","pushState","i","displayJolecule","$route","cutoff","SET_PDB","SET_ENERGYCUTOFFSET","energyCutoffSets","watch","val","handler","deep","mounted","_this2","__WEBPACK_IMPORTED_MODULE_3_vee_validate__","extend","getMessage","field","validate","config","apiUrl","o","stringify_default","axios_default","a","defaults","withCredentials","rpc","rpcRun","method","_len","arguments","length","params","Array","_key","asyncToGenerator_default","regenerator_default","mark","_callee","_console","payload","wrap","_context","prev","next","jsonrpc","apply","concat","toConsumableArray_default","post","sent","abrupt","t0","error","code","message","toString","stop","rpcUpload","files","_len2","_key2","_callee2","_console2","formData","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","f","_context2","FormData","append","undefined","get_iterator_default","done","name","return","finish","t1","rpcDownload","_this3","_len3","_key3","_callee3","_console3","filename","blob","_context3","headers","JSON","parse","Blob","FileSaver_default","saveAs","hashUserPassword","user","result","lodash_default","cloneDeep","password","rawPassword","sha224_default","rawPasswordConfirm","auth","login","newUser","store","assign","authenticated","localStorage","setItem","util","register","update","editUser","resetPassword","tokenId","restoreLastUser","_this4","_callee4","lastUser","_context4","getItem","logout","removeItem","Navbar","title","isUser","$router","home","components_Navbar","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","padding-left","cursor","flex","on","click","$event","_v","_s","attrs","dark","id","to","router","directives","rawName","tag","_e","staticRenderFns","App","components","__webpack_require__","normalizeComponent","ssrContext","selectortype_template_index_0_src_App","src_App","App_normalizeComponent","Login","email","passwordHidden","submit","$data","components_Login","expression","novalidate","preventDefault","fluid","grid-list-xl","label","error-messages","errors","collect","data-vv-name","model","callback","$$v","hint","append-icon","append-icon-cb","type","counter","loginMessage","clearForm","color","margin-top","src_components_Login","Login_normalizeComponent","Register","components_Register","md-align","padding","md-flex","md-column","placeholder","src_components_Register","Register_normalizeComponent","EditUser","keys","key","components_EditUser","src_components_EditUser","EditUser_normalizeComponent","AdminUsers","users","deleteUser","userId","components_AdminUsers","_l","md-mini","src_components_AdminUsers","AdminUsers_normalizeComponent","ResetPassword","components_ResetPassword","src_components_ResetPassword","ResetPassword_normalizeComponent","search_form","extends_default","vuex_esm","SET_ISSUBMITTED","SET_SEARCHQUERY","clear","search_search_form","action","searchQuery","$set","items","elements","components_search_search_form","search_form_normalizeComponent","search_list","pageSizes","pagination","searchPagination","pages","rowsPerPage","Math","ceil","totalResults","onSort","search_search_list","total-items","loading","hide-actions","update:pagination","scopedSlots","_u","fn","props","element","n_atoms","ligand_name","ligand","slot","icon","searchErrors","xs12","sm9","offset-sm3","md6","offset-md6","lg3","offset-lg9","xs2","single-line","xs10","total-visible","search-form","search-list","search_list_normalizeComponent","tabs_search","components_tabs_search","search_normalizeComponent","src","alt","sm3","text-align","colspan","tabs_home","home_normalizeComponent","tabs_view","height","sm8","combobox","filter","persistent-hint","item-text","item-value","return-object","search-input","update:searchInput","sm2","cache-items","required","view___vue_styles__","components_tabs_view","view_normalizeComponent","view","vue_esm","use","vue_router_esm","src_router","routes","path","component","el","template","productionTip","vuetify_default","init","MS_PER_STEP","loop","requestAnimationFrame","globalWidgets","currTime","Date","getTime","nStep","lastTime","floor","animate","err","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","widget","isChanged","draw","registerGlobalAnimationLoop","SMALL","isNearZero","abs","create","x","y","z","three","scaled","s","w","multiplyScalar","v3_diff","b","sum","parallel","axis","axisLen","dotProduct","perpendicular","crossProduct","crossVectors","angle","aLen","bLen","c","PI","acos","Matrix4","v3","clone","normalized","diff","distance","p1","p2","dihedral","ref","refPerp","vPerp","midPoint","p","q","random","isEqual","isAligned","matrixProduct","lhs","rhs","multiplyMatrices","rotation","theta","normalize","makeRotationAxis","translation","makeTranslation","degToRad","deg","exists","isUndefined","getWindowUrl","linkButton","idTag","classTag","jquery_default","attr","html","addClass","e","toggleButton","getToggleFn","setToggleFn","onColor","css","removeClass","redraw","inArray","aList","indexOf","randomId","nChar","chars","substring","randomString","delay","timeMs","promise_default","resolve","setTimeout","CatmullRom","t","p0","p3","v0","v1","t2","catmulRomSpline","p4","glgeom_PathAndFrenetFrames","PathAndFrenetFrames","classCallCheck_default","points","normals","tangents","binormals","subPath","slice","glgeom_RibbonGeometry","RibbonGeometry","shape","round","front","back","possibleConstructorReturn_default","__proto__","get_prototype_of_default","call","parameters","shapePoints","extractPoints","nVertex","shapeEdgeNormals","iPoint","point","normal","binormal","iShapePoint","shapePoint","vertex","add","vertices","topOffset","k","l","normal00","normal01","normal11","normal10","face","vertexNormals","faces","normal0","normal1","threePointNormal","copy","offset","glgeom_BufferRibbonGeometry","BufferRibbonGeometry","traces","nShape","nFace","countVertexAndFacesOfPath","setAttributes","range","paths","iPath","setPath","positionCount","indexCount","attributes","trace","detail","iVertexOffsetOfPathPoint","thisColor","iTracePoint","iPathStart","iPathEnd","getReference","iPathPoint","prevColor","lerp","vertexCount","width","ss","pushVertex","iLastShapePoint","iVertexOffset","iVertexLast","iVertexCurr","jVertexLast","jVertexCurr","pushFace","positions","Float32Array","indices","Int32Array","colors","addAttribute","setIndex","position","array","r","g","normalI","normalJ","normalK","iVertex","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","detailedPath","nPath","nTrace","glgeom_Trace","Trace","iRef","referenceObjects","iEnd","iLast","iStart","sub","tangent","perpVector","prevNormal","dot","negate","randomDir","oldPath","n","iOldPoint","jOldPoint","newPath","jEnd","prevOldPoint","nextOldPoint","prevOldNormal","nextOldNormal","expandPath","iRes","isRound","isFront","isBack","segmentPath","geom","setGeometryVerticesColor","iResEnd","iResStart","glgeom_BlockArrowGeometry","BlockArrowGeometry","steps","bevelEnabled","extrudePath","applyMatrix","makeRotationFromEuler","glgeom_UnitCylinderGeometry","UnitCylinderGeometry","_this5","glgeom_RaisedShapeGeometry","RaisedShapeGeometry","thickness","_this6","displacement","computeFaceNormals","setVisible","obj","visibility","traverse","visible","clearObject3D","children","child","dontDelete","geometry","dispose","material","remove","vec","vecAlongRef","cb","ab","subVectors","cross","getUnitVectorRotation","reference","target","setFromUnitVectors","fraction","vertexColors","getCylinderMatrix","from","radius","scale","distanceTo","lookAt","updateMatrix","matrix","expandFloatArray","refArray","nCopy","nElem","targetArray","iCopy","glgeom_CopyBufferGeometry","CopyBufferGeometry","copyBufferGeometry","_this7","refBufferGeometry","uvs","uv","nVertexInCopy","count","nIndexInCopy","Uint32Array","indexOffset","expandIndices","nElemRef","iElemStart","iElemEnd","vec3Array","elems","applyMatrix4toVector3array","applyRotationOfMatrix4toVector3array","applyColorToVector3array","pairs_SpaceHash","SpaceHash","div","invDiv","maxima","minima","spans","sizes","iDim","cells","spaces","space","getSpaceFromVertex","hash","getHashFromSpace","pairs","spaceCenter","space0start","max","space0end","min","space1start","space1end","space2start","space2end","space0","space1","space2","cell","jVertexInCell","jVertex","pushCellOfSpace","Store","fields","size","_fields","is_integer_default","_init","_initField","arrayType","arraySize","Int8Array","Int16Array","Uint8Array","Uint16Array","Error","getTypedArray","il","itemSize","tmpArray","constructor","subarray","resize","growIfFull","other","thisOffset","otherOffset","thisField","otherField","thisIndex","otherIndex","offsetTarget","offsetSource","targetIndex","sourceIndex","compareFunction","thisStore","tmpStore","quicksort","left","right","pivot","leftNew","rightNew","index1","index2","copyFrom","copyWithin","hammingWeight","bitarray","BitArray","setAll","_words","start","end","words","wordValue","wordStart","wordEnd","startWord","endWord","_assignRange","bs","_isRangeValue","otherBitarray","words1","words2","wordsA","intersection","create_default","prototype","answer","getSize","pos","toArray","join","sele","proteinResTypes","dnaResTypes","rnaResTypes","green","blue","yellow","purple","grey","red","darkGreen","darkBlue","darkYellow","darkPurple","darkGrey","darkRed","ElementColors","H","C","O","N","S","P","F","CL","BR","I","FE","CA","He","Ne","Ar","Kr","Xe","Rn","data__step","data__iterator","toPairs","data__iteratorNormalCompletion","data__ref","data__ref2","slicedToArray_default","data_k","data_v","getIndexColor","setHex","getSsColor","resToAa","ALA","CYS","ASP","GLU","PHE","GLY","HIS","ILE","LYS","LEU","MET","ASN","PRO","GLN","ARG","SER","THR","VAL","TRP","TYR","DA","DT","DG","DC","A","T","G","RA","RU","RC","RG","U","backboneAtomTypes","ribbonFace","coilFace","deleteNumbers","pushToListInDict","dict","getValueTableIndex","valueList","includes","intToChar","String","fromCharCode","charToInt","charCodeAt","atomStoreFields","soup_AtomProxy","AtomProxy","soup","iAtom","load","_pos","atomStore","bondOffset","bondCount","resIds","iElem","elemTable","bfactor","iAtomType","atomTypeTable","iResType","residueStore","resTypeTable","resType","atomType","elem","iColor","colorTable","residueStoreFields","soup_ResidueProxy","ResidueProxy","atomOffset","atomCount","atom","getAtomProxy","getAtomIndices","atomTypes","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","getIAtom","prevRes","proteinAtomTypes","checkAtomTypes","nucleicAtomTypes","o3","isProteinConnectedToPrev","isNucleotideConnectedToPrev","c3","c5","c1","forward","up","iCentralAtom","iChain","resNum","insCode","isPolymer","residueSelect","residueNormal","sstruc","bondStoreFields","soup_BondProxy","BondProxy","iBond","bondStore","iAtom1","iAtom2","soup_Soup","Soup","parsingError","chains","residueProxy","atomProxy","atomSelect","bondSelect","grid","bCutoff","bMax","bMin","changed","isElem","pdbData","pdbId","parsePdbData","pdb_text","assignResidueSsAndCentralAtoms","getAtomCount","getResidueCount","calcBondsStrategic","getBondCount","calcMaxLength","findSecondaryStructure","pdbText","lines","split","line","parsetTitleFromPdbText","pdbLines","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","chain","iLine","substr","trim","parseInt","parseFloat","addAtom","increment","nRes","isNewRes","addResidue","iFirstAtomInRes","resId","atomIndices","center","getCenter","getIAtomClosest","res","getResidueProxy","iAtomClosest","minD","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","d","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","divideScalar","comp","maxLength","smallCutoffSq","mediumCutoffSq","largeCutoffSq","CHONPS","isBonded","atom1","atom2","cutoffSq","diffX","diffY","diffZ","makeBond","residue1","residue2","iRes1","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","iRes2","iAtom1Array","sort","bond","getBondProxy","residue","atom0","_arr","_i","aTypeName","spaceHash","_iteratorNormalCompletion10","_didIteratorError10","_iteratorError10","_step10","_iterator10","getClosePairs","pair","iRes0","conhPartners","residueNormals","residue0","isCONH","vecBetweenResidues","resIndices","normal2","getNucleotideNormal","betaResidues","_iteratorNormalCompletion11","_didIteratorError11","_iteratorError11","_step11","_iterator11","_pair","iVertex0","iVertex1","_iteratorNormalCompletion12","_didIteratorError12","_iteratorError12","_step12","_iterator12","normalSum","_iteratorNormalCompletion13","_didIteratorError13","_iteratorError13","_step13","_iterator13","res0","pos0","atomIndices0","res1","pos1","atomIndices1","_iteratorNormalCompletion14","_didIteratorError14","_iteratorError14","_step14","_iterator14","iAtom0","_iteratorNormalCompletion15","_didIteratorError15","_iteratorError15","_step15","_iterator15","clearBits","residueIndices","select","_iteratorNormalCompletion16","_didIteratorError16","_iteratorError16","_step16","_iterator16","selected","jRes","areCloseResidues","selectResidues","soup_View","View","order","cameraParams","focus","zFront","zBack","zoom","labels","distances","creator","show","sidechain","peptide","hydrogen","water","ligands","backboneAtom","ribbon","getAtomProxyOfCenter","pdb_id","disp","time","cameraDir","inV","upV","all_atom","version","view_id","i_atom","camera","slab","z_front","z_back","in","flatDict","lock","res_id","cameraDirection","interpolateCameras","oldCamera","futureCamera","oldCameraDirection","oldZoom","futureCameraDirection","futureZoom","cameraDirRotation","cameraUpRotation","slerp","getFractionRotation","applyQuaternion","multiply","focusDisp","focusToPosition","soup_SoupView","SoupView","currentView","savedViewsByViewId","savedViews","iLastViewSelected","targetView","nUpdateStep","maxUpdateStep","updateResidueSelection","updateView","makeDefaultOfSoup","saveView","iView","newViewId","newView","splice","getIViewFromViewId","soup_Controller","Controller","scene","soupView","iDistance","i_atom1","i_atom2","iLabel","setTargetView","getViewTranslatedTo","setTargetViewByAtom","setTargetViewByViewId","dummy","viewDicts","getDict","clearSelectedResidues","makeSelectedResidueList","lastNeighborIRes","selectNeighbourResidues","iNewView","now","month","getMonth","getDate","getFullYear","insertView","removeView","setFromDict","sortViewsByOrder","option","bool","getShowOption","setShowOption","widgets_LineElement","LineElement","display","z-index","pointer-events","canvas","context2d","getContext","parentDiv","x1","y1","x2","y2","parentDivPos","top","clearRect","beginPath","moveTo","lineTo","lineWidth","strokeStyle","stroke","widgets_CanvasWrapper","CanvasWrapper","selector","canvasDom","drawContext","mousePressed","dom","bind","ev","addEventListener","mousedown","mousemove","mouseup","h","strokeRect","fillStyle","fillRect","font","align","textAlign","textBaseline","fillText","measureText","event","rect","getBoundingClientRect","pointerX","clientX","pointerY","clientY","widgets_PopupText","PopupText","background","opacity","arrow","border-left","border-right","border-top","innerWidth","innerHeight","hide","font-family","widgets_AtomLabelsWidget","AtomLabelsWidget","controller","popups","deleteAtomLabel","popup","removePopup","createPopup","posXY","move","inZlab","widgets_DistanceMeasuresWidget","DistanceMeasuresWidget","distanceMeasures","displayScene","deleteDistance","background-color","removeDistance","dashSize","gapSize","linewidth","createDistanceMeasure","a0","a1","distanceMeasure","toFixed","m","widgets_SequenceWidget","SequenceWidget","offsetY","heightBar","spacingY","backColor","selectColor","highlightColor","border-bottom","charWidth","charHeight","textXOffset","residues","iStartChar","iEndChar","get_default","nResidue","textWidth","entry","iToX","getStyle","iChar","iCharToX","colorStyle","getPointer","xToI","setTargetViewFromAtom","getCurrIAtom","xToIChar","widgets_ZSlabWidget","ZSlabWidget","maxZLength","yOffset","zBackColor","zFrontColor","protein","yBack","zToY","yFront","yMid","xm","yToZ","getZ","widgets_GridControlWidget","GridControlWidget","buttonHeight","sliderHeight","backgroundColor","buttonsDiv","empty","makeElemButton","colorHexStr","getHexString","textButton","yTop","yBottom","widgets","display_Display","Display","saveMouseX","saveMouseY","saveMouseR","saveMouseT","mouseX","mouseY","mouseR","mouseT","webglDivId","webglDiv","contextmenu","fog","displayMeshes","displayMaterial","pickingScene","pickingTexture","texture","minFilter","pickingMeshes","pickingMaterial","lights","buildLights","nDataServer","atomRadius","buildCrossHairs","messageDiv","setMesssage","hover","sequenceWidget","zSlabWidget","gridControlWidget","distanceWidget","labelWidget","lineElement","renderer","antialias","setClearColor","setSize","domElement","appendChild","mousewheel","gesturestart","gesturechange","gestureend","parent","xOffset","stickJqueryDivInTopLeft","lastTrace","isConnectedToPrev","newTrace","calcTangents","calcNormals","calcBinormals","expand","directedLight","ambientLight","initViewsAfterSoupLoad","findGridLimits","calculateTracesForRibbons","buildMeshOfTube","buildMeshOfGrid","buildMeshOfLigands","buildMeshOfNucleotides","buildMeshOfArrows","rebuildSceneWithMeshes","reset","meshName","values","mesh","buildMeshOfFunctionName","capitalize","updateMeshesInScene","createOrClearMesh","displayGeom","pickingGeom","resGeom","getSegmentGeometry","merge","addGeomToDisplayMesh","addGeomToPickingMesh","displayMesh","blockArrowGeometry","bufferGeometry","fromGeometry","identity","applyMatrixToCopy","applyColorToCopy","pickingMesh","sphereBufferGeometry","bondIndices","cylinderBufferGeometry","midpoint","showAllResidues","getBondIndices","buildAtomMeshes","buildBondMeshes","_iteratorNormalCompletion17","_didIteratorError17","_iteratorError17","_step17","_iterator17","_iteratorNormalCompletion18","_didIteratorError18","_iteratorError18","_step18","_iterator18","_iteratorNormalCompletion19","_didIteratorError19","_iteratorError19","_step19","_iterator19","_iteratorNormalCompletion20","_didIteratorError20","_iteratorError20","_step20","_iterator20","cylinderGeom","_iteratorNormalCompletion21","_didIteratorError21","_iteratorError21","_step21","_iterator21","basepairGeom","bondTypes","getVerticesFromAtomDict","map","faceGeom","_iteratorNormalCompletion22","_didIteratorError22","_iteratorError22","_step22","_iterator22","faceVertexUvs","shift","crossHairs","viewCamera","viewCameraDirection","far","near","updateProjectionMatrix","xRotationAngle","yRotationAngle","zRotationAngle","zoomRatio","getCurrentViewCamera","rotZ","setFromAxisAngle","rotY","rotX","newZoom","setCurrentView","widthHalf","heightHalf","vector","project","cleanup","dialog","keyboard_lock","discard","saveButton","textarea","discardButton","keydown","keyCode","editbox","widthParent","outerWidth","heightParent","outerHeight","prepend","widthTarget","heightTarget","stickJqueryDivInCenter","find","textEntryDialog","makeAtomLabel","pixelBuffer","readRenderTargetPixels","iHoverAtom","getIAtomHover","getCenteredAtom","setMeshVisible","backboneAtoms","buildSelectedResidues","updateCrossHairs","rotateCameraToCurrentView","initWebglRenderer","newCamera","setCamera","updateHover","aspect","setChangeFlag","touches","eventX","eventY","sqrt","atan","atomLabelDialog","isDraggingCentralAtom","getMouse","isDoubleClick","timePressed","iDownAtom","doubleclick","saveMouse","isGesture","shiftDown","shiftKey","rightMouse","button","which","adjustCamera","wheel","wheelDelta","pow","makeDistance","lastPinchRotation","lastScale","embedjolecule_ViewPiece","ViewPiece","goto","pick","makeEditDiv","makeShowDiv","changedTet","editTextArea","editDiv","showDiv","showTextDiv","saveChange","noop","discardChange","editButton","startEdit","swapUp","swapDown","deleteView","defaultArgs","isViewTextShown","embedjolecule_EmbedJolecule","EmbedJolecule","oncontextmenu","initViewId","hAnnotationView","residueSelector","createProteinDiv","createStatusDiv","createViewDiv","setTextState","isProcessing","flag","get_views","loadViewsFromViewDicts","_ref3","get_protein_data","proteinData","nAtom","nBond","asyncSetMesssage","populateResidueSelector","findBackboneHbonds","buildScene","_x3","asyncLoadSoup","asyncLoadViews","cleanupMessage","success","save_views","getViewDicts","newId","saveCurrentView","viewDiv","saveViewsToDataServer","newText","getCurrView","_this8","delete_protein_view","setTargetToNextView","setBackboneOption","setTargetToPrevView","proteinDiv","_this9","statusText","toggleTextState","prevButton","gotoPrevView","nextButton","gotoNextView","loopButton","saveCurrView","ligButton","watButton","hydButton","backboneButton","cycleBackbone","allSidechainButton","clearSidechainButton","nearSidechainButton","toggleResidueNeighbors","outline","-moz-appearance","change","viewBarDiv","sidechainDiv","statusDiv","_this10","nView","viewPiece","delete_view","deleteCurrView","save_change","changeText","embed_view","realViewDiv","newHeight","style","fullpagejolecule_ViewPieceList","ViewPieceList","proteinDisplay","data_server","topDiv","makeNewView","insertNewViewDiv","iLastView","eq","updateViews","scrollTo","redrawSelectedViewId","iId","jId","iDiv","jDiv","swapViews","insertBefore","changedText","setTargetByViewId","makeViewDiv","insertAfter","FullPageJolecule","proteinDisplayTag","sequenceDisplayTag","viewsDisplayTag","embedJolecule","onkeydown","resizeFn","onorientationchange","noData","initViewsDisplay","viewsDisplay","makeAllViews","hashTag","setTargetToPrevResidue","setTargetToNextResidue","toUpperCase","gotoPrevResidue","gotoNextResidue","toggleShowOption","edit_fn","initEmbedJolecule","userArgs","args","__WEBPACK_IMPORTED_MODULE_6_vue__","__WEBPACK_IMPORTED_MODULE_7_vuex__","isSearchSubmitted","sortBy","descending","totalItems","dataServers","getters","mutations","setUser","SET_ISWORKING","SET_ISSEARCHSUBMITTED","SET_SEARCHPAGINATION","SET_DATASERVERS","SET_SEARCHRESULTS","SET_SEARCHERRORS","SET_TOTALRESULTS","actions","refreshDataServers","__WEBPACK_IMPORTED_MODULE_5_babel_runtime_helpers_asyncToGenerator___default","__WEBPACK_IMPORTED_MODULE_3_babel_runtime_regenerator___default","_callee$","__WEBPACK_IMPORTED_MODULE_4_babel_runtime_core_js_promise___default","all","_ref2","_state$searchPaginati","page","queryString","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_entries___default","_ref4","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_slicedToArray___default","_ref5","_ref6","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","updatePDB","_ref7","dispatch","updateEnergyCutOffSet","_ref8","_ref9","_ref10","energyCutOffSet","_callee5","_context5"],"mappings":"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","file":"static/js/app.f9f8f57fe561773cf7a3.js","sourcesContent":["<template>\n  <div style=\"height:85%;\">\n    <v-container grid-list-xl>\n      <v-layout row wrap>\n        <v-flex sm8>\n          <v-select combobox label=\"Query\" :items=\"querySelectItems\" v-model=\"query\" :filter=\"customFilter\" :error-messages=\"errors.collect('query')\" v-validate=\"''\" hint=\"Space separated list of search terms. eg oxygen 1000:1200\" persistent-hint data-vv-name=\"query\"\n            :loading=\"isWorking\" item-text=\"text\" item-value=\"value\" return-object :search-input.sync=\"search\"></v-select>\n        </v-flex>\n        <v-flex sm2>\n          <v-select label=\"PDB\" :items=\"pdbSelectItems\" v-model=\"pdb\" :error-messages=\"errors.collect('pdb')\" v-validate=\"'length:4'\" data-vv-name=\"pdb\" cache-items required></v-select>\n        </v-flex>\n        <v-flex sm2>\n          <v-select combobox cache-items label=\"Energy Cutoff Set\" :items=\"localEnergyCutoffSets\" v-model=\"energyCutoffSet\" :error-messages=\"errors.collect('energyCutoffSet')\" v-validate=\"'isValidEnergyCutOffSet'\" data-vv-name=\"energyCutoffSet\"></v-select>\n        </v-flex>\n      </v-layout>\n    </v-container>\n    <v-layout row wrap style=\"height:100%;\">\n      <v-flex xs12>\n        <div id=\"jolecule\" style=\"height:100%;\"></div>\n      </v-flex>\n    </v-layout>\n  </div>\n</template>\n  \n<script>\nimport { mapState, mapActions, mapMutations, mapGetters } from \"vuex\";\nimport { initEmbedJolecule } from \"../../jolecule/main\";\nimport { Validator } from \"vee-validate\";\n\nexport default {\n  computed: {\n    ...mapGetters([\"energyCutoffSets\", \"elements\", \"searchQuery\"]),\n    isWorking: {\n      get() {\n        return this.$store.state.isWorking;\n      },\n      set(v) {\n        this.$store.commit(\"SET_ISWORKING\", v);\n      }\n    },\n    pdb: {\n      get() {\n        return this.$store.state.pdb;\n      },\n      set(v) {\n        this.$store.commit(\"SET_PDB\", v);\n      }\n    },\n    energyCutoffSet: {\n      get() {\n        return this.$store.state.energyCutoffSet;\n      },\n      set(v) {\n        if (v) {\n          let value = v.value ? v.value : v;\n          console.log(\n            \"local\",\n            \"SET_ENERGYCUTOFFSET\",\n            v,\n            value,\n            this.isValidEnergyCutOffSet(value)\n          );\n          if (this.isValidEnergyCutOffSet(value)) {\n            this.$store.commit(\"SET_ENERGYCUTOFFSET\", value);\n          }\n        }\n      }\n    }\n  },\n  data() {\n    return {\n      query: {\n        text: \"\",\n        value: \"\"\n      },\n      search: null,\n      pdbSelectItems: [],\n      querySelectItems: [],\n      customFilter(item, queryText, itemText) {\n        return itemText;\n      },\n      localEnergyCutoffSets: []\n    };\n  },\n  methods: {\n    ...mapMutations([\"SET_PDB\", \"SET_ENERGYCUTOFFSET\"]),\n    isValidEnergyCutOffSet: function(value) {\n      let checkValue = value.value ? value.value : value;\n      console.log(\"local\", \"isValidEnergyCutOffSet\", value, checkValue);\n      return (\n        checkValue == \"veryHigh\" ||\n        checkValue == \"high\" ||\n        checkValue == \"medium\" ||\n        checkValue == \"low\" ||\n        (checkValue <= -0.5 && checkValue >= -2.0)\n      );\n    },\n    addDataServer: function({ embededJolecule, index }) {\n      let url = `http://localhost:8081/api/dataServer/${this.pdb}/${\n        this.energyCutoffSet\n      }/${index}/`;\n      axios.get(url).then(response => {\n        let dataServerFn = response.data.replace(\"define(\", \"(\"); //this is a hack that I need to fix with bosco: need to return function not define #changed in jol-static\n        let dataServer = eval(dataServerFn);\n        console.log(\"local\", \"dataserver\", dataServer());\n        embededJolecule.asyncAddDataServer(dataServer());\n      });\n    },\n    querySelections(query) {\n      this.isWorking = true;\n      let url = `http://localhost:8081/api/nobleGasBindings/search?limit=100&query=${query}`;\n      axios.get(url).then(response => {\n        console.log(\"local\", \"autocompleteResults\", response, response.data);\n        let searchResults = [];\n        response.data.rows.forEach(row => {\n          console.log(\"local\", row);\n          searchResults.push({\n            text: `[${row.pdb}]:${row.protein_type} - ${\n              row.protein_description\n            } (${row.binding_energy} kcal/mol)`,\n            value: row.pdb\n          });\n        });\n        this.querySelectItems = searchResults;\n        this.isWorking = false;\n      });\n    },\n    reDisplayJolecule() {\n      document.getElementById(\"jolecule\").innerHTML = \"\";\n      let j = initEmbedJolecule({\n        divTag: \"#jolecule\",\n        viewId: \"\",\n        viewHeight: 100,\n        isLoop: false,\n        isGrid: true,\n        isEditable: false\n      });\n      let newURL =\n        window.location.protocol +\n        \"//\" +\n        window.location.host +\n        `/#/view?pdb=${this.pdb}&cutoff=${this.energyCutoffSet}`;\n      console.log(\"local\", \"newurl\", newURL, window.location.href);\n      if (window.location.href != newURL) {\n        window.history.pushState(null, \"\", newURL);\n        console.log(\"local\", \"url updated\", newURL);\n      }\n      this.pdbSelectItems.push(this.pdb);\n      this.localEnergyCutoffSets.push(this.energyCutoffSet);\n      for (let i = 0; i <= 5; i++) {\n        this.addDataServer({\n          embededJolecule: j,\n          pdb: this.pdb,\n          energyCutoffSet: this.energyCutoffSet,\n          index: i\n        });\n      }\n      //document.getElementById(\"jolecule-soup-display\").style.height = \"400px\" //this is a hack that I need to fix with bosco: need to set height correctly\n    },\n    displayJolecule() {\n      let pdb = this.$route.query.pdb;\n      let energyCutoffSet = this.$route.query.cutoff;\n      if (pdb && pdb > \"\") {\n        this.SET_PDB(pdb);\n      }\n      if (energyCutoffSet && energyCutoffSet > \"\") {\n        this.SET_ENERGYCUTOFFSET(energyCutoffSet);\n      }\n      this.localEnergyCutoffSets = this.energyCutoffSets;\n      this.localEnergyCutoffSets.push({\n        text: this.energyCutoffSet,\n        value: this.energyCutoffSet\n      });\n      this.reDisplayJolecule();\n    }\n  },\n  watch: {\n    search(val) {\n      val && this.querySelections(val);\n    },\n    query(val) {\n      if (val.text && val.value) {\n        this.pdbSelectItems = [this.pdb];\n        this.pdb = val.value;\n      }\n    },\n    energyCutoffSet: {\n      handler() {\n        this.reDisplayJolecule();\n      },\n      deep: true\n    },\n    pdb: {\n      handler() {\n        this.reDisplayJolecule();\n      },\n      deep: true\n    },\n    $route: {\n      handler() {\n        console.log(\"local\", \"route change\", this.$route, window.history);\n        this.displayJolecule();\n      },\n      deep: true\n    }\n  },\n  mounted() {\n    Validator.extend(\"isValidEnergyCutOffSet\", {\n      getMessage: field => \"The \" + field + \" value is not a valid cutoff.\",\n      validate: value => {\n        return this.isValidEnergyCutOffSet(value);\n      }\n    });\n    this.displayJolecule();\n  }\n};\n</script>\n  \n<style scoped>\n\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/tabs/view.vue","export default {\n  apiUrl: `http://localhost:3000`,\n  title: 'PlasticGui',\n  isUser: true\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","import _ from 'lodash'\n\nexport default {\n\n  jstr (o) {\n    return JSON.stringify(o, null, 2)\n  },\n\n  /**\n   * In-place deletion of item from a list. Assumes item is an object\n   * and key gives the field that identifies the item\n   * @param {Array} aList - an array of items\n   * @param {Object} item - target item\n   * @param {String} key - field in item for identification\n   */\n  removeItem (aList, item, key) {\n    for (let i = aList.length - 1; i >= 0; i -= 1) {\n      if (aList[i][key] === item[key]) {\n        aList.splice(i, 1)\n      }\n    }\n  },\n\n  /**\n   * Download a string into fname on the browser\n   * @param {String} filename\n   * @param {String} s - contents of file\n   */\n  downloadFile (filename, s) {\n    let data = 'text/json;charset=utf-8,' + encodeURIComponent(s)\n\n    let a = document.createElement('a')\n    a.href = 'data:' + data\n    a.download = 'data.json'\n    a.innerHTML = 'download JSON'\n\n    document.body.appendChild(a)\n    a.click()\n    document.body.removeChild(a)\n  },\n\n  delay (time) {\n    return new Promise(function (resolve) {\n      setTimeout(function () { resolve(time) }, time)\n    })\n  },\n\n  /**\n   * Creates an n-length array of v values\n   * @returns {Array}\n   */\n  makeArray (n, v) {\n    let l = []\n    for (let i = 0; i < n; i += 1) {\n      l.push(v)\n    }\n    return l\n  },\n\n  isStringInStringList (str, testStrList) {\n    for (let testStr of testStrList) {\n      if (_.includes(str, testStr)) {\n        return true\n      }\n    }\n    return false\n  },\n\n  /**\n   * Copies to the clipboard https://stackoverflow.com/a/30810322\n   */\n  copyTextToClipboard (text) {\n    let textArea = document.createElement('textarea')\n\n    //\n    // *** This styling is an extra step which is likely not required. ***\n    //\n    // Why is it here? To ensure:\n    // 1. the element is able to have focus and selection.\n    // 2. if element was to flash render it has minimal visual impact.\n    // 3. less flakyness with selection and copying which **might** occur if\n    //    the textarea element is not visible.\n    //\n    // The likelihood is the element won't even render, not even a flash,\n    // so some of these are just precautions. However in IE the element\n    // is visible whilst the popup box asking the user for permission for\n    // the web page to copy to the clipboard.\n    //\n\n    // Place in top-left corner of screen regardless of scroll position.\n    textArea.style.position = 'fixed'\n    textArea.style.top = 0\n    textArea.style.left = 0\n\n    // Ensure it has a small width and height. Setting to 1px / 1em\n    // doesn't work as this gives a negative w/h on some browsers.\n    textArea.style.width = '2em'\n    textArea.style.height = '2em'\n\n    // We don't need padding, reducing the size if it does flash render.\n    textArea.style.padding = 0\n\n    // Clean up any borders.\n    textArea.style.border = 'none'\n    textArea.style.outline = 'none'\n    textArea.style.boxShadow = 'none'\n\n    // Avoid flash of white box if rendered for any reason.\n    textArea.style.background = 'transparent'\n\n    textArea.value = text\n\n    document.body.appendChild(textArea)\n\n    textArea.select()\n\n    try {\n      let successful = document.execCommand('copy')\n      let msg = successful ? 'successful' : 'unsuccessful'\n      console.log('> copyTextToClipboard', msg)\n    } catch (err) {\n      console.log('> copyTextToClipboard failed')\n    }\n\n    document.body.removeChild(textArea)\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/util.js","import axios from 'axios'\nimport config from '../config'\nimport saveAs from 'file-saver'\n\n/**\n * @fileOverview rpc module provides a clean rpc interface for JSON-based\n * api with the server.\n */\n\n// important for using with passport.js\n// https://stackoverflow.com/questions/40941118/axios-wont-send-cookie-ajax-xhrfields-does-just-fine\naxios.defaults.withCredentials = true\n\nexport default {\n\n  async rpcRun (method, ...params) {\n    let payload = {method, params, jsonrpc: '2.0'}\n\n    console.log('> rpc.rpcRun', method, ...params)\n\n    try {\n      let response = await axios.post(`${config.apiUrl}/api/rpc-run`, payload)\n      return response.data\n    } catch (e) {\n      return {\n        error: {\n          code: -32000,\n          message: e.toString()\n        }\n      }\n    }\n  },\n\n  async rpcUpload (method, files, ...params) {\n    let formData = new FormData()\n    formData.append('method', method)\n    formData.append('params', JSON.stringify(params))\n    formData.append('jsonrpc', '2.0')\n\n    for (let f of files) {\n      formData.append('uploadFiles', f, f.name)\n    }\n\n    console.log('> rpc.rpcUpoad', method, files, ...params)\n\n    try {\n      let response = await axios.post(`${config.apiUrl}/api/rpc-upload`, formData)\n      return response.data\n    } catch (e) {\n      return {\n        error: {\n          code: -32000,\n          message: e.toString()\n        }\n      }\n    }\n  },\n\n  async rpcDownload (method, ...params) {\n    let payload = {method, params, jsonrpc: '2.0'}\n\n    console.log('> rpc.rpcDownload', ...params)\n\n    try {\n      let response = await axios.post(`${config.apiUrl}/api/rpc-download`, payload)\n      let filename = response.headers.filename\n      let data = JSON.parse(response.headers.data)\n      console.log('> rpc.rpcDownload response', data)\n      if (!data.error) {\n        let blob = new Blob([response.data])\n        saveAs.saveAs(blob, (filename))\n      }\n      return data\n    } catch (e) {\n      return {\n        error: {\n          code: -32000,\n          message: e.toString()\n        }\n      }\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/rpc.js","/**\n * @fileOverview Authentication module. Provides routines\n * to authenticate with the server, as well as a central\n * location to access the user credentials.\n *\n * Note: did not put in Vuex.store as the user login should\n * be queried before Vue starts up, so make it a global\n * outside Vue\n */\n\nimport _ from 'lodash'\nimport sha224 from 'crypto-js/sha224'\nimport util from '../modules/util'\nimport rpc from '../modules/rpc'\nimport store from '../store'\n\n/**\n * Converts user.rawPassword to hashed user.password\n */\nfunction hashUserPassword (user) {\n  let result = _.cloneDeep(user)\n  if (!result.password && result.rawPassword) {\n    result.password = sha224(result.rawPassword).toString()\n    delete result.rawPassword\n  }\n  if (result.rawPasswordConfirm) {\n    delete result.rawPasswordConfirm\n  }\n  return result\n}\n\nexport default {\n\n  /**\n   * Queries server for user login with newUser. If\n   * newUser.rawPassword is given, will hash with SHA244\n   * to user.password. Then saves the user to localStorage\n   *\n   * @param {Object} newUser - {email, password, rawPassword}\n   */\n  async login (newUser) {\n    let payload = hashUserPassword(newUser)\n    console.log('> auth.login', payload)\n    let response = await rpc.rpcRun('publicLoginUser', payload)\n    console.log('> auth.login response', response)\n    if (response.result) {\n      let user = _.cloneDeep(store.state.user)\n      _.assign(user, response.result.user)\n      user.authenticated = true\n      user.password = payload.password\n      localStorage.setItem('user', util.jstr(user))\n      store.commit('setUser', user)\n    }\n    return response\n  },\n\n  register (newUser) {\n    let payload = hashUserPassword(newUser)\n    console.log('> auth.register', payload)\n    return rpc.rpcRun('publicRegisterUser', payload)\n  },\n\n  async update (editUser) {\n    let payload = hashUserPassword(editUser)\n    console.log('> auth.update', util.jstr(payload))\n    let response = await rpc.rpcRun('loginUpdateUser', payload)\n    if (response.result) {\n      let user = _.cloneDeep(store.state.user)\n      _.assign(user, payload)\n      localStorage.setItem('user', JSON.stringify(user))\n      store.commit('setUser', user)\n    }\n    return response\n  },\n\n  async resetPassword (tokenId, rawPassword) {\n    let password = sha224(rawPassword).toString()\n    console.log('> auth.resetPassword', tokenId, password)\n    return rpc.rpcRun('publicForceUpdatePassword', tokenId, password)\n  },\n\n  async restoreLastUser () {\n    let lastUser = JSON.parse(localStorage.getItem('user'))\n    console.log('> auth.restoreLastUser from localStorage', lastUser)\n    if (lastUser) {\n      return this.login(lastUser)\n    }\n  },\n\n  logout () {\n    localStorage.removeItem('user')\n    store.commit('setUser', {authenticated: false})\n    return rpc.rpcRun('publicLogoutUser')\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/modules/auth.js","<template>\n  <v-toolbar>\n    <h2\n      class=\"v-title\"\n      style=\"\n        padding-left: 1em;\n        cursor: pointer;\n        flex: 1\"\n      @click=\"home()\">\n      {{ title }}\n    </h2>\n    <v-tabs dark>\n      <v-tab id=\"tab-home\" to=\"/home\" router>Home\n      </v-tab>\n      <v-tab id=\"tab-search\" to=\"/search\" router>Search\n      </v-tab>\n      <v-tab id=\"tab-view\" to=\"/view\" router>View\n      </v-tab>\n    </v-tabs>\n    <div v-if=\"isUser\">\n\n      <v-menu v-if=\"user.authenticated\">\n\n        <v-btn v-menu-trigger>\n          {{user.name}}\n        </v-btn>\n\n        <v-menu-content>\n\n          <v-menu-item @click=\"editUser\">\n            Edit User\n          </v-menu-item>\n\n          <v-menu-item @click=\"logout\">\n            Logout\n          </v-menu-item>\n\n        </v-menu-content>\n\n      </v-menu>\n\n      <router-link\n        v-else\n        to='/login'\n        tag='v-btn'>\n        Login\n      </router-link>\n\n    </div>\n\n  </v-toolbar>\n</template>\n\n<script>\nimport auth from \"../modules/auth\";\nimport config from \"../config\";\n\nexport default {\n  name: \"navbar\",\n  data() {\n    return {\n      title: config.title,\n      isUser: config.isUser\n    };\n  },\n  computed: {\n    user: function() {\n      return this.$store.state.user;\n    }\n  },\n  methods: {\n    editUser() {\n      this.$router.push(\"/edit-user\");\n    },\n    home() {\n      this.$router.push(\"/\");\n    },\n    async logout() {\n      await auth.logout();\n      this.$router.push(\"/login\");\n    }\n  }\n};\n</script>\n<style scoped>\n#app {\n  font-family: \"Avenir\", Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: center;\n  color: #2c3e50;\n  margin-top: 0px;\n}\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/Navbar.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-toolbar',[_c('h2',{staticClass:\"v-title\",staticStyle:{\"padding-left\":\"1em\",\"cursor\":\"pointer\",\"flex\":\"1\"},on:{\"click\":function($event){_vm.home()}}},[_vm._v(\"\\n    \"+_vm._s(_vm.title)+\"\\n  \")]),_vm._v(\" \"),_c('v-tabs',{attrs:{\"dark\":\"\"}},[_c('v-tab',{attrs:{\"id\":\"tab-home\",\"to\":\"/home\",\"router\":\"\"}},[_vm._v(\"Home\\n    \")]),_vm._v(\" \"),_c('v-tab',{attrs:{\"id\":\"tab-search\",\"to\":\"/search\",\"router\":\"\"}},[_vm._v(\"Search\\n    \")]),_vm._v(\" \"),_c('v-tab',{attrs:{\"id\":\"tab-view\",\"to\":\"/view\",\"router\":\"\"}},[_vm._v(\"View\\n    \")])],1),_vm._v(\" \"),(_vm.isUser)?_c('div',[(_vm.user.authenticated)?_c('v-menu',[_c('v-btn',{directives:[{name:\"menu-trigger\",rawName:\"v-menu-trigger\"}]},[_vm._v(\"\\n        \"+_vm._s(_vm.user.name)+\"\\n      \")]),_vm._v(\" \"),_c('v-menu-content',[_c('v-menu-item',{on:{\"click\":_vm.editUser}},[_vm._v(\"\\n          Edit User\\n        \")]),_vm._v(\" \"),_c('v-menu-item',{on:{\"click\":_vm.logout}},[_vm._v(\"\\n          Logout\\n        \")])],1)],1):_c('router-link',{attrs:{\"to\":\"/login\",\"tag\":\"v-btn\"}},[_vm._v(\"\\n      Login\\n    \")])],1):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-d1348cd4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Navbar.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-d1348cd4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Navbar.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Navbar.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Navbar.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-d1348cd4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Navbar.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-d1348cd4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Navbar.vue\n// module id = null\n// module chunks = ","<template>\n  <div id='app'>\n    <navbar></navbar>\n    <router-view></router-view>\n  </div>\n</template>\n\n<style>\n@import \"http://fonts.googleapis.com/css?family=Roboto:300,400,500,700,400italic\";\n@import \"http://fonts.googleapis.com/icon?family=Material+Icons\";\n</style>\n\n<script>\nimport \"vuetify/dist/vuetify.min.css\";\nimport Navbar from \"@/components/Navbar.vue\";\nexport default {\n  name: \"app\",\n  components: { Navbar }\n};\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('navbar'),_vm._v(\" \"),_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-96ae8d74\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-96ae8d74\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-96ae8d74\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\n  <v-layout v-align=\"center\">\n    <v-card>\n      <v-layout v-flex=\"50\" v-align=\"center\" v-column>\n\n      <v-toolbar>\n        <v-toolbar-title>Login to {{ title }}</v-toolbar-title>\n      </v-toolbar>\n      <v-card-text>\n        <form novalidate class=\"login-screen\"\n              v-on:submit.prevent=\"submit\">\n        <v-container fluid grid-list-xl>\n        <v-layout  row wrap>\n        <v-flex class=\"xs12\">\n            <v-text-field\n              v-model=\"email\"\n              label=\"email\"\n              :error-messages=\"errors.collect('email')\"\n              v-validate=\"'email'\"\n              data-vv-name=\"email\"\n            ></v-text-field>\n              <v-text-field\n                hint=\"At least 6 characters\"\n                v-model=\"rawPassword\"\n                :append-icon=\"passwordHidden ? 'visibility' : 'visibility_off'\"\n                :append-icon-cb=\"() => (passwordHidden = !passwordHidden)\"\n                :type=\"passwordHidden ? 'password' : 'text'\"\n                counter\n                label=\"password\"\n                :error-messages=\"errors.collect('password')\"\n                v-validate=\"'required|min:6'\"\n                data-vv-name=\"password\"\n            ></v-text-field> \n            <p><a href=\"/forgotPassword\">Forgot</a> your password?   </p>\n              <div class=\"alert alert-danger\">{{loginMessage}}</div>\n          </v-flex>\n        </v-layout>\n        <v-btn type=\"submit\" class=\"v-accent\" >Sign in</v-btn>\n        <v-btn type=\"button\" class=\"v-primary\" @click=\"clearForm\">Cancel</v-btn>\n\n          <div v-if=\"error\" style=\"color: red\">\n            {{ error }}\n          </div>\n\n          <div style=\"margin-top: 3em\">\n            New to {{ title }}? &nbsp;\n            <router-link to=\"/register\">Register</router-link>\n          </div>\n</v-container>\n        </form>\n</v-card-text>\n      </v-layout>\n    </v-card>\n  </v-layout>\n</template>\n\n<script>\nimport auth from '../modules/auth'\nimport config from '../config'\n\nexport default {\n  name: 'Login',\n  data () {\n    return {\n      title: config.title,\n      email: '',\n      rawPassword: '',\n      error: '',\n      passwordHidden:true\n    }\n  },\n  methods: {\n    async submit () {\n      let payload = {\n        email: this.$data.email,\n        rawPassword: this.$data.rawPassword\n      }\n      console.log('> Login.submit', payload)\n      let response = await auth.login(payload)\n      console.log('> Login.submit response', response)\n\n      if (response.result) {\n        this.$router.push('/')\n      } else {\n        this.error = response.error.message\n      }\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layout',{directives:[{name:\"align\",rawName:\"v-align\",value:(_vm.center),expression:\"center\"}]},[_c('v-card',[_c('v-layout',{directives:[{name:\"flex\",rawName:\"v-flex\",value:(50),expression:\"50\"},{name:\"align\",rawName:\"v-align\",value:(_vm.center),expression:\"center\"},{name:\"column\",rawName:\"v-column\"}]},[_c('v-toolbar',[_c('v-toolbar-title',[_vm._v(\"Login to \"+_vm._s(_vm.title))])],1),_vm._v(\" \"),_c('v-card-text',[_c('form',{staticClass:\"login-screen\",attrs:{\"novalidate\":\"\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.submit($event)}}},[_c('v-container',{attrs:{\"fluid\":\"\",\"grid-list-xl\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{staticClass:\"xs12\"},[_c('v-text-field',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('email'),expression:\"'email'\"}],attrs:{\"label\":\"email\",\"error-messages\":_vm.errors.collect('email'),\"data-vv-name\":\"email\"},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}}),_vm._v(\" \"),_c('v-text-field',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('required|min:6'),expression:\"'required|min:6'\"}],attrs:{\"hint\":\"At least 6 characters\",\"append-icon\":_vm.passwordHidden ? 'visibility' : 'visibility_off',\"append-icon-cb\":function () { return (_vm.passwordHidden = !_vm.passwordHidden); },\"type\":_vm.passwordHidden ? 'password' : 'text',\"counter\":\"\",\"label\":\"password\",\"error-messages\":_vm.errors.collect('password'),\"data-vv-name\":\"password\"},model:{value:(_vm.rawPassword),callback:function ($$v) {_vm.rawPassword=$$v},expression:\"rawPassword\"}}),_vm._v(\" \"),_c('p',[_c('a',{attrs:{\"href\":\"/forgotPassword\"}},[_vm._v(\"Forgot\")]),_vm._v(\" your password?   \")]),_vm._v(\" \"),_c('div',{staticClass:\"alert alert-danger\"},[_vm._v(_vm._s(_vm.loginMessage))])],1)],1),_vm._v(\" \"),_c('v-btn',{staticClass:\"v-accent\",attrs:{\"type\":\"submit\"}},[_vm._v(\"Sign in\")]),_vm._v(\" \"),_c('v-btn',{staticClass:\"v-primary\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.clearForm}},[_vm._v(\"Cancel\")]),_vm._v(\" \"),(_vm.error)?_c('div',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"\\n            \"+_vm._s(_vm.error)+\"\\n          \")]):_vm._e(),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"3em\"}},[_vm._v(\"\\n            New to \"+_vm._s(_vm.title)+\"? \\n            \"),_c('router-link',{attrs:{\"to\":\"/register\"}},[_vm._v(\"Register\")])],1)],1)],1)])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5612ff91\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Login.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5612ff91\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Login.vue\n// module id = null\n// module chunks = ","<template>\n  <md-layout md-align=\"center\">\n    <md-whiteframe style=\"margin-top: 4em; padding: 3em\">\n      <md-layout md-flex=\"50\" md-align=\"center\" md-column>\n\n        <h2 class=\"md-display-2\">\n          Register to {{ title }}\n        </h2>\n\n        <form v-on:submit.prevent=\"submit\">\n          <md-input-container>\n            <label>User name</label>\n            <md-input\n              type='text'\n              v-model='name'\n              placeholder='User name'>\n            </md-input>\n          </md-input-container>\n          <md-input-container>\n            <label>E-mail address</label>\n            <md-input\n              type='text'\n              v-model='email'\n              placeholder='E-mail address'>\n            </md-input>\n          </md-input-container>\n          <md-input-container>\n            <label>Password</label>\n            <md-input\n              type='password'\n              v-model='rawPassword'\n              placeholder='Password'>\n            </md-input>\n          </md-input-container>\n          <md-input-container>\n            <label>Confirm Password</label>\n            <md-input\n              type='password'\n              v-model='rawPasswordConfirm'\n              placeholder='Confirm Password'>\n            </md-input>\n          </md-input-container>\n          <md-button type=\"submit\" class=\"md-raised md-primary\">\n            Register\n          </md-button>\n          <div v-if=\"error\" style=\"color: red\">\n            {{error}}\n          </div>\n        </form>\n\n      </md-layout>\n    </md-whiteframe>\n  </md-layout>\n</template>\n\n<script>\nimport auth from '../modules/auth'\nimport config from '../config'\n\nexport default {\n  name: 'Register',\n  data () {\n    return {\n      title: config.title,\n      name: '',\n      email: '',\n      rawPassword: '',\n      rawPasswordConfirm: '',\n      user: auth.user,\n      error: ''\n    }\n  },\n  methods: {\n    async submit () {\n      let payload = {\n        name: this.$data.name,\n        email: this.$data.email,\n        rawPassword: this.$data.rawPassword,\n        rawPasswordConfirm: this.$data.rawPasswordConfirm\n      }\n      let response = await auth.register(payload)\n\n      if (response.result) {\n        console.log('> Register.submit register success', response.result)\n        response = await auth.login({\n          email: payload.email,\n          rawPassword: payload.rawPassword\n        })\n      }\n\n      if (response.result) {\n        console.log('> Register.submit login success', response.result)\n        this.$router.push('/')\n      } else {\n        console.log('> Register.submit fail', response.error)\n        this.error = response.error.message\n      }\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Register.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('md-layout',{attrs:{\"md-align\":\"center\"}},[_c('md-whiteframe',{staticStyle:{\"margin-top\":\"4em\",\"padding\":\"3em\"}},[_c('md-layout',{attrs:{\"md-flex\":\"50\",\"md-align\":\"center\",\"md-column\":\"\"}},[_c('h2',{staticClass:\"md-display-2\"},[_vm._v(\"\\n        Register to \"+_vm._s(_vm.title)+\"\\n      \")]),_vm._v(\" \"),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.submit($event)}}},[_c('md-input-container',[_c('label',[_vm._v(\"User name\")]),_vm._v(\" \"),_c('md-input',{attrs:{\"type\":\"text\",\"placeholder\":\"User name\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}})],1),_vm._v(\" \"),_c('md-input-container',[_c('label',[_vm._v(\"E-mail address\")]),_vm._v(\" \"),_c('md-input',{attrs:{\"type\":\"text\",\"placeholder\":\"E-mail address\"},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}})],1),_vm._v(\" \"),_c('md-input-container',[_c('label',[_vm._v(\"Password\")]),_vm._v(\" \"),_c('md-input',{attrs:{\"type\":\"password\",\"placeholder\":\"Password\"},model:{value:(_vm.rawPassword),callback:function ($$v) {_vm.rawPassword=$$v},expression:\"rawPassword\"}})],1),_vm._v(\" \"),_c('md-input-container',[_c('label',[_vm._v(\"Confirm Password\")]),_vm._v(\" \"),_c('md-input',{attrs:{\"type\":\"password\",\"placeholder\":\"Confirm Password\"},model:{value:(_vm.rawPasswordConfirm),callback:function ($$v) {_vm.rawPasswordConfirm=$$v},expression:\"rawPasswordConfirm\"}})],1),_vm._v(\" \"),_c('md-button',{staticClass:\"md-raised md-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(\"\\n          Register\\n        \")]),_vm._v(\" \"),(_vm.error)?_c('div',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"\\n          \"+_vm._s(_vm.error)+\"\\n        \")]):_vm._e()],1)])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5c97fed8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Register.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Register.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./Register.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5c97fed8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./Register.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Register.vue\n// module id = null\n// module chunks = ","<template>\n  <md-layout md-align=\"center\">\n    <md-whiteframe style=\"margin-top: 4em; padding: 3em\">\n      <md-layout md-flex=\"50\" md-align=\"center\" md-column>\n\n        <h2 class=\"md-display-2\">\n          {{ title }}\n        </h2>\n\n        <form v-on:submit.prevent=\"submit\">\n\n          <md-input-container>\n            <label>User name</label>\n            <md-input\n              type='text'\n              v-model='name'\n              placeholder='User name'>\n            </md-input>\n          </md-input-container>\n\n          <md-input-container>\n            <label>E-mail address</label>\n            <md-input\n              type='text'\n              v-model='email'\n              placeholder='E-mail address'>\n            </md-input>\n          </md-input-container>\n\n          <md-input-container>\n            <label>New Password</label>\n            <md-input\n              type='password'\n              v-model='rawPassword'\n              placeholder='New Password'>\n            </md-input>\n          </md-input-container>\n\n          <md-input-container>\n            <label>Confirm Password</label>\n            <md-input\n              type='password'\n              v-model='rawPasswordConfirm'\n              placeholder='Confirm Password'>\n            </md-input>\n          </md-input-container>\n\n          <md-button type=\"submit\" class=\"md-raised md-primary\">\n            Save\n          </md-button>\n\n          <div v-if=\"error\" style=\"color: red\">\n            {{error}}\n          </div>\n\n        </form>\n\n      </md-layout>\n    </md-whiteframe>\n  </md-layout>\n</template>\n\n<script>\nimport auth from '../modules/auth'\nimport _ from 'lodash'\n\nexport default {\n  name: 'EditUser',\n  data () {\n    let result = {}\n    _.assign(result, this.$store.state.user)\n    _.assign(result, {\n      title: 'Edit Your Details',\n      rawPassword: '',\n      rawPasswordConfirm: '',\n      error: ''\n    })\n    return result\n  },\n  methods: {\n    async submit () {\n      this.error = ''\n\n      let payload = {}\n      const keys = ['id', 'name', 'email', 'rawPassword', 'rawPasswordConfirm']\n      for (let key of keys) {\n        if (this.$data[key]) {\n          payload[key] = this.$data[key]\n        }\n      }\n\n      let response = await auth.update(payload)\n      if (response.result) {\n        this.error = 'User updated'\n      } else {\n        console.log('> EditUser.submit fail', response)\n        this.error = response.error.message\n      }\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/EditUser.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('md-layout',{attrs:{\"md-align\":\"center\"}},[_c('md-whiteframe',{staticStyle:{\"margin-top\":\"4em\",\"padding\":\"3em\"}},[_c('md-layout',{attrs:{\"md-flex\":\"50\",\"md-align\":\"center\",\"md-column\":\"\"}},[_c('h2',{staticClass:\"md-display-2\"},[_vm._v(\"\\n        \"+_vm._s(_vm.title)+\"\\n      \")]),_vm._v(\" \"),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.submit($event)}}},[_c('md-input-container',[_c('label',[_vm._v(\"User name\")]),_vm._v(\" \"),_c('md-input',{attrs:{\"type\":\"text\",\"placeholder\":\"User name\"},model:{value:(_vm.name),callback:function ($$v) {_vm.name=$$v},expression:\"name\"}})],1),_vm._v(\" \"),_c('md-input-container',[_c('label',[_vm._v(\"E-mail address\")]),_vm._v(\" \"),_c('md-input',{attrs:{\"type\":\"text\",\"placeholder\":\"E-mail address\"},model:{value:(_vm.email),callback:function ($$v) {_vm.email=$$v},expression:\"email\"}})],1),_vm._v(\" \"),_c('md-input-container',[_c('label',[_vm._v(\"New Password\")]),_vm._v(\" \"),_c('md-input',{attrs:{\"type\":\"password\",\"placeholder\":\"New Password\"},model:{value:(_vm.rawPassword),callback:function ($$v) {_vm.rawPassword=$$v},expression:\"rawPassword\"}})],1),_vm._v(\" \"),_c('md-input-container',[_c('label',[_vm._v(\"Confirm Password\")]),_vm._v(\" \"),_c('md-input',{attrs:{\"type\":\"password\",\"placeholder\":\"Confirm Password\"},model:{value:(_vm.rawPasswordConfirm),callback:function ($$v) {_vm.rawPasswordConfirm=$$v},expression:\"rawPasswordConfirm\"}})],1),_vm._v(\" \"),_c('md-button',{staticClass:\"md-raised md-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(\"\\n          Save\\n        \")]),_vm._v(\" \"),(_vm.error)?_c('div',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"\\n          \"+_vm._s(_vm.error)+\"\\n        \")]):_vm._e()],1)])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-76eb0858\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/EditUser.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./EditUser.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./EditUser.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-76eb0858\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./EditUser.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/EditUser.vue\n// module id = null\n// module chunks = ","<template>\n  <div style=\"padding: 10px\">\n\n    <h2 class=\"md-display-2\">\n      Users\n    </h2>\n\n    <md-list>\n      <md-list-item\n        v-for=\"user of users\"\n        :key=\"user.id\">\n        {{ user.name }} - {{user.email}}\n        <md-button\n          @click=\"deleteUser(user.id)\">\n          <md-icon\n            md-mini>\n            delete\n          </md-icon>\n        </md-button>\n      </md-list-item>\n    </md-list>\n\n  </div>\n</template>\n\n<script>\nimport rpc from '../modules/rpc'\n\nexport default {\n  name: 'AdminUser',\n  data () {\n    return {\n      users: []\n    }\n  },\n  async mounted () {\n    let response = await rpc.rpcRun('adminGetUsers')\n    if (response.result) {\n      console.log('> AdminUsers.mounted users', response.result.users)\n      this.users = response.result.users\n    }\n  },\n  methods: {\n    async deleteUser (userId) {\n      let response = await rpc.rpcRun('adminDeleteUser', userId)\n      if (response.result) {\n        console.log('> AdminUsers.deleteUser remaining', response.result.users)\n        this.users = response.result.users\n      }\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/AdminUsers.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"padding\":\"10px\"}},[_c('h2',{staticClass:\"md-display-2\"},[_vm._v(\"\\n    Users\\n  \")]),_vm._v(\" \"),_c('md-list',_vm._l((_vm.users),function(user){return _c('md-list-item',{key:user.id},[_vm._v(\"\\n      \"+_vm._s(user.name)+\" - \"+_vm._s(user.email)+\"\\n      \"),_c('md-button',{on:{\"click\":function($event){_vm.deleteUser(user.id)}}},[_c('md-icon',{attrs:{\"md-mini\":\"\"}},[_vm._v(\"\\n          delete\\n        \")])],1)],1)}))],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-790ed42f\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/AdminUsers.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./AdminUsers.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./AdminUsers.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-790ed42f\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./AdminUsers.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/AdminUsers.vue\n// module id = null\n// module chunks = ","<template>\n  <md-layout md-align=\"center\">\n    <md-whiteframe style=\"margin-top: 4em; padding: 3em\">\n      <md-layout md-flex=\"50\" md-align=\"center\" md-column>\n\n        <h2 class=\"md-display-2\">\n          {{ title }}\n        </h2>\n\n        <form v-on:submit.prevent=\"submit\">\n\n          <md-input-container>\n            <label>New Password</label>\n            <md-input\n              type='password'\n              v-model='rawPassword'\n              placeholder='New Password'>\n            </md-input>\n          </md-input-container>\n\n          <md-input-container>\n            <label>Confirm Password</label>\n            <md-input\n              type='password'\n              v-model='rawPasswordConfirm'\n              placeholder='Confirm Password'>\n            </md-input>\n          </md-input-container>\n\n          <md-button type=\"submit\" class=\"md-raised md-primary\">\n            Save\n          </md-button>\n\n          <div v-if=\"error\" style=\"color: red\">\n            {{error}}\n          </div>\n\n        </form>\n\n      </md-layout>\n    </md-whiteframe>\n  </md-layout>\n</template>\n\n<script>\nimport auth from '../modules/auth'\nexport default {\n  name: 'ResetPassword',\n  data () {\n    let tokenId = this.$route.params.tokenId\n    console.log(`> ResetPassword tokenId=${tokenId}`)\n    return {\n      title: 'Reset Password',\n      tokenId,\n      rawPassword: '',\n      rawPasswordConfirm: '',\n      error: ''\n    }\n  },\n  methods: {\n    async submit () {\n      this.error = ''\n      let response = await auth.resetPassword(this.tokenId, this.rawPassword)\n      if (response.result) {\n        this.error = 'Password reset'\n      } else {\n        console.log('> ResetPassword.submit fail', response)\n        this.error = response.error.message\n      }\n    }\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/components/ResetPassword.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('md-layout',{attrs:{\"md-align\":\"center\"}},[_c('md-whiteframe',{staticStyle:{\"margin-top\":\"4em\",\"padding\":\"3em\"}},[_c('md-layout',{attrs:{\"md-flex\":\"50\",\"md-align\":\"center\",\"md-column\":\"\"}},[_c('h2',{staticClass:\"md-display-2\"},[_vm._v(\"\\n        \"+_vm._s(_vm.title)+\"\\n      \")]),_vm._v(\" \"),_c('form',{on:{\"submit\":function($event){$event.preventDefault();return _vm.submit($event)}}},[_c('md-input-container',[_c('label',[_vm._v(\"New Password\")]),_vm._v(\" \"),_c('md-input',{attrs:{\"type\":\"password\",\"placeholder\":\"New Password\"},model:{value:(_vm.rawPassword),callback:function ($$v) {_vm.rawPassword=$$v},expression:\"rawPassword\"}})],1),_vm._v(\" \"),_c('md-input-container',[_c('label',[_vm._v(\"Confirm Password\")]),_vm._v(\" \"),_c('md-input',{attrs:{\"type\":\"password\",\"placeholder\":\"Confirm Password\"},model:{value:(_vm.rawPasswordConfirm),callback:function ($$v) {_vm.rawPasswordConfirm=$$v},expression:\"rawPasswordConfirm\"}})],1),_vm._v(\" \"),_c('md-button',{staticClass:\"md-raised md-primary\",attrs:{\"type\":\"submit\"}},[_vm._v(\"\\n          Save\\n        \")]),_vm._v(\" \"),(_vm.error)?_c('div',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"\\n          \"+_vm._s(_vm.error)+\"\\n        \")]):_vm._e()],1)])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-225924c4\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/ResetPassword.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ResetPassword.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./ResetPassword.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-225924c4\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./ResetPassword.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/ResetPassword.vue\n// module id = null\n// module chunks = ","<template>\n  <form method=\"POST\" action=\"http://localhost:8081/api/nobleGasBindings/search\" @submit.prevent=\"search\" class=\"v-layout\">\n    <v-card class=\"v-layout-item v-elevation-3\">\n      <v-toolbar>\n        <v-toolbar-title>Query</v-toolbar-title>\n      </v-toolbar>\n      <v-card-text>\n        <v-container fluid grid-list-xl>\n        <v-layout  row wrap>\n          <v-flex class=\" xs12 sm6 md3\">\n            <v-text-field\n              v-model=\"searchQuery.pdb\"\n              label=\"PDB\"\n              :error-messages=\"errors.collect('pdb')\"\n              v-validate=\"'max:4'\"\n              data-vv-name=\"pdb\"\n            ></v-text-field>\n            <v-subheader>N Atoms</v-subheader>\n              <v-text-field\n                v-model=\"searchQuery.min_n_atoms\"\n                label=\"Min\"\n                :error-messages=\"errors.collect('min_n_atoms')\"\n                v-validate=\"'numeric'\"\n                data-vv-name=\"min_n_atoms\"\n            ></v-text-field>\n              <v-text-field\n                v-model=\"searchQuery.max_n_atoms\"\n                label=\"Max\"\n                :error-messages=\"errors.collect('max_n_atoms')\"\n                v-validate=\"'numeric'\"\n                data-vv-name=\"max_n_atoms\"\n            ></v-text-field>\n          </v-flex>\n          <v-flex class=\"  xs12 sm6 md3\">  \n              <v-subheader>\n                Binding Site\n              </v-subheader>  \n              <v-select\n                label=\"Select\"\n                :items=\"elements\"\n                v-model=\"searchQuery.element\"\n                :error-messages=\"errors.collect('element')\"\n                v-validate=\"''\"\n                data-vv-name=\"element\"\n              >\n              </v-select> \n              <v-subheader>\n                Binding Energy (kcal/mol)          \n              </v-subheader>\n              <v-text-field\n                v-model=\"searchQuery.min_binding_energy\"\n                label=\"Min\"\n                :error-messages=\"errors.collect('min_binding_energy')\"\n                v-validate=\"'regex:^-?\\\\d*(\\\\.\\\\d+)?$'\"\n                data-vv-name=\"min_binding_energy\"\n              ></v-text-field>\n              <v-text-field\n                v-model=\"searchQuery.max_binding_energy\"\n                label=\"Max\"\n                :error-messages=\"errors.collect('max_binding_energy')\"\n                v-validate=\"'regex:^-?\\\\d*(\\\\.\\\\d+)?$'\"\n                data-vv-name=\"max_binding_energy\"\n              ></v-text-field>\n          </v-flex>\n          <v-flex class=\"  xs12 sm6 md3\"> \n            <v-subheader>Protein</v-subheader>\n            <v-text-field\n              v-model=\"searchQuery.protein_type\"\n              label=\"Type\"\n              :error-messages=\"errors.collect('protein_type')\"\n              v-validate=\"''\"\n              data-vv-name=\"protein_type\"\n            ></v-text-field>\n            <v-text-field\n              v-model=\"searchQuery.protein_description\"\n              label=\"Description\"\n              :error-messages=\"errors.collect('protein_description')\"\n              v-validate=\"''\"\n              data-vv-name=\"protein_description\"\n            ></v-text-field>\n          </v-flex>\n          <v-flex class=\"  xs12 sm6 md3\">\n            <v-subheader>\n              <v-checkbox\n                label=\"Ligand\"\n                v-model=\"searchQuery.has_ligand\"\n                :error-messages=\"errors.collect('has_ligand')\"\n                v-validate=\"''\"\n                data-vv-name=\"has_ligand\"\n              ></v-checkbox>\n            </v-subheader>   \n            <v-text-field\n              v-model=\"searchQuery.ligand\"\n              label=\"Component Id\"\n              :error-messages=\"errors.collect('ligand')\"\n              v-validate=\"'max:3'\"\n              data-vv-name=\"ligand\"\n            ></v-text-field>    \n            <v-text-field\n              v-model=\"searchQuery.ligand_name\"\n              label=\"Name\"\n              :error-messages=\"errors.collect('ligand_name')\"\n              v-validate=\"''\"\n              data-vv-name=\"ligand_name\"\n            ></v-text-field>   \n          </v-flex>\n        </v-layout>\n        <v-btn type=\"submit\" class=\"v-accent\" >SEARCH</v-btn>\n        <v-btn type=\"button\" class=\"v-primary\" @click=\"clearForm\">Cancel</v-btn>\n        </v-container>\n      </v-card-text>\n    </v-card>\n  </form>\n</template>\n<script>\nimport { mapState, mapActions, mapMutations, mapGetters } from 'vuex';\n\nexport default {\n  name: 'search-form',\n  computed: {\n    ...mapGetters([\n      'isWorking',\n      'isSubmitted',\n      'searchQuery',\n      'searchErrors',\n      'elements',\n    ]),\n  },\n  methods: {\n    ...mapMutations(['SET_ISSUBMITTED', 'SET_SEARCHQUERY']),\n    ...mapActions(['search']),\n    clearForm() {\n      this.SET_ISSUBMITTED(false);\n      this.SET_SEARCHQUERY({});\n      this.errors.clear();\n      this.search();\n    },\n  },\n};\n</script>\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/search/search-form.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('form',{staticClass:\"v-layout\",attrs:{\"method\":\"POST\",\"action\":\"http://localhost:8081/api/nobleGasBindings/search\"},on:{\"submit\":function($event){$event.preventDefault();return _vm.search($event)}}},[_c('v-card',{staticClass:\"v-layout-item v-elevation-3\"},[_c('v-toolbar',[_c('v-toolbar-title',[_vm._v(\"Query\")])],1),_vm._v(\" \"),_c('v-card-text',[_c('v-container',{attrs:{\"fluid\":\"\",\"grid-list-xl\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{staticClass:\" xs12 sm6 md3\"},[_c('v-text-field',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('max:4'),expression:\"'max:4'\"}],attrs:{\"label\":\"PDB\",\"error-messages\":_vm.errors.collect('pdb'),\"data-vv-name\":\"pdb\"},model:{value:(_vm.searchQuery.pdb),callback:function ($$v) {_vm.$set(_vm.searchQuery, \"pdb\", $$v)},expression:\"searchQuery.pdb\"}}),_vm._v(\" \"),_c('v-subheader',[_vm._v(\"N Atoms\")]),_vm._v(\" \"),_c('v-text-field',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('numeric'),expression:\"'numeric'\"}],attrs:{\"label\":\"Min\",\"error-messages\":_vm.errors.collect('min_n_atoms'),\"data-vv-name\":\"min_n_atoms\"},model:{value:(_vm.searchQuery.min_n_atoms),callback:function ($$v) {_vm.$set(_vm.searchQuery, \"min_n_atoms\", $$v)},expression:\"searchQuery.min_n_atoms\"}}),_vm._v(\" \"),_c('v-text-field',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('numeric'),expression:\"'numeric'\"}],attrs:{\"label\":\"Max\",\"error-messages\":_vm.errors.collect('max_n_atoms'),\"data-vv-name\":\"max_n_atoms\"},model:{value:(_vm.searchQuery.max_n_atoms),callback:function ($$v) {_vm.$set(_vm.searchQuery, \"max_n_atoms\", $$v)},expression:\"searchQuery.max_n_atoms\"}})],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"  xs12 sm6 md3\"},[_c('v-subheader',[_vm._v(\"\\n              Binding Site\\n            \")]),_vm._v(\" \"),_c('v-select',{directives:[{name:\"validate\",rawName:\"v-validate\",value:(''),expression:\"''\"}],attrs:{\"label\":\"Select\",\"items\":_vm.elements,\"error-messages\":_vm.errors.collect('element'),\"data-vv-name\":\"element\"},model:{value:(_vm.searchQuery.element),callback:function ($$v) {_vm.$set(_vm.searchQuery, \"element\", $$v)},expression:\"searchQuery.element\"}}),_vm._v(\" \"),_c('v-subheader',[_vm._v(\"\\n              Binding Energy (kcal/mol)          \\n            \")]),_vm._v(\" \"),_c('v-text-field',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('regex:^-?\\\\d*(\\\\.\\\\d+)?$'),expression:\"'regex:^-?\\\\\\\\d*(\\\\\\\\.\\\\\\\\d+)?$'\"}],attrs:{\"label\":\"Min\",\"error-messages\":_vm.errors.collect('min_binding_energy'),\"data-vv-name\":\"min_binding_energy\"},model:{value:(_vm.searchQuery.min_binding_energy),callback:function ($$v) {_vm.$set(_vm.searchQuery, \"min_binding_energy\", $$v)},expression:\"searchQuery.min_binding_energy\"}}),_vm._v(\" \"),_c('v-text-field',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('regex:^-?\\\\d*(\\\\.\\\\d+)?$'),expression:\"'regex:^-?\\\\\\\\d*(\\\\\\\\.\\\\\\\\d+)?$'\"}],attrs:{\"label\":\"Max\",\"error-messages\":_vm.errors.collect('max_binding_energy'),\"data-vv-name\":\"max_binding_energy\"},model:{value:(_vm.searchQuery.max_binding_energy),callback:function ($$v) {_vm.$set(_vm.searchQuery, \"max_binding_energy\", $$v)},expression:\"searchQuery.max_binding_energy\"}})],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"  xs12 sm6 md3\"},[_c('v-subheader',[_vm._v(\"Protein\")]),_vm._v(\" \"),_c('v-text-field',{directives:[{name:\"validate\",rawName:\"v-validate\",value:(''),expression:\"''\"}],attrs:{\"label\":\"Type\",\"error-messages\":_vm.errors.collect('protein_type'),\"data-vv-name\":\"protein_type\"},model:{value:(_vm.searchQuery.protein_type),callback:function ($$v) {_vm.$set(_vm.searchQuery, \"protein_type\", $$v)},expression:\"searchQuery.protein_type\"}}),_vm._v(\" \"),_c('v-text-field',{directives:[{name:\"validate\",rawName:\"v-validate\",value:(''),expression:\"''\"}],attrs:{\"label\":\"Description\",\"error-messages\":_vm.errors.collect('protein_description'),\"data-vv-name\":\"protein_description\"},model:{value:(_vm.searchQuery.protein_description),callback:function ($$v) {_vm.$set(_vm.searchQuery, \"protein_description\", $$v)},expression:\"searchQuery.protein_description\"}})],1),_vm._v(\" \"),_c('v-flex',{staticClass:\"  xs12 sm6 md3\"},[_c('v-subheader',[_c('v-checkbox',{directives:[{name:\"validate\",rawName:\"v-validate\",value:(''),expression:\"''\"}],attrs:{\"label\":\"Ligand\",\"error-messages\":_vm.errors.collect('has_ligand'),\"data-vv-name\":\"has_ligand\"},model:{value:(_vm.searchQuery.has_ligand),callback:function ($$v) {_vm.$set(_vm.searchQuery, \"has_ligand\", $$v)},expression:\"searchQuery.has_ligand\"}})],1),_vm._v(\" \"),_c('v-text-field',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('max:3'),expression:\"'max:3'\"}],attrs:{\"label\":\"Component Id\",\"error-messages\":_vm.errors.collect('ligand'),\"data-vv-name\":\"ligand\"},model:{value:(_vm.searchQuery.ligand),callback:function ($$v) {_vm.$set(_vm.searchQuery, \"ligand\", $$v)},expression:\"searchQuery.ligand\"}}),_vm._v(\" \"),_c('v-text-field',{directives:[{name:\"validate\",rawName:\"v-validate\",value:(''),expression:\"''\"}],attrs:{\"label\":\"Name\",\"error-messages\":_vm.errors.collect('ligand_name'),\"data-vv-name\":\"ligand_name\"},model:{value:(_vm.searchQuery.ligand_name),callback:function ($$v) {_vm.$set(_vm.searchQuery, \"ligand_name\", $$v)},expression:\"searchQuery.ligand_name\"}})],1)],1),_vm._v(\" \"),_c('v-btn',{staticClass:\"v-accent\",attrs:{\"type\":\"submit\"}},[_vm._v(\"SEARCH\")]),_vm._v(\" \"),_c('v-btn',{staticClass:\"v-primary\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.clearForm}},[_vm._v(\"Cancel\")])],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2c98c28e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/search/search-form.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2c98c28e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./search-form.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search-form.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search-form.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2c98c28e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./search-form.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2c98c28e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/search/search-form.vue\n// module id = null\n// module chunks = ","<template>\n<div>  \n      <v-card class=\"md-layout-item md-elevation-3\">\n    <v-toolbar>\n        <v-toolbar-title>Results</v-toolbar-title>\n      </v-toolbar>\n\n    <v-card-text>\n    <v-data-table \n      :headers=\"headers\"\n      :items=\"searchResults\"\n      :search=\"search\"\n      :pagination.sync=\"pagination\"\n      :total-items=\"totalResults\"\n      :loading=\"isWorking\"\n      hide-actions\n      class=\"elevation-1\"\n    >\n      <template slot=\"no-data\">\n      <v-alert :value=\"true\" color=\"error\" icon=\"warning\">\n        No matching binding sites found for this search `{{this.searchErrors}}`\n      </v-alert>\n    </template>\n      <template slot=\"items\" slot-scope=\"props\">\n        <td class=\"text-xs-right\">{{ props.item.element }}</td>\n        <td class=\"text-xs-right\"><a :href=\"`/#/view?pdb=${ props.item.pdb }`\">{{ props.item.pdb }}</a></td>\n        <td class=\"text-xs-right\">{{ props.item.n_atoms }}</td>\n        <td class=\"text-xs-right\">{{ props.item.binding_energy }}</td>\n        <td class=\"text-xs-right\">{{ props.item.ligand_name }}</td>\n        <td class=\"text-xs-right\">{{ props.item.ligand }}</td>\n        <td class=\"text-xs-right\">{{ props.item.protein_type }}</td>\n        <td class=\"text-xs-right\">{{ props.item.protein_description }}</td>\n      </template>\n    </v-data-table>\n        <v-layout>\n          <v-flex xs12 sm9 offset-sm3 md6 offset-md6 lg3 offset-lg9>\n            <v-layout>\n            <v-flex xs2 >\n                  <v-select\n                :items=\"pageSizes\"\n                v-model=\"pagination.rowsPerPage\"\n                label=\"Page Size\"\n                single-line\n              ></v-select>\n            </v-flex>\n            <v-flex xs10>\n              <v-pagination v-model=\"pagination.page\" :length=\"pages\" total-visible=\"7\"></v-pagination>\n            </v-flex>\n            </v-layout>\n          </v-flex>\n        </v-layout>\n      </v-card-text>\n    </v-card>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapActions, mapMutations, mapGetters } from 'vuex';\n\nexport default {\n  data() {\n    return {\n      headers: [\n        { text: 'Element', value: 'element' },\n        { text: 'PDB', value: 'pdb' },\n        { text: 'N Atoms', value: 'n_atoms' },\n        { text: 'Binding Energy (kcal/mol)', value: 'binding_energy' },\n        { text: 'Ligand Name', value: 'ligand_name' },\n        { text: 'Ligand Id', value: 'ligand' },\n        { text: 'Type', value: 'protein_type' },\n        { text: 'Description', value: 'protein_description' },\n      ],\n      pageSizes: [5, 10, 25],\n    };\n  },\n  computed: {\n    ...mapGetters([\n      'isWorking',\n      'searchQuery',\n      'searchErrors',\n      'searchResults',\n      'totalResults',\n    ]),\n    pagination: {\n      get() {\n        return this.$store.state.searchPagination;\n      },\n      set(v) {\n        this.$store.commit('SET_SEARCHPAGINATION', v);\n      },\n    },\n    pages() {\n      console.log(this.pagination);\n      return this.pagination.rowsPerPage\n        ? Math.ceil(this.pagination.totalResults / this.pagination.rowsPerPage)\n        : 0;\n    },\n  },\n  methods: {\n    ...mapMutations(['SET_ISSUBMITTED', 'SET_SEARCHPAGINATION']),\n    ...mapActions(['search']),\n    onSort(value) {\n      this.search();\n      return value;\n    },\n  },\n  watch: {\n    pagination: {\n      handler() {\n        this.search();\n      },\n      deep: true,\n    },\n  },\n};\n</script>\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/search/search-list.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('v-card',{staticClass:\"md-layout-item md-elevation-3\"},[_c('v-toolbar',[_c('v-toolbar-title',[_vm._v(\"Results\")])],1),_vm._v(\" \"),_c('v-card-text',[_c('v-data-table',{staticClass:\"elevation-1\",attrs:{\"headers\":_vm.headers,\"items\":_vm.searchResults,\"search\":_vm.search,\"pagination\":_vm.pagination,\"total-items\":_vm.totalResults,\"loading\":_vm.isWorking,\"hide-actions\":\"\"},on:{\"update:pagination\":function($event){_vm.pagination=$event}},scopedSlots:_vm._u([{key:\"items\",fn:function(props){return [_c('td',{staticClass:\"text-xs-right\"},[_vm._v(_vm._s(props.item.element))]),_vm._v(\" \"),_c('td',{staticClass:\"text-xs-right\"},[_c('a',{attrs:{\"href\":(\"/#/view?pdb=\" + (props.item.pdb))}},[_vm._v(_vm._s(props.item.pdb))])]),_vm._v(\" \"),_c('td',{staticClass:\"text-xs-right\"},[_vm._v(_vm._s(props.item.n_atoms))]),_vm._v(\" \"),_c('td',{staticClass:\"text-xs-right\"},[_vm._v(_vm._s(props.item.binding_energy))]),_vm._v(\" \"),_c('td',{staticClass:\"text-xs-right\"},[_vm._v(_vm._s(props.item.ligand_name))]),_vm._v(\" \"),_c('td',{staticClass:\"text-xs-right\"},[_vm._v(_vm._s(props.item.ligand))]),_vm._v(\" \"),_c('td',{staticClass:\"text-xs-right\"},[_vm._v(_vm._s(props.item.protein_type))]),_vm._v(\" \"),_c('td',{staticClass:\"text-xs-right\"},[_vm._v(_vm._s(props.item.protein_description))])]}}])},[_c('template',{slot:\"no-data\"},[_c('v-alert',{attrs:{\"value\":true,\"color\":\"error\",\"icon\":\"warning\"}},[_vm._v(\"\\n        No matching binding sites found for this search `\"+_vm._s(this.searchErrors)+\"`\\n      \")])],1)],2),_vm._v(\" \"),_c('v-layout',[_c('v-flex',{attrs:{\"xs12\":\"\",\"sm9\":\"\",\"offset-sm3\":\"\",\"md6\":\"\",\"offset-md6\":\"\",\"lg3\":\"\",\"offset-lg9\":\"\"}},[_c('v-layout',[_c('v-flex',{attrs:{\"xs2\":\"\"}},[_c('v-select',{attrs:{\"items\":_vm.pageSizes,\"label\":\"Page Size\",\"single-line\":\"\"},model:{value:(_vm.pagination.rowsPerPage),callback:function ($$v) {_vm.$set(_vm.pagination, \"rowsPerPage\", $$v)},expression:\"pagination.rowsPerPage\"}})],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs10\":\"\"}},[_c('v-pagination',{attrs:{\"length\":_vm.pages,\"total-visible\":\"7\"},model:{value:(_vm.pagination.page),callback:function ($$v) {_vm.$set(_vm.pagination, \"page\", $$v)},expression:\"pagination.page\"}})],1)],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-15501fee\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/search/search-list.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-15501fee\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./search-list.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search-list.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search-list.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-15501fee\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./search-list.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-15501fee\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/search/search-list.vue\n// module id = null\n// module chunks = ","<template>\n  <div>\n    <div class=\"v-layout v-gutter v-alignment-top-center\">\n    <div class=\"v-layout-item v-size-95\">\n<search-form></search-form>  \n</div>\n  <div class=\"v-layout-item v-size-95\">\n<search-list></search-list> \n</div>\n</div>\n</div>  \n  </template>\n  \n  <script>\nimport searchForm from '@/components/search/search-form';\nimport searchList from '@/components/search/search-list';\nexport default {\n  components: {\n    'search-form': searchForm,\n    'search-list': searchList,\n  },\n};\n</script>\n  \n  <style scoped>\n\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/tabs/search.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"v-layout v-gutter v-alignment-top-center\"},[_c('div',{staticClass:\"v-layout-item v-size-95\"},[_c('search-form')],1),_vm._v(\" \"),_c('div',{staticClass:\"v-layout-item v-size-95\"},[_c('search-list')],1)])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-33b22a6c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/tabs/search.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-33b22a6c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./search.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./search.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-33b22a6c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./search.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-33b22a6c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tabs/search.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-layout',{staticClass:\"text-xs-left\"},[_c('v-container',{attrs:{\"fluid\":\"\",\"grid-list-xl\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\",\"sm9\":\"\"}},[_c('v-card',[_c('v-toolbar',[_c('v-toolbar-title',[_vm._v(\"About\")])],1),_vm._v(\" \"),_c('v-card-text',[_c('p',[_vm._v(\"\\n      As outlined in the review\\n      \"),_c('a',{attrs:{\"href\":\"https://www.ncbi.nlm.nih.gov/pubmed/26896563\"}},[_vm._v(\"\\n        The diverse biological properties of the chemically inert noble gases (Winkler et al., 2016)\\n      \")]),_vm._v(\" there is a need to explore the possible interactions between the noble gases and proteins in order to provide\\n      viable candidates for clinical study. The drive behind the generation of this data is to provide a starting point\\n      for such exploration.\\n    \")]),_vm._v(\" \"),_c('p',[_vm._v(\"The datasets accessible from this page were created using AutoGrid4 to systematically map the energy of five noble\\n      gas (He, Ne, Ar, Kr, Xe) at all grid locations (in 0.375  steps) in all ~60,000 unique PDB structures filtered by\\n      100% sequence similarity. This retains the highest resolution structure where multiple structures of the same proteins\\n      exist.\\n    \")]),_vm._v(\" \"),_c('p',[_vm._v(\"\\n      Before the grid calculations, the proteins were carefully prepared using an automatic script to remove water and other solvents,\\n      small molecule ligands such as drugs, metal and small inorganic ions except those important for protein function,\\n      and small molecules except cofactors etc. essential for function. Given the very large number of proteins studied,\\n      it was not practical to hand curate each protein. Where structures included small molecular effectors e.g. enzyme\\n      substrates, products, inhibitors, or receptor agonists or antagonists, the proximity of the noble gas binding to\\n      the small molecule ligand binding site is available.\\n    \")]),_vm._v(\" \"),_c('p',[_vm._v(\"\\n      For ease of navigation, each dataset has been divided into high, medium, and low subsets, based on the lowest energy\\n      (kcal/mol) in each map. Thus, structures in the low subset are those where noble gases do not appear to make any\\n      favorable interactions. The probability of productive binding relative to thermal energy is quantified by Natural\\n      information units (Nats) that are related to the Boltzmann distribution. Interactions with larger Nat values and\\n      smaller ligand distances are more likely to be interesting pharmacologically. Clearly, noble gases that bind with\\n      small energies that are comparable to thermal energies will not remain bound for long enough to affect the function\\n      of the protein.\\n    \")]),_vm._v(\" \"),_c('p',[_vm._v(\"\\n      Clicking one of these datasets from the data tab opens the results in a Google Spreadsheet, allowing you to use text search\\n      or sort to find map files of particular interest.\\n    \")]),_vm._v(\" \"),_c('p',[_vm._v(\"\\n      You can see the maps directly, either by clicking on a PDB Id. in the Google Spreadsheets (below), or by typing in a PDB\\n      Id. in the field above. Note that not all PDBs have been mapped. Multiple structures of the same protein are represented\\n      by the structure with the best resolution, some proteins with unusual functions (e.g. binding to DNA or RNA) may\\n      be missing, and a very small percentage of proteins were not processed correctly by the automatic protein preparation\\n      scripts. Protein multimers were not separated into the monomeric species but mapped as the multimer.\\n    \")]),_vm._v(\" \"),_c('p',[_vm._v(\"\\n      The data is displayed using the 3D protein viewer\\n      \"),_c('a',{attrs:{\"href\":\"http://jolecule.appspot.com/\"}},[_vm._v(\"\\n        Jolecule\\n      \")])]),_vm._v(\" \"),_c('p',[_vm._v(\"\\n      Jolecule optimizes a simple but rich interface that focuses on stereochemistry. The focus is on Richardson ribbons that join\\n      with sidechains correctly. Ligands are rendered as balls-and-sticks to allow the stereochemistry to be seen clearly,\\n      as well as arrows that are used to indicate directionality on both protein and DNA chains.\\n    \")]),_vm._v(\" \"),_c('p',[_vm._v(\"Basic controls include:\\n      \"),_c('br'),_vm._v(\" ZOOM: Right-Mouse, or Shift-Left-Mouse, or Pinch-Zoom\\n      \"),_c('br'),_vm._v(\" DISTANCE LABELS: Drag from central atom\\n      \"),_c('br'),_vm._v(\" ATOM LABELS: Double click on central atom\\n      \"),_c('br')]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('p',[_c('img',{attrs:{\"id\":\"jolecule_image\",\"src\":\"/static/assets/group18_jolecule_help.png\",\"alt\":\"About Jolecule\"}})])])],1)],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"xs12\":\"\",\"sm3\":\"\"}},[_c('v-card',[_c('v-toolbar',[_c('v-toolbar-title',[_vm._v(\"API\")])],1),_vm._v(\" \"),_c('v-card-text',[_c('p',[_vm._v(\"\\n    You can directly access specific PDB records using:\"),_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('strong',[_c('a',{attrs:{\"href\":\"/#/view?pdb=2bmm\"}},[_vm._v(\"\\n        /#/view?pdb=2bmm\")])]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\"\\n    Just replace 2bmm with any 4-letter PDB identifier.\"),_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\"\\n\\n    By default, noble gases are shown only in positions that are energetically favourable (i.e., energy cutoff = high).\"),_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('strong',[_c('a',{attrs:{\"href\":\"/#/view?pdb=2bmm&cutoff=high\"}},[_vm._v(\"\\n        /#/view?pdb=2bmm&cutoff=high\")])]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\"The available cutoffs (in kcal/mol) are listed below and may also include any number between -0.5 and -2.0:\"),_c('br'),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('table',{attrs:{\"id\":\"cutoffTable\"}},[_c('tr',[_c('th',[_vm._v(\"cutoff\")]),_vm._v(\" \"),_c('th',[_vm._v(\"He\")]),_vm._v(\" \"),_c('th',[_vm._v(\"Ne\")]),_vm._v(\" \"),_c('th',[_vm._v(\"Ar\")]),_vm._v(\" \"),_c('th',[_vm._v(\"Kr\")]),_vm._v(\" \"),_c('th',[_vm._v(\"Xe\")])]),_vm._v(\" \"),_c('tr',[_c('th',[_c('a',{attrs:{\"href\":\"/#/view?pdb=2bmm&cutoff=veryHigh\"}},[_vm._v(\"veryHigh\")])]),_vm._v(\" \"),_c('td',[_vm._v(\"-0.6\")]),_vm._v(\" \"),_c('td',[_vm._v(\"-0.6\")]),_vm._v(\" \"),_c('td',[_vm._v(\"-1.2\")]),_vm._v(\" \"),_c('td',[_vm._v(\"-1.2\")]),_vm._v(\" \"),_c('td',[_vm._v(\"-1.5\")]),_vm._v(\" \"),_c('td')]),_vm._v(\" \"),_c('tr',[_c('th',[_c('a',{attrs:{\"href\":\"/#/view?pdb=2bmm&cutoff=high\"}},[_vm._v(\"high\")])]),_vm._v(\" \"),_c('td',[_vm._v(\"-0.4\")]),_vm._v(\" \"),_c('td',[_vm._v(\"-0.4\")]),_vm._v(\" \"),_c('td',[_vm._v(\"-0.9\")]),_vm._v(\" \"),_c('td',[_vm._v(\"-0.9\")]),_vm._v(\" \"),_c('td',[_vm._v(\"-1.3\")]),_vm._v(\" \"),_c('td')]),_vm._v(\" \"),_c('tr',[_c('th',[_c('a',{attrs:{\"href\":\"/#/view?pdb=2bmm&cutoff=medium\"}},[_vm._v(\"medium\")])]),_vm._v(\" \"),_c('td',[_vm._v(\"-0.3\")]),_vm._v(\" \"),_c('td',[_vm._v(\"-0.3\")]),_vm._v(\" \"),_c('td',[_vm._v(\"-0.8\")]),_vm._v(\" \"),_c('td',[_vm._v(\"-0.8\")]),_vm._v(\" \"),_c('td',[_vm._v(\"-1.2\")]),_vm._v(\" \"),_c('td')]),_vm._v(\" \"),_c('tr',[_c('th',[_c('a',{attrs:{\"href\":\"/#/view?pdb=2bmm&cutoff=low\"}},[_vm._v(\"low\")])]),_vm._v(\" \"),_c('td',[_vm._v(\"-0.3\")]),_vm._v(\" \"),_c('td',[_vm._v(\"-0.3\")]),_vm._v(\" \"),_c('td',[_vm._v(\"-0.6\")]),_vm._v(\" \"),_c('td',[_vm._v(\"-0.6\")]),_vm._v(\" \"),_c('td',[_vm._v(\"-0.8\")]),_vm._v(\" \"),_c('td')]),_vm._v(\" \"),_c('tr',[_c('th',[_c('a',{attrs:{\"href\":\"/#/view?pdb=2bmm&cutoff=-0.9\"}},[_vm._v(\"-0.9\")])]),_vm._v(\" \"),_c('td',[_vm._v(\"-0.9\")]),_vm._v(\" \"),_c('td',[_vm._v(\"-0.9\")]),_vm._v(\" \"),_c('td',[_vm._v(\"-0.9\")]),_vm._v(\" \"),_c('td',[_vm._v(\"-0.9\")]),_vm._v(\" \"),_c('td',[_vm._v(\"-0.9\")]),_vm._v(\" \"),_c('td')]),_vm._v(\" \"),_c('tr',[_c('th',[_c('a',{attrs:{\"href\":\"/#/view?pdb=2bmm&cutoff=-1.2\"}},[_vm._v(\"-1.2\")])]),_vm._v(\" \"),_c('td',[_vm._v(\"-1.2\")]),_vm._v(\" \"),_c('td',[_vm._v(\"-1.2\")]),_vm._v(\" \"),_c('td',[_vm._v(\"-1.2\")]),_vm._v(\" \"),_c('td',[_vm._v(\"-1.2\")]),_vm._v(\" \"),_c('td',[_vm._v(\"-1.2 \")])]),_vm._v(\" \"),_c('tr',[_c('th',{staticStyle:{\"text-align\":\"right\"},attrs:{\"colspan\":\"6\"}},[_c('i',[_vm._v(\"etc...\")])])])])]),_c('div',{staticClass:\"date_published\"},[_vm._v(\"May 17, 2017\")])])],1),_vm._v(\" \"),_c('v-card',{staticClass:\"panel body-side\",attrs:{\"id\":\"contact\",\"name\":\"contact\"}},[_c('v-toolbar',[_c('v-toolbar-title',[_vm._v(\"Contacts\")])],1),_vm._v(\" \"),_c('v-card-text',[_c('table',{attrs:{\"id\":\"contact-table\"}},[_c('tr',[_c('th',{attrs:{\"colspan\":\"2\"}},[_vm._v(\"Re: datasets\")])]),_vm._v(\" \"),_c('tr',[_c('td',[_vm._v(\"Name:\")]),_vm._v(\" \"),_c('td',[_vm._v(\"Mr Aaron Thornton\")])]),_vm._v(\" \"),_c('tr',[_c('td',[_vm._v(\"Position:\")]),_vm._v(\" \"),_c('td',[_vm._v(\"Senior Research Scientist, Manufacturing\")])]),_vm._v(\" \"),_c('tr',[_c('td',[_vm._v(\"Email:\")]),_vm._v(\" \"),_c('td')]),_vm._v(\" \"),_c('tr',[_c('td',{attrs:{\"colspan\":\"2\"}})]),_vm._v(\" \"),_c('tr',[_c('th',{attrs:{\"colspan\":\"2\"}},[_vm._v(\"Re: visualisation\")])]),_vm._v(\" \"),_c('tr',[_c('td',[_vm._v(\"Name:\")]),_vm._v(\" \"),_c('td',[_vm._v(\"Prof Sean O'Donoghue\")])]),_vm._v(\" \"),_c('tr',[_c('td',[_vm._v(\"Position:\")]),_vm._v(\" \"),_c('td',[_vm._v(\"Team Leader, Data61\")])]),_vm._v(\" \"),_c('tr',[_c('td',[_vm._v(\"Email:\")]),_vm._v(\" \"),_c('td')])])])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b5ea3bd8\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/tabs/home.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nvar __vue_script__ = null\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b5ea3bd8\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./home.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tabs/home.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"height\":\"85%\"}},[_c('v-container',{attrs:{\"grid-list-xl\":\"\"}},[_c('v-layout',{attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"sm8\":\"\"}},[_c('v-select',{directives:[{name:\"validate\",rawName:\"v-validate\",value:(''),expression:\"''\"}],attrs:{\"combobox\":\"\",\"label\":\"Query\",\"items\":_vm.querySelectItems,\"filter\":_vm.customFilter,\"error-messages\":_vm.errors.collect('query'),\"hint\":\"Space separated list of search terms. eg oxygen 1000:1200\",\"persistent-hint\":\"\",\"data-vv-name\":\"query\",\"loading\":_vm.isWorking,\"item-text\":\"text\",\"item-value\":\"value\",\"return-object\":\"\",\"search-input\":_vm.search},on:{\"update:searchInput\":function($event){_vm.search=$event}},model:{value:(_vm.query),callback:function ($$v) {_vm.query=$$v},expression:\"query\"}})],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"sm2\":\"\"}},[_c('v-select',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('length:4'),expression:\"'length:4'\"}],attrs:{\"label\":\"PDB\",\"items\":_vm.pdbSelectItems,\"error-messages\":_vm.errors.collect('pdb'),\"data-vv-name\":\"pdb\",\"cache-items\":\"\",\"required\":\"\"},model:{value:(_vm.pdb),callback:function ($$v) {_vm.pdb=$$v},expression:\"pdb\"}})],1),_vm._v(\" \"),_c('v-flex',{attrs:{\"sm2\":\"\"}},[_c('v-select',{directives:[{name:\"validate\",rawName:\"v-validate\",value:('isValidEnergyCutOffSet'),expression:\"'isValidEnergyCutOffSet'\"}],attrs:{\"combobox\":\"\",\"cache-items\":\"\",\"label\":\"Energy Cutoff Set\",\"items\":_vm.localEnergyCutoffSets,\"error-messages\":_vm.errors.collect('energyCutoffSet'),\"data-vv-name\":\"energyCutoffSet\"},model:{value:(_vm.energyCutoffSet),callback:function ($$v) {_vm.energyCutoffSet=$$v},expression:\"energyCutoffSet\"}})],1)],1)],1),_vm._v(\" \"),_c('v-layout',{staticStyle:{\"height\":\"100%\"},attrs:{\"row\":\"\",\"wrap\":\"\"}},[_c('v-flex',{attrs:{\"xs12\":\"\"}},[_c('div',{staticStyle:{\"height\":\"100%\"},attrs:{\"id\":\"jolecule\"}})])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1a6e2fbc\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/tabs/view.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1a6e2fbc\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./view.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./view.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./view.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1a6e2fbc\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./view.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1a6e2fbc\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/tabs/view.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Router from 'vue-router'\n\nimport Login from './components/Login'\nimport Register from './components/Register'\nimport EditUser from './components/EditUser'\nimport AdminUsers from './components/AdminUsers'\nimport ResetPassword from './components/ResetPassword'\nimport search from '@/components/tabs/search'\nimport home from '@/components/tabs/home'\nimport view from '@/components/tabs/view'\n\nVue.use(Router)\n\nlet router = new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'home',\n      component: home\n    },\n    {\n      path: '/login',\n      name: 'login',\n      component: Login\n    },\n    {\n      path: '/register',\n      name: 'register',\n      component: Register\n    },\n    {\n      path: '/edit-user',\n      name: 'editUser',\n      component: EditUser\n    },\n    {\n      path: '/admin-users',\n      name: 'adminUsers',\n      component: AdminUsers\n    },\n    {\n      path: '/reset-password/:tokenId',\n      name: 'resetPassword',\n      component: ResetPassword\n    },\n    {\n      path: '/Search',\n      name: 'search',\n      component: search\n    },\n    {\n      path: '/View',\n      name: 'view',\n      component: view\n    }\n  ]\n})\n\nexport default router\n\n\n\n// WEBPACK FOOTER //\n// ./src/router.js","/**\n * @fileoverview Main entry point of the Vue app\n */\n\nimport Vue from 'vue';\nimport Vuetify from 'vuetify';\n\nimport config from './config.js'\nimport auth from './modules/auth'\nimport App from './App'\nimport router from './router.js'\nimport store from './store'\n\nVue.config.productionTip = false\n\nVue.use(Vuetify);\n\ndocument.title = config.title\n\nasync function init () {\n  if (config.isUser) {\n    await auth.restoreLastUser()\n  }\n  return new Vue({\n    el: '#app',\n    router,\n    store,\n    template: '<App/>',\n    components: {App}\n  })\n}\n\ninit()\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","/**\n * This is a separate file to allow multiple jolecule\n * widgets to be animated in the same global event loop.\n * the interface to a widget is:\n *\n * class Widget {\n *   animate() {}\n *   isChanged: boolean\n *   draw() {}\n * }\n *\n * Global storage\n * - window.globalWidgets\n * - window.lastTime\n */\n\nvar MS_PER_STEP = 25\n\nfunction loop () {\n  requestAnimationFrame(loop)\n\n  if (window.globalWidgets === []) {\n    return\n  }\n  var currTime = (new Date()).getTime()\n  var elapsedTime = currTime - window.lastTime\n  var nStep = (elapsedTime) / MS_PER_STEP\n  if (nStep < 1) {\n    nStep = 1\n  }\n  nStep = Math.floor(nStep)\n\n  for (let i = 0; i < nStep; i++) {\n    for (let widget of window.globalWidgets) {\n      widget.animate()\n    }\n  }\n\n  for (let widget of window.globalWidgets) {\n    if (widget.isChanged()) {\n      widget.draw()\n    }\n  }\n\n  window.lastTime = currTime\n}\n\n/**\n * run loop() as a singleton by using the global\n * window space to lock one single copy of loop\n */\nfunction registerGlobalAnimationLoop (widget) {\n  if (typeof window.globalWidgets === 'undefined') {\n    window.globalWidgets = []\n    loop()\n    window.lastTime = (new Date()).getTime()\n  }\n  window.globalWidgets.push(widget)\n}\n\nexport { registerGlobalAnimationLoop }\n\n\n\n// WEBPACK FOOTER //\n// ./src/jolecule/animation.js","\n/**\n *\n * v3.js - is a simple function based wrapper library around the vector\n * portion of THREE.js. THREE.Vector3 are created and manipulated using\n * factory functions, which was the original approach used in a deprecated\n * vector library. This was replaced with the fully-featured vector library\n * in THREE.js\n *\n */\n\nimport * as THREE from 'three'\n\nconst SMALL = 1E-6\n\nfunction isNearZero (a) {\n  return Math.abs(a) < SMALL\n}\n\nfunction create (x, y, z) {\n  return new THREE.Vector3(x, y, z)\n}\n\nfunction clone (v) {\n  return v.clone()\n}\n\nfunction scaled (v, s) {\n  let w = create(v.x, v.y, v.z)\n  w.multiplyScalar(s)\n  return w\n}\n\nfunction normalized (v) {\n  return scaled(v, 1.0 / v.length())\n}\n\nfunction diff (b, a) {\n  return create(b.x - a.x, b.y - a.y, b.z - a.z)\n}\n\nfunction sum (a, b) {\n  return create(b.x + a.x, b.y + a.y, b.z + a.z)\n}\n\nfunction parallel (v, axis) {\n  let axisLen = axis.length()\n  let result\n  if (isNearZero(axisLen)) {\n    result = create(v.x, v.y, v.z)\n  } else {\n    let scale = dotProduct(v, axis) / axisLen / axisLen\n    result = scaled(axis, scale)\n  }\n  return result\n}\n\nfunction perpendicular (v, axis) {\n  return diff(v, parallel(v, axis))\n}\n\nfunction crossProduct (a, b) {\n  return new THREE.Vector3().crossVectors(a, b)\n}\n\nfunction dotProduct (a, b) {\n  return a.x * b.x + a.y * b.y + a.z * b.z\n}\n\nfunction distance (p1, p2) {\n  return diff(p1, p2).length()\n}\n\nfunction angle (a, b) {\n  let aLen = a.length()\n  let bLen = b.length()\n  if (isNearZero(aLen * bLen)) {\n    return 0.0\n  }\n  let c = dotProduct(a, b) / aLen / bLen\n  if (c >= 1.0) {\n    return 0.0\n  }\n  if (c < -1.0) {\n    return Math.PI\n  }\n  return Math.acos(c)\n}\n\nfunction dihedral (ref, axis, v) {\n  // + values: right-hand screw rotation of v\n  //           around axis relative to ref\n  let refPerp = perpendicular(ref, axis)\n  let vPerp = perpendicular(v, axis)\n  let a = angle(refPerp, vPerp)\n  let cross = crossProduct(refPerp, vPerp)\n  if (dotProduct(cross, axis) > 0) {\n    a = -a\n  }\n  return a\n}\n\nfunction midPoint (p, q) {\n  let s = sum(p, q)\n  return scaled(s, 0.5)\n}\n\nfunction random () {\n  return create(\n    Math.random(), Math.random(), Math.random())\n}\n\nfunction isEqual (v, w) {\n  if (!isNearZero(v.x - w.x)) {\n    return false\n  } else if (!isNearZero(v.y - w.y)) {\n    return false\n  } else if (!isNearZero(v.y - w.y)) {\n    return false\n  }\n  return true\n}\n\nfunction isAligned (v, w) {\n  return isNearZero(angle(v, w))\n}\n\nlet Matrix4 = THREE.Matrix4\n\nfunction matrixProduct (lhs, rhs) {\n  let c = new Matrix4()\n  c.multiplyMatrices(lhs, rhs)\n  return c\n}\n\nfunction rotation (axis, theta) {\n  let a = axis.clone().normalize()\n  return new Matrix4().makeRotationAxis(a, theta)\n}\n\nfunction translation (p) {\n  let c = new Matrix4()\n  return c.makeTranslation(p.x, p.y, p.z)\n}\n\nfunction degToRad (deg) {\n  return deg * Math.PI / 180.0\n}\n\nexport default {\n  SMALL,\n  isNearZero,\n  create,\n  clone,\n  scaled,\n  normalized,\n  diff,\n  sum,\n  parallel,\n  perpendicular,\n  crossProduct,\n  dotProduct,\n  distance,\n  angle,\n  dihedral,\n  midPoint,\n  random,\n  isEqual,\n  isAligned,\n  Matrix4,\n  matrixProduct,\n  rotation,\n  translation,\n  degToRad\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/jolecule/v3.js","/**\n *\n * Utility functions mainly to do with HTML elements\n * that can be deferred to functions\n *\n */\n\nimport $ from 'jquery'\nimport _ from 'lodash'\n\nfunction exists (x) {\n  return !(_.isUndefined(x)) && (x !== null)\n}\n\nfunction extendArray (array, extension) {\n  for (let elem of extension) {\n    array.push(elem)\n  }\n}\n\nfunction getWindowUrl () {\n  return '' + window.location\n}\n\nfunction linkButton (idTag, text, classTag, callback) {\n  let item =\n    $('<a>')\n      .attr('id', idTag)\n      .attr('href', '')\n      .html(text)\n\n  if (classTag) {\n    item.addClass(classTag)\n  }\n\n  if (callback) {\n    item.on(' click touch ',\n      function (e) {\n        e.preventDefault()\n        callback()\n      }\n    )\n  }\n\n  return item\n}\n\nfunction toggleButton (idTag, text, classTag, getToggleFn, setToggleFn, onColor) {\n  let item =\n    $('<a>')\n      .attr('id', idTag)\n      .attr('href', '')\n      .html(text)\n\n  function color () {\n    if (getToggleFn()) {\n      if (onColor) {\n        item.css('background-color', onColor)\n      } else {\n        item.addClass('jolecule-button-toggle-on')\n      }\n    } else {\n      if (onColor) {\n        item.css('background-color', '')\n      } else {\n        item.removeClass('jolecule-button-toggle-on')\n      }\n    }\n  }\n\n  if (classTag) {\n    item.addClass(classTag)\n  }\n\n  item.click(\n    function (e) {\n      e.preventDefault()\n      setToggleFn(!getToggleFn())\n      color()\n      return false\n    }\n  )\n\n  item.redraw = color\n\n  color()\n\n  return item\n}\n\nfunction stickJqueryDivInTopLeft (parent, target, xOffset, yOffset) {\n  target.css({\n    'position': 'absolute',\n    'z-index': '9000'\n  })\n  let top = parent.position().top\n  let left = parent.position().left\n  parent.append(target)\n  target.css({\n    'top': top + yOffset,\n    'left': left + xOffset\n  })\n}\n\nfunction stickJqueryDivInCenter (parent, target, xOffset, yOffset) {\n  target.css({\n    'position': 'absolute',\n    'z-index': '9000'\n  })\n  let top = parent.position().top\n  let left = parent.position().left\n  let widthParent = parent.outerWidth()\n  let heightParent = parent.outerHeight()\n  parent.prepend(target)\n  let widthTarget = target.outerWidth()\n  let heightTarget = target.outerHeight()\n  target.css({\n    'top': top + heightParent / 2 - heightTarget / 2 - yOffset,\n    'left': left + widthParent / 2 - widthTarget / 2 - xOffset\n  })\n}\n\nfunction inArray (v, aList) {\n  return aList.indexOf(v) >= 0\n}\n\nfunction randomString (nChar) {\n  let chars =\n    '0123456789abcdefghiklmnopqrstuvwxyz'\n  let s = ''\n  for (let i = 0; i < nChar; i++) {\n    let j = Math.floor(Math.random() * chars.length)\n    s += chars.substring(j, j + 1)\n  }\n  return s\n}\n\nfunction randomId () {\n  return 'view:' + randomString(6)\n}\n\nfunction getCurrentDateStr () {\n  let now = new Date()\n  let month = now.getMonth() + 1\n  let day = now.getDate()\n  let year = now.getFullYear()\n  return day + '/' + month + '/' + year\n}\n\nfunction textEntryDialog (parentDiv, label, callback) {\n  if (!label) {\n    label = ''\n  }\n\n  window.keyboard_lock = true\n\n  function cleanup () {\n    dialog.remove()\n    window.keyboard_lock = false\n  }\n\n  function accept () {\n    callback(textarea.val())\n    cleanup()\n    window.keyboard_lock = false\n  }\n\n  function discard () {\n    cleanup()\n    window.keyboard_lock = false\n  }\n\n  let saveButton = linkButton(\n    'okay', 'okay', 'jolecule-small-button', accept)\n\n  let discardButton = linkButton(\n    'discard', 'discard', 'jolecule-small-button', discard)\n\n  let textarea = $('<textarea>')\n    .css('width', '100%')\n    .addClass('jolecule-view-text')\n    .keydown(\n      function (e) {\n        if (e.keyCode === 27) {\n          discard()\n          return true\n        }\n      })\n\n  let editbox = $('<div>')\n    .css('width', '100%')\n    .append(label)\n    .append(textarea)\n    .append(saveButton)\n    .append(' ')\n    .append(discardButton)\n\n  let dialog = $('<div>')\n    .addClass('jolecule-dialog')\n    .css('display', 'block')\n    .css('z-index', '2000')\n    .css('width', Math.min(400, parentDiv.width() - 100))\n    .append(editbox)\n\n  stickJqueryDivInCenter(parentDiv, dialog, 0, 70)\n\n  setTimeout(() => {\n    editbox.find('textarea').focus()\n  }, 100)\n}\n\nfunction delay (timeMs) {\n  return new Promise(resolve => { setTimeout(resolve, timeMs) })\n}\n\nexport {\n  exists,\n  extendArray,\n  getWindowUrl,\n  linkButton,\n  toggleButton,\n  stickJqueryDivInCenter,\n  stickJqueryDivInTopLeft,\n  inArray,\n  randomId,\n  getCurrentDateStr,\n  textEntryDialog,\n  delay\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/jolecule/util.js","/**\n * Custom geometry and mesh generators based on the\n * THREE.js library.\n *\n * In particular, there is a Ribbon class which is an\n * extrusion where the normal and tangents are specified.\n *\n */\n\nimport * as THREE from 'three'\nimport v3 from './v3'\nimport _ from 'lodash'\n\nfunction CatmullRom (t, p0, p1, p2, p3) {\n  let v0 = (p2 - p0) * 0.5\n  let v1 = (p3 - p1) * 0.5\n  let t2 = t * t\n  let t3 = t * t2\n  return (2 * p1 - 2 * p2 + v0 + v1) * t3 +\n    (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 +\n    v0 * t +\n    p1\n}\n\n/**\n * Interpolation function for a Catmul-Rom spline\n * in 3D space, where the 4 guide-points are given\n * and an interpolation parameter is given.\n *\n * @param {Number} t - interpolation from [0, 1]\n * @param {THREE.Vector3} p1\n * @param {THREE.Vector3} p2\n * @param {THREE.Vector3} p3\n * @param {THREE.Vector3} p4\n * @returns {THREE.Vector3} the interpolated point\n */\nfunction catmulRomSpline (t, p1, p2, p3, p4) {\n  return v3.create(\n    CatmullRom(t, p1.x, p2.x, p3.x, p4.x),\n    CatmullRom(t, p1.y, p2.y, p3.y, p4.y),\n    CatmullRom(t, p1.z, p2.z, p3.z, p4.z)\n  )\n}\n\n/**\n * Create a path for extrusion where the direction of the\n * normal and binormal is defined, as well as the tangent.\n *\n * In particular, the path provides a slice() function\n * that produces a sub-portion of the path.\n */\nclass PathAndFrenetFrames {\n  constructor () {\n    this.points = []\n    this.normals = []\n    this.tangents = []\n    this.binormals = []\n  }\n\n  slice (i, j) {\n    let subPath = new PathAndFrenetFrames()\n    subPath.points = this.points.slice(i, j)\n    subPath.normals = this.normals.slice(i, j)\n    subPath.tangents = this.tangents.slice(i, j)\n    subPath.binormals = this.binormals.slice(i, j)\n    return subPath\n  }\n}\n\n/**\n * Extrusion along a path that aligns a 2D shape as cross-section, with\n * orientation along the normal for the cross-section.\n *\n * Accepts a cross-section shape, which is a collection of 2D points around\n * the origin, and a path, which contains points, normals and binormals\n * and builds a oriented extrusion out of it.\n *\n * If round is set, then the vertex normals are set to orient along the\n * normal/binormal axis from the origin, otherwise, face normals are defined\n * perpedicular to the face.\n *\n * For a segment between two path points and a repetition of the cross-section,\n * two triangles are defined.\n */\nclass RibbonGeometry extends THREE.Geometry {\n  /**\n   * @param {THREE.Shape} shape - collection of 2D points for cross section\n   * @param {PathAndFrenetFrames} path - collection of points, normals, and binormals\n   * @param {boolean} round - normals are draw from centre, otherwise perp to edge\n   * @param {boolean} front - draw front cross-section\n   * @param {boolean} back - draw back cross-section\n   */\n  constructor (shape, path, round, front, back) {\n    super()\n\n    this.type = 'RibbonGeometry'\n\n    this.parameters = {\n      shape: shape,\n      path: path,\n      round: round\n    }\n\n    if (path.points.length < 2) {\n      return\n    }\n\n    let shapePoints = shape.extractPoints(4).shape\n    let nVertex = shapePoints.length\n\n    if (_.isUndefined(round)) {\n      round = false\n    }\n\n    let shapeEdgeNormals = []\n\n    if (!round) {\n      for (let j = 0; j < nVertex; j += 1) {\n        let i = j - 1\n        if (i === -1) {\n          i = nVertex - 1\n        }\n        let v0 = shapePoints[i]\n        let v1 = shapePoints[j]\n        let x = -(v1.y - v0.y)\n        let y = v1.x - v0.x\n        shapeEdgeNormals.push(new THREE.Vector2(x, y))\n      }\n    }\n\n    for (let iPoint = 0; iPoint < path.points.length; iPoint += 1) {\n      let point = path.points[iPoint]\n      let normal = path.normals[iPoint]\n      let binormal = path.binormals[iPoint]\n\n      for (let iShapePoint = 0; iShapePoint < nVertex; iShapePoint += 1) {\n        let shapePoint = shapePoints[iShapePoint]\n\n        let x = normal.clone().multiplyScalar(shapePoint.x)\n        let y = binormal.clone().multiplyScalar(shapePoint.y)\n\n        let vertex = point.clone().add(x).add(y)\n\n        this.vertices.push(vertex)\n      }\n\n      let topOffset = this.vertices.length - 2 * nVertex\n      if (topOffset < 0) {\n        continue\n      }\n\n      if (round) {\n        // Smoothed normals to give a rounded look\n        for (let j = 0; j < nVertex; j += 1) {\n          let i\n          if (j === 0) {\n            i = nVertex - 1\n          } else {\n            i = j - 1\n          }\n          let k = topOffset + i\n          let l = topOffset + j\n\n          let x, y\n\n          x = path.normals[iPoint - 1].clone()\n            .multiplyScalar(shapePoints[i].x)\n          y = path.binormals[iPoint - 1].clone()\n            .multiplyScalar(shapePoints[i].y)\n          let normal00 = x.add(y)\n\n          x = path.normals[iPoint - 1].clone()\n            .multiplyScalar(shapePoints[j].x)\n          y = path.binormals[iPoint - 1].clone()\n            .multiplyScalar(shapePoints[j].y)\n          let normal01 = x.add(y)\n\n          x = path.normals[iPoint].clone()\n            .multiplyScalar(shapePoints[j].x)\n          y = path.binormals[iPoint].clone()\n            .multiplyScalar(shapePoints[j].y)\n          let normal11 = x.add(y)\n\n          x = path.normals[iPoint].clone()\n            .multiplyScalar(shapePoints[i].x)\n          y = path.binormals[iPoint].clone()\n            .multiplyScalar(shapePoints[i].y)\n          let normal10 = x.add(y)\n\n          let face = new THREE.Face3(k, k + nVertex, l + nVertex)\n          face.vertexNormals = [normal00, normal10, normal11]\n          this.faces.push(face)\n\n          face = new THREE.Face3(k, l + nVertex, l)\n          face.vertexNormals = [normal00, normal11, normal01]\n          this.faces.push(face)\n        }\n      } else {\n        // Continuous normals but keep faces distinct\n        // along ribbon\n        for (let j = 0; j < nVertex; j += 1) {\n          let i\n          if (j === 0) {\n            i = nVertex - 1\n          } else {\n            i = j - 1\n          }\n          let k = topOffset + i\n          let l = topOffset + j\n\n          let x, y\n\n          x = path.normals[iPoint - 1].clone()\n            .multiplyScalar(shapeEdgeNormals[j].x)\n          y = path.binormals[iPoint - 1].clone()\n            .multiplyScalar(shapeEdgeNormals[j].y)\n          let normal0 = x.add(y)\n\n          x = path.normals[iPoint].clone()\n            .multiplyScalar(shapeEdgeNormals[j].x)\n          y = path.binormals[iPoint].clone()\n            .multiplyScalar(shapeEdgeNormals[j].y)\n          let normal1 = x.add(y)\n\n          let face = new THREE.Face3(k, k + nVertex, l +\n            nVertex)\n          face.vertexNormals = [normal0, normal1, normal1]\n          this.faces.push(face)\n\n          face = new THREE.Face3(k, l + nVertex, l)\n          face.vertexNormals = [normal0, normal1, normal0]\n          this.faces.push(face)\n        }\n      }\n    }\n\n    if (front) {\n      // Draw front face\n      let normal = threePointNormal([\n        this.vertices[0],\n        this.vertices[1],\n        this.vertices[2]\n      ])\n      for (let i = 0; i < nVertex - 2; i += 1) {\n        let face = new THREE.Face3(i, i + 1, nVertex - 1)\n        face.normal.copy(normal)\n        this.faces.push(face)\n      }\n    }\n\n    if (back) {\n      // draw back face\n      let offset = this.vertices.length - 1 - nVertex\n\n      let normal = threePointNormal([\n        this.vertices[offset],\n        this.vertices[offset + nVertex - 1],\n        this.vertices[offset + 1]\n      ])\n\n      for (let i = 0; i < nVertex - 2; i += 1) {\n        let face = new THREE.Face3(\n          offset + i, offset + nVertex - 1, offset + i + 1)\n        face.normal.copy(normal)\n        this.faces.push(face)\n      }\n    }\n  }\n}\n\n/**\n * Extrusion along a path that aligns a 2D shape as cross-section, with\n * orientation along the normal for the cross-section.\n *\n * Accepts a cross-section shape, which is a collection of 2D points around\n * the origin, and a path, which contains points, normals and binormals\n * and builds a oriented extrusion out of it.\n *\n * If round is set, then the vertex normals are set to orient along the\n * normal/binormal axis from the origin, otherwise, face normals are defined\n * perpedicular to the face.\n *\n * For a segment between two path points and a repetition of the cross-section,\n * two triangles are defined.\n */\nclass BufferRibbonGeometry extends THREE.BufferGeometry {\n  /**\n   * @param {THREE.Shape} shape - collection of 2D points for cross section\n   * @param {PathAndFrenetFrames} path - collection of points, normals, and binormals\n   * @param {boolean} round - normals are draw from centre, otherwise perp to edge\n   * @param {boolean} front - draw front cross-section\n   * @param {boolean} back - draw back cross-section\n   */\n  constructor (traces, shape, round, front, back) {\n    super()\n\n    this.type = 'BufferRibbonGeometry'\n\n    if (_.isUndefined(round)) {\n      round = false\n    }\n\n    this.parameters = {\n      shape: shape,\n      traces: traces,\n      round: round,\n      front: front,\n      back: back\n    }\n\n    this.shapePoints = shape.extractPoints(4).shape\n    this.nShape = this.shapePoints.length\n\n    this.nVertex = 0\n    this.nFace = 0\n\n    this.countVertexAndFacesOfPath(front, back)\n    this.setAttributes()\n\n    for (let iPath of _.range(this.paths.length)) {\n      this.setPath(iPath, front, back)\n    }\n\n    console.log('BufferRibbonGeometry vertices', this.nVertex, this.positionCount / 3)\n    console.log('BufferRibbonGeometry faces', this.nFace, this.indexCount / 3)\n    console.log('BufferRibbonGeometry attributes', this.attributes)\n  }\n\n  setPath (iPath, front, back) {\n    let path = this.paths[iPath]\n    let trace = this.parameters.traces[iPath]\n\n    console.log(trace.points.length, trace.detail, path.points.length, trace.points.length * 2 * trace.detail)\n\n    let iVertexOffsetOfPathPoint = []\n\n    let thisColor, color\n\n    for (let iTracePoint = 0; iTracePoint < trace.points.length; iTracePoint += 1) {\n      // works out start on expanded path, including overhang\n      let iPathStart = (iTracePoint * 2 * trace.detail) - trace.detail\n      if (iPathStart < 0) {\n        iPathStart = 0\n      }\n\n      // works out end of expanded path, including overhang\n      let iPathEnd = ((iTracePoint + 1) * 2 * trace.detail) - trace.detail\n      if (iPathEnd >= path.points.length) {\n        iPathEnd = path.points.length\n      }\n\n      thisColor = trace.getReference(iTracePoint).color\n\n      for (let iPathPoint = iPathStart; iPathPoint < iPathEnd; iPathPoint += 1) {\n        if (iPathPoint in iVertexOffsetOfPathPoint) {\n          continue\n        }\n\n        color = thisColor\n        if (iPathPoint === iPathStart) {\n          let prevColor = trace.getReference(iTracePoint - 1).color\n          if ((prevColor !== thisColor) && (!_.isUndefined(prevColor))) {\n            console.log('half color', iTracePoint, iPathPoint, prevColor, thisColor)\n            color = thisColor.clone()\n            color.lerp(prevColor, 0.5)\n          }\n        }\n\n        iVertexOffsetOfPathPoint[iPathPoint] = this.vertexCount\n\n        let width = 8\n        let height = 0.5\n        if (trace.getReference(iTracePoint).ss === 'C') {\n          width = 1\n          height = 1\n        }\n\n        let point = path.points[iPathPoint]\n        let normal = path.normals[iPathPoint]\n        let binormal = path.binormals[iPathPoint]\n\n        for (let shapePoint of this.shapePoints) {\n          let x = normal.clone().multiplyScalar(shapePoint.x * width)\n          let y = binormal.clone().multiplyScalar(shapePoint.y * height)\n          this.pushVertex(point.clone().add(x).add(y), color)\n        }\n      }\n      // console.log(iTracePoint, trace.getReference(iTracePoint).label,\n      //   iTracePoint * this.nShape * 2 * trace.detail, iPathStart, iPathEnd, this.vertexCount)\n    }\n\n    let shapeEdgeNormals = []\n\n    for (let iShapePoint = 0; iShapePoint < this.nShape; iShapePoint += 1) {\n      let iLastShapePoint = iShapePoint - 1\n      if (iLastShapePoint === -1) {\n        iLastShapePoint = this.nShape - 1\n      }\n      let v0 = this.shapePoints[iLastShapePoint]\n      let v1 = this.shapePoints[iShapePoint]\n      let x = -(v1.y * 0.5 - v0.y * 0.5)\n      let y = v1.x * 8 - v0.x * 8\n      shapeEdgeNormals.push(new THREE.Vector2(x, y))\n    }\n\n    // works out end of expanded path, including overhang\n    let iPathEnd = path.points.length\n\n    for (let iPathPoint = 1; iPathPoint < iPathEnd; iPathPoint += 1) {\n      let iVertexOffset = iVertexOffsetOfPathPoint[iPathPoint - 1]\n\n      // Smoothed normals to give a rounded look\n      for (let iShapePoint = 0; iShapePoint < this.nShape; iShapePoint += 1) {\n        let iLastShapePoint\n        if (iShapePoint === 0) {\n          iLastShapePoint = this.nShape - 1\n        } else {\n          iLastShapePoint = iShapePoint - 1\n        }\n\n        let x, y\n\n        if (this.parameters.round) {\n          x = path.normals[iPathPoint - 1].clone()\n            .multiplyScalar(this.shapePoints[iLastShapePoint].x)\n          y = path.binormals[iPathPoint - 1].clone()\n            .multiplyScalar(this.shapePoints[iLastShapePoint].y)\n          let normal00 = x.add(y)\n\n          x = path.normals[iPathPoint - 1].clone()\n            .multiplyScalar(this.shapePoints[iShapePoint].x)\n          y = path.binormals[iPathPoint - 1].clone()\n            .multiplyScalar(this.shapePoints[iShapePoint].y)\n          let normal01 = x.add(y)\n\n          x = path.normals[iPathPoint].clone()\n            .multiplyScalar(this.shapePoints[iShapePoint].x)\n          y = path.binormals[iPathPoint].clone()\n            .multiplyScalar(this.shapePoints[iShapePoint].y)\n          let normal11 = x.add(y)\n\n          x = path.normals[iPathPoint].clone()\n            .multiplyScalar(this.shapePoints[iLastShapePoint].x)\n          y = path.binormals[iPathPoint].clone()\n            .multiplyScalar(this.shapePoints[iLastShapePoint].y)\n          let normal10 = x.add(y)\n\n          let iVertexLast = iVertexOffset + iLastShapePoint\n          let iVertexCurr = iVertexOffset + iShapePoint\n          let jVertexLast = iVertexLast + this.nShape\n          let jVertexCurr = iVertexCurr + this.nShape\n\n          this.pushFace(\n            iVertexLast, jVertexLast, jVertexCurr,\n            normal00, normal10, normal11\n          )\n\n          this.pushFace(\n            iVertexLast, jVertexCurr, iVertexCurr,\n            normal00, normal11, normal01\n          )\n        } else {\n          x = path.normals[iPathPoint - 1].clone()\n            .multiplyScalar(shapeEdgeNormals[iLastShapePoint].x)\n          y = path.binormals[iPathPoint - 1].clone()\n            .multiplyScalar(shapeEdgeNormals[iLastShapePoint].y)\n          let normal0 = x.add(y)\n\n          x = path.normals[iPathPoint].clone()\n            .multiplyScalar(shapeEdgeNormals[iShapePoint].x)\n          y = path.binormals[iPathPoint].clone()\n            .multiplyScalar(shapeEdgeNormals[iShapePoint].y)\n          let normal1 = x.add(y)\n\n          let iVertexLast = iVertexOffset + iLastShapePoint\n          let iVertexCurr = iVertexOffset + iShapePoint\n          let jVertexLast = iVertexLast + this.nShape\n          let jVertexCurr = iVertexCurr + this.nShape\n\n          this.pushFace(\n            jVertexCurr, iVertexLast, jVertexLast,\n            normal1, normal0, normal1\n          )\n          this.pushFace(\n            iVertexCurr, iVertexLast, jVertexCurr,\n            normal0, normal0, normal1\n          )\n        }\n      }\n    }\n  }\n\n  setAttributes () {\n    let positions = new Float32Array(this.nVertex * 3)\n    let normals = new Float32Array(this.nVertex * 3)\n    let indices = new Int32Array(this.nFace * 3)\n    let colors = new Float32Array(this.nVertex * 3)\n\n    this.addAttribute(\n      'position', new THREE.Float32BufferAttribute(positions, 3))\n    this.addAttribute(\n      'normal', new THREE.Float32BufferAttribute(normals, 3))\n    this.addAttribute(\n      'color', new THREE.Float32BufferAttribute(colors, 3))\n    this.setIndex(new THREE.Uint32BufferAttribute(indices, 1))\n\n    this.positions = this.attributes.position.array\n    this.normals = this.attributes.normal.array\n    this.indices = this.index.array\n    this.colors = this.attributes.color.array\n\n    this.positionCount = 0\n    this.indexCount = 0\n    this.vertexCount = 0\n  }\n\n  pushVertex (vertex, color) {\n    this.positions[this.positionCount] = vertex.x\n    this.positions[this.positionCount + 1] = vertex.y\n    this.positions[this.positionCount + 2] = vertex.z\n\n    this.colors[this.positionCount] = color.r\n    this.colors[this.positionCount + 1] = color.g\n    this.colors[this.positionCount + 2] = color.b\n\n    this.positionCount += 3\n    this.vertexCount += 1\n  }\n\n  pushFace (i, j, k, normalI, normalJ, normalK) {\n    this.indices[this.indexCount] = i\n    this.indices[this.indexCount + 1] = j\n    this.indices[this.indexCount + 2] = k\n\n    this.indexCount += 3\n\n    this.normals[i * 3] = normalI.x\n    this.normals[i * 3 + 1] = normalI.y\n    this.normals[i * 3 + 2] = normalI.z\n\n    this.normals[j * 3] = normalJ.x\n    this.normals[j * 3 + 1] = normalJ.y\n    this.normals[j * 3 + 2] = normalJ.z\n\n    this.normals[k * 3] = normalK.x\n    this.normals[k * 3 + 1] = normalK.y\n    this.normals[k * 3 + 2] = normalK.z\n  }\n\n  getVertex (iVertex) {\n    return v3.create(\n      this.positions[iVertex * 3],\n      this.positions[iVertex * 3 + 1],\n      this.positions[iVertex * 3 + 2])\n  }\n\n  countVertexAndFacesOfPath (front, back) {\n    this.nVertex = 0\n    this.nFace = 0\n\n    this.paths = []\n    for (let trace of this.parameters.traces) {\n      let path = trace.detailedPath\n      this.paths.push(path)\n\n      let nPath = path.points.length\n      this.nVertex += nPath * this.nShape\n\n      let nTrace = trace.points.length\n      this.nFace += ((nTrace - 1) * 2 * this.nShape * (2 * trace.detail + 1))\n    }\n  }\n}\n\n/**\n * Creates a new path out of a slice of the oldPath, with\n * n number of segments between two points, using a Catmul-Rom\n * spline based on the two points, and the two surrounding\n * points. At the ends, the external points are projected\n * from the end using the tangent at the ends.\n *\n * @param {PathAndFrenetFrames} oldPath\n * @param {Number} n\n * @param {Number} iOldPoint\n * @param {Number} jOldPoint\n * @returns {PathAndFrenetFrames}\n */\nfunction expandPath (oldPath, n, iOldPoint, jOldPoint) {\n  let newPath = new PathAndFrenetFrames()\n\n  newPath.points.push(oldPath.points[iOldPoint])\n\n  for (let i = iOldPoint; i < jOldPoint - 1; i += 1) {\n    let jStart = 1\n    let jEnd = n + 1\n\n    for (let j = jStart; j < jEnd; j += 1) {\n      let t = j / n\n\n      let prevOldPoint, nextOldPoint\n\n      if (i > 0) {\n        prevOldPoint = oldPath.points[i - 1]\n      } else {\n        prevOldPoint = oldPath.points[i].clone()\n          .sub(oldPath.tangents[i])\n      }\n\n      if (i < oldPath.points.length - 2) {\n        nextOldPoint = oldPath.points[i + 2]\n      } else {\n        nextOldPoint = oldPath.points[i + 1].clone()\n          .add(oldPath.tangents[i])\n      }\n\n      newPath.points.push(\n        catmulRomSpline(\n          t,\n          prevOldPoint,\n          oldPath.points[i],\n          oldPath.points[i + 1],\n          nextOldPoint\n        )\n      )\n    }\n  }\n\n  newPath.normals.push(oldPath.normals[iOldPoint])\n  for (let i = iOldPoint; i < jOldPoint - 1; i += 1) {\n    for (let j = 1; j < n + 1; j += 1) {\n      let t = j / n\n\n      let prevOldNormal, nextOldNormal\n\n      if (i > 0) {\n        prevOldNormal = oldPath.normals[i - 1]\n      } else {\n        prevOldNormal = oldPath.normals[i]\n      }\n\n      if (i < oldPath.normals.length - 2) {\n        nextOldNormal = oldPath.normals[i + 2]\n      } else {\n        nextOldNormal = oldPath.normals[i + 1]\n      }\n\n      newPath.normals.push(\n        catmulRomSpline(\n          t,\n          prevOldNormal,\n          oldPath.normals[i],\n          oldPath.normals[i + 1],\n          nextOldNormal\n        )\n          .normalize()\n      )\n    }\n  }\n\n  for (let i = 0; i < newPath.points.length; i += 1) {\n    if (i === 0) {\n      newPath.tangents.push(\n        oldPath.tangents[0])\n    } else if (i === newPath.points.length - 1) {\n      newPath.tangents.push(\n        oldPath.tangents[jOldPoint - 1])\n    } else {\n      newPath.tangents.push(\n        newPath.points[i + 1].clone()\n          .sub(newPath.points[i - 1])\n          .normalize())\n    }\n  }\n\n  for (let i = 0; i < newPath.points.length; i += 1) {\n    newPath.binormals.push(\n      v3.create()\n        .crossVectors(\n          newPath.tangents[i], newPath.normals[i])\n    )\n  }\n\n  return newPath\n}\n\n/**\n * Trace is an object designed to be built up progressively\n * by adding to this.indices, this.points and this.normals.\n *\n * Once built, it can be expanded into a more detailed\n * trace, which is used to generate geometric pieces of\n * an extrusion where the normals and tangents are\n * controlled.\n */\nclass Trace extends PathAndFrenetFrames {\n  constructor () {\n    super()\n    this.indices = []\n    this.detail = 2\n  }\n\n  getReference (i) {\n    let iRef = this.indices[i]\n    return this.referenceObjects[iRef]\n  }\n\n  /**\n   * Calculates tangents as an average on neighbouring points\n   * so that we get a smooth path.\n   */\n  calcTangents () {\n    let iStart = 0\n    let iEnd = this.points.length\n    let iLast = iEnd - 1\n    if ((iEnd - iStart) > 2) {\n      // project out first tangent from main chain\n      this.tangents[iStart] = this.points[iStart + 1].clone()\n        .sub(this.points[iStart])\n        .normalize()\n\n      // calculate tangents as averages of neighbouring residues\n      for (let i = iStart + 1; i < iLast; i += 1) {\n        this.tangents[i] = this.points[i + 1].clone()\n          .sub(this.points[i - 1])\n          .normalize()\n      }\n\n      // project out last tangent from main chain\n      this.tangents[iLast] = this.points[iLast].clone()\n        .sub(this.points[iLast - 1])\n        .normalize()\n    } else {\n      // for short 2 point traces\n      let tangent = this.points[iLast].clone()\n        .sub(this.points[iStart])\n        .normalize()\n\n      this.tangents[iStart] = tangent\n      this.tangents[iLast] = tangent\n    }\n  }\n\n  /**\n   * If normal[i] is not null,\n   * it will use the normal, otherwise it will generate own\n   * normal from the path curvature\n   */\n  calcNormals () {\n    let iStart = 0\n    let iEnd = this.points.length\n    let iLast = iEnd - 1\n    if ((iEnd - iStart) > 2) {\n      for (let i = iStart + 1; i < iLast; i += 1) {\n        if (this.normals[i] !== null) {\n          // normal already provided, normalize properly against tangent\n          this.normals[i] = perpVector(this.tangents[i], this.normals[i])\n          this.normals[i].normalize()\n        } else {\n          // generate a normal from curvature\n          let diff = this.points[i].clone().sub(this.points[i - 1])\n          this.normals[i] = v3.create()\n            .crossVectors(diff, this.tangents[i]).normalize()\n\n          // smooth out auto-generated normal if flipped 180deg from prev\n          let prevNormal = this.normals[i - 1]\n          if (prevNormal !== null) {\n            if (this.normals[i].dot(prevNormal) < 0) {\n              this.normals[i].negate()\n            }\n          }\n        }\n      }\n\n      this.normals[iStart] = this.normals[iStart + 1]\n      this.normals[iLast] = this.normals[iLast - 1]\n    } else {\n      for (let i = iStart; i <= iLast; i += 1) {\n        if (this.normals[i] !== null) {\n          this.normals[i] = perpVector(this.tangents[i], this.normals[i])\n          this.normals[i].normalize()\n        } else {\n          let randomDir = this.points[i]\n          this.normals[i] = v3.create()\n            .crossVectors(randomDir, this.tangents[i])\n            .normalize()\n        }\n      }\n    }\n  }\n\n  calcBinormals () {\n    let iStart = 0\n    let iEnd = this.points.length\n    for (let i = iStart; i < iEnd; i += 1) {\n      this.binormals[i] = v3.create()\n        .crossVectors(this.tangents[i], this.normals[i])\n    }\n  }\n\n  expand () {\n    this.detailedPath = expandPath(\n      this, 2 * this.detail, 0, this.points.length)\n  }\n\n  /**\n   * A path is generated with 2*detail. If a\n   * residue is not at the end of a piece,\n   * will be extended to detail beyond that is\n   * half-way between the residue and the neighboring\n   * residue in a different piece.\n   */\n  getSegmentGeometry (iRes, face, isRound, isFront, isBack, color) {\n    let path = this.detailedPath\n\n    // works out start on expanded path, including overhang\n    let iPathStart = (iRes * 2 * this.detail) - this.detail\n    if (iPathStart < 0) {\n      iPathStart = 0\n    }\n\n    // works out end of expanded path, including overhang\n    let iPathEnd = ((iRes + 1) * 2 * this.detail) - this.detail + 1\n    if (iPathEnd >= path.points.length) {\n      iPathEnd = path.points.length - 1\n    }\n\n    let segmentPath = path.slice(iPathStart, iPathEnd)\n\n    let geom = new RibbonGeometry(\n      face, segmentPath, isRound, isFront, isBack)\n\n    setGeometryVerticesColor(geom, color)\n\n    return geom\n  }\n\n  getGeometry (face, isRound, isFront, isBack, color) {\n    let path = this.detailedPath\n    let iResStart = 0\n    let iResEnd = this.points.length\n\n    // works out start on expanded path, including overhang\n    let iPathStart = (iResStart * 2 * this.detail) - this.detail\n    if (iPathStart < 0) {\n      iPathStart = 0\n    }\n\n    // works out end of expanded path, including overhang\n    let iPathEnd = ((iResEnd) * 2 * this.detail) - this.detail + 1\n    if (iPathEnd >= path.points.length) {\n      iPathEnd = path.points.length - 1\n    }\n\n    let segmentPath = path.slice(iPathStart, iPathEnd)\n\n    let geom = new BufferRibbonGeometry(\n      this, segmentPath, isRound, isFront, isBack, color)\n\n    return geom\n  }\n}\n\n/**\n * Creates a unit-based block arrow pointing in the -Z direction.\n * It can be reorientated using a lookAt() call\n */\nclass BlockArrowGeometry extends THREE.ExtrudeGeometry {\n  constructor () {\n    let shape = new THREE.Shape([\n      new THREE.Vector2(-0.4, -0.5),\n      new THREE.Vector2(0.0, +0.5),\n      new THREE.Vector2(+0.4, -0.5)\n    ])\n\n    let path = new THREE.CatmullRomCurve3([\n      v3.create(0, -0.3, 0),\n      v3.create(0, 0.3, 0)\n    ])\n\n    super(\n      shape,\n      {\n        steps: 2,\n        bevelEnabled: false,\n        extrudePath: path\n      }\n    )\n\n    this.type = 'BlockArrowGeometry'\n\n    this.applyMatrix(\n      new THREE.Matrix4()\n        .makeRotationFromEuler(\n          new THREE.Euler(0, Math.PI / 2, 0)))\n  }\n}\n\n/**\n * Creates a cylinder that is orientated along\n * the z-direction. Use lookAt to reorientate\n */\nclass UnitCylinderGeometry extends THREE.CylinderGeometry {\n  constructor () {\n    super(1, 1, 1, 4, 1, false)\n\n    this.type = 'UnitCylinderGeometry'\n\n    this.applyMatrix(\n      new THREE.Matrix4()\n        .makeRotationFromEuler(\n          new THREE.Euler(Math.PI / 2, Math.PI, 0)))\n  }\n}\n\n/**\n * Takes a bunch of points and treats it as defining\n * a polygon, and raises it to a certain thickness.\n */\nclass RaisedShapeGeometry extends THREE.Geometry {\n  constructor (vertices, thickness) {\n    super()\n\n    this.type = 'RaisedShapeGeometry'\n\n    this.parameters = {\n      vertices: vertices,\n      thickness: thickness\n    }\n\n    let normal = threePointNormal(vertices.slice(0, 3))\n\n    let displacement = normal.clone()\n      .multiplyScalar(thickness / 2)\n\n    let nVertex = vertices.length\n    let iLast = nVertex - 1\n    let offset = nVertex\n\n    for (let i = 0; i < vertices.length; i += 1) {\n      this.vertices.push(\n        vertices[i].clone().add(displacement))\n    }\n    for (let i = 0; i < vertices.length; i += 1) {\n      this.vertices.push(\n        vertices[i].clone().sub(displacement))\n    }\n\n    for (let i = 0; i < nVertex - 2; i += 1) {\n      let face = new THREE.Face3(i, i + 1, iLast)\n      this.faces.push(face)\n    }\n\n    for (let i = 0; i < nVertex - 2; i += 1) {\n      let face = new THREE.Face3(\n        offset + i, offset + iLast, offset + i + 1)\n      this.faces.push(face)\n    }\n\n    for (let i = 0; i < nVertex; i += 1) {\n      let j\n      if (i === nVertex - 1) {\n        j = 0\n      } else {\n        j = i + 1\n      }\n\n      this.faces.push(new THREE.Face3(i, i + offset, j + offset))\n      this.faces.push(new THREE.Face3(i, j + offset, j))\n    }\n\n    this.computeFaceNormals()\n  }\n}\n\n/**\n * Convenience function to set the visibility of a THREE\n * Object3D collection of meshes and other objects\n *\n * @param {THREE.Object3D} obj\n * @param {boolean} visibility\n */\nfunction setVisible (obj, visibility) {\n  if (_.isUndefined(obj)) {\n    return\n  }\n  obj.traverse(function (c) {\n    c.visible = visibility\n  })\n}\n\n/**\n * A generic cleaner for a THREE.Object3D collection,\n * where a custom 'dontDelete' field is used to\n * avoid deletion, and all other children are\n * disposed of correctly to reclaim memory\n *\n * @param {THREE.Object3D} obj\n */\nfunction clearObject3D (obj) {\n  let iLast = obj.children.length - 1\n  for (let i = iLast; i >= 0; i -= 1) {\n    let child = obj.children[i]\n    if (!_.isUndefined(child.dontDelete)) {\n      continue\n    }\n    if (!_.isUndefined(child.geometry)) {\n      child.geometry.dispose()\n    }\n    if (!_.isUndefined(child.material)) {\n      child.material.dispose()\n    }\n    obj.remove(child)\n  }\n}\n\nfunction perpVector (ref, vec) {\n  let vecAlongRef = ref.clone()\n    .multiplyScalar(vec.dot(ref))\n\n  return vec.clone().sub(vecAlongRef)\n}\n\nfunction threePointNormal (vertices) {\n  let cb = new THREE.Vector3()\n  let ab = new THREE.Vector3()\n\n  cb.subVectors(vertices[2], vertices[1])\n  ab.subVectors(vertices[0], vertices[1])\n  cb.cross(ab)\n\n  cb.normalize()\n\n  return cb\n}\n\nfunction getUnitVectorRotation (reference, target) {\n  return new THREE.Quaternion()\n    .setFromUnitVectors(reference, target)\n}\n\nfunction fraction (reference, target, t) {\n  return t * (target - reference) + reference\n}\n\nfunction getFractionRotation (rotation, t) {\n  let identity = new THREE.Quaternion()\n  return identity.slerp(rotation, t)\n}\n\nfunction setGeometryVerticesColor (geom, color) {\n  for (let i = 0; i < geom.faces.length; i += 1) {\n    let face = geom.faces[i]\n    face.vertexColors[0] = color\n    face.vertexColors[1] = color\n    face.vertexColors[2] = color\n  }\n}\n\nfunction mergeUnitGeom (totalGeom, unitGeom, color, matrix) {\n  setGeometryVerticesColor(unitGeom, color)\n  totalGeom.merge(unitGeom, matrix)\n}\n\n/**\n * Calculates the transform matrix for a SphereGeometry\n * to a given position and radius\n *\n * @param {THREE.Vector3} pos\n * @param {Number} radius\n * @returns {THREE.Matrix4}\n */\nfunction getSphereMatrix (pos, radius) {\n  let obj = new THREE.Object3D()\n  obj.matrix.identity()\n  obj.position.copy(pos)\n  obj.scale.set(radius, radius, radius)\n  obj.updateMatrix()\n  return obj.matrix\n}\n\n/**\n * Calculates the transform matrix for a UnitCylinderGeometry\n * to orientate along the axis between the 'from' and 'to' vector\n *\n * @param {THREE.Vector3} from\n * @param {THREE.Vector3} to\n * @param {Number} radius\n * @returns {THREE.Matrix4}\n */\nfunction getCylinderMatrix (from, to, radius) {\n  let obj = new THREE.Object3D()\n  obj.scale.set(radius, radius, from.distanceTo(to))\n  obj.position.copy(from).add(to).multiplyScalar(0.5)\n  obj.lookAt(to)\n  obj.updateMatrix()\n  return obj.matrix\n}\n\nfunction applyMatrix4toVector3array (matrix, vec3Array, iStart, iEnd) {\n  let elems = matrix.elements\n  for (let i = iStart; i < iEnd; i += 3) {\n    let x = vec3Array[i]\n    let y = vec3Array[i + 1]\n    let z = vec3Array[i + 2]\n    vec3Array[i] = elems[0] * x + elems[4] * y + elems[8] * z + elems[12]\n    vec3Array[i + 1] = elems[1] * x + elems[5] * y + elems[9] * z + elems[13]\n    vec3Array[i + 2] = elems[2] * x + elems[6] * y + elems[10] * z + elems[14]\n  }\n}\n\nfunction applyRotationOfMatrix4toVector3array (matrix, vec3Array, iStart, iEnd) {\n  let elems = matrix.elements\n  for (let i = iStart; i < iEnd; i += 3) {\n    let x = vec3Array[i]\n    let y = vec3Array[i + 1]\n    let z = vec3Array[i + 2]\n    vec3Array[i] = elems[0] * x + elems[4] * y + elems[8] * z\n    vec3Array[i + 1] = elems[1] * x + elems[5] * y + elems[9] * z\n    vec3Array[i + 2] = elems[2] * x + elems[6] * y + elems[10] * z\n  }\n}\n\nfunction expandFloatArray (refArray, nCopy) {\n  let nElem = refArray.length\n  let targetArray = new Float32Array(nElem * nCopy)\n  for (let iCopy = 0; iCopy < nCopy; iCopy += 1) {\n    let iStart = iCopy * nElem\n    for (let i = 0; i < nElem; i += 1) {\n      targetArray[iStart + i] = refArray[i]\n    }\n  }\n  return targetArray\n}\n\nfunction applyColorToVector3array (color, vec3Array, iStart, iEnd) {\n  for (let i = iStart; i < iEnd; i += 3) {\n    vec3Array[i] = color.r\n    vec3Array[i + 1] = color.g\n    vec3Array[i + 2] = color.b\n  }\n}\n\nfunction expandIndices (refArray, nCopy, nIndexInCopy) {\n  let nElem = refArray.length\n  let targetArray = new Uint32Array(nElem * nCopy)\n  for (let iCopy = 0; iCopy < nCopy; iCopy += 1) {\n    let iStart = iCopy * nElem\n    let indexOffset = iCopy * nIndexInCopy\n    for (let i = 0; i < nElem; i += 1) {\n      targetArray[iStart + i] = refArray[i] + indexOffset\n    }\n  }\n  return targetArray\n}\n\n/**\n * CopyBufferGeometry is designed to replicate multiple copies of\n * an existing BufferGeometry in one single assignment - thus\n * efficiently creating a large dataset\n */\nclass CopyBufferGeometry extends THREE.BufferGeometry {\n  constructor (copyBufferGeometry, nCopy) {\n    super()\n\n    this.type = 'CopyBufferGeometry'\n    this.parameters = {\n      nCopy: nCopy\n    }\n\n    this.refBufferGeometry = copyBufferGeometry\n\n    let positions = expandFloatArray(copyBufferGeometry.attributes.position.array, nCopy)\n    this.addAttribute(\n      'position', new THREE.Float32BufferAttribute(positions, 3))\n\n    let normals = expandFloatArray(copyBufferGeometry.attributes.normal.array, nCopy)\n    this.addAttribute(\n      'normal', new THREE.Float32BufferAttribute(normals, 3))\n\n    let uvs = expandFloatArray(copyBufferGeometry.attributes.uv.array, nCopy)\n    this.addAttribute(\n      'uv', new THREE.Float32BufferAttribute(uvs, 2))\n\n    let nVertexInCopy = copyBufferGeometry.attributes.position.count\n\n    if ('index' in copyBufferGeometry) {\n      if (copyBufferGeometry.index) {\n        let indices = expandIndices(copyBufferGeometry.index.array, nCopy, nVertexInCopy)\n        this.setIndex(new THREE.Uint32BufferAttribute(indices, 1))\n      }\n    }\n\n    let colors = new Float32Array(nVertexInCopy * 3 * nCopy)\n    this.addAttribute(\n      'color', new THREE.Float32BufferAttribute(colors, 3))\n  }\n\n  applyMatrixToCopy (matrix, iCopy) {\n    let nElemRef = this.refBufferGeometry.attributes.position.array.length\n    let positions = this.attributes.position.array\n    let normals = this.attributes.normal.array\n    let iElemStart = iCopy * nElemRef\n    let iElemEnd = iElemStart + nElemRef\n    applyMatrix4toVector3array(matrix, positions, iElemStart, iElemEnd)\n    applyRotationOfMatrix4toVector3array(matrix, normals, iElemStart, iElemEnd)\n  }\n\n  applyColorToCopy (color, iCopy) {\n    let nElemRef = this.refBufferGeometry.attributes.position.array.length\n    let colors = this.attributes.color.array\n    let iElemStart = iCopy * nElemRef\n    let iElemEnd = iElemStart + nElemRef\n    applyColorToVector3array(color, colors, iElemStart, iElemEnd)\n  }\n}\n\nexport {\n  BlockArrowGeometry,\n  UnitCylinderGeometry,\n  setVisible,\n  RaisedShapeGeometry,\n  RibbonGeometry,\n  BufferRibbonGeometry,\n  getUnitVectorRotation,\n  getFractionRotation,\n  fraction,\n  setGeometryVerticesColor,\n  clearObject3D,\n  Trace,\n  mergeUnitGeom,\n  getSphereMatrix,\n  getCylinderMatrix,\n  CopyBufferGeometry,\n  applyMatrix4toVector3array,\n  applyRotationOfMatrix4toVector3array,\n  applyColorToVector3array\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/jolecule/glgeom.js","/**\n * Finds pairs of vertices that have been coarsely grouped together\n * using spatial hashes of boxes of div^3. All vertices in neighboring\n * boxes are considered close pairs.\n *\n * Vertex - [x, y, z] in real coordinates\n *\n * Space - [i, j, k] integer indices in grid space\n *\n * Spacehash - hash integer hash of a space\n *\n * SpaceHashes are spaces converted to a single integer\n *\n * @param {Array<THREE.Vector3>} vertices - list of positions\n * @returns {Array} - array of pairs of positions\n */\nclass SpaceHash {\n  constructor (vertices) {\n    console.log('SpaceHash assigning vertices to cells')\n\n    this.vertices = vertices\n    this.padding = 0.05\n    this.div = 5.0\n    this.invDiv = 1.0 / this.div\n    this.maxima = [0.0, 0.0, 0.0]\n    this.minima = [0.0, 0.0, 0.0]\n    this.spans = [0.0, 0.0, 0.0]\n    this.sizes = [0, 0, 0]\n\n    for (let iDim = 0; iDim < 3; iDim++) {\n      for (let iVertex = 0; iVertex < this.vertices.length; iVertex += 1) {\n        if (this.minima[iDim] > this.vertices[iVertex][iDim]) {\n          this.minima[iDim] = this.vertices[iVertex][iDim]\n        }\n        if (this.maxima[iDim] < this.vertices[iVertex][iDim]) {\n          this.maxima[iDim] = this.vertices[iVertex][iDim]\n        }\n      }\n      this.minima[iDim] -= this.padding\n      this.maxima[iDim] += this.padding\n      this.spans[iDim] = this.maxima[iDim] - this.minima[iDim]\n      this.sizes[iDim] = Math.ceil(this.spans[iDim] * this.invDiv)\n    }\n\n    this.cells = {}\n    this.spaces = []\n    for (let iVertex = 0; iVertex < this.vertices.length; iVertex++) {\n      let vertex = this.vertices[iVertex]\n      let space = this.getSpaceFromVertex(vertex)\n      this.spaces.push(space)\n      let hash = this.getHashFromSpace(space)\n      if (!(hash in this.cells)) {\n        this.cells[hash] = []\n      }\n      this.cells[hash].push(iVertex)\n    }\n  }\n\n  getSpaceFromVertex (vertex) {\n    let result = []\n    for (let iDim = 0; iDim < 3; iDim++) {\n      result.push(Math.round((vertex[iDim] - this.minima[iDim]) * this.invDiv))\n    }\n    return result\n  }\n\n  getHashFromSpace (s) {\n    return s[0] * this.sizes[1] * this.sizes[2] + s[1] * this.sizes[2] + s[2]\n  }\n\n  pushCellOfSpace (pairs, vertex, iVertex) {\n    let spaceCenter = this.getSpaceFromVertex(vertex)\n\n    let space0start = Math.max(0, spaceCenter[0] - 1)\n    let space0end = Math.min(this.sizes[0], spaceCenter[0] + 2)\n    let space1start = Math.max(0, spaceCenter[1] - 1)\n    let space1end = Math.min(this.sizes[1], spaceCenter[1] + 2)\n    let space2start = Math.max(0, spaceCenter[2] - 1)\n    let space2end = Math.min(this.sizes[2], spaceCenter[2] + 2)\n\n    for (let space0 = space0start; space0 < space0end; space0++) {\n      for (let space1 = space1start; space1 < space1end; space1++) {\n        for (let space2 = space2start; space2 < space2end; space2++) {\n          let hash = this.getHashFromSpace([space0, space1, space2])\n          if (hash in this.cells) {\n            let cell = this.cells[hash]\n            for (let jVertexInCell = 0; jVertexInCell < cell.length; jVertexInCell++) {\n              let jVertex = cell[jVertexInCell]\n              pairs.push([iVertex, jVertex])\n            }\n          }\n        }\n      }\n    }\n  }\n\n  getClosePairs () {\n    console.log('SpatialHash.getClosePairs')\n    let pairs = []\n    for (let iVertex = 0; iVertex < this.vertices.length; iVertex++) {\n      this.pushCellOfSpace(pairs, this.vertices[iVertex], iVertex)\n    }\n    return pairs\n  }\n\n  getVerticesNearPoint (vertex, iVertex) {\n    console.log('SpatialHash.getClosePairs')\n    let pairs = []\n    this.pushCellOfSpace(pairs, vertex, iVertex)\n    return pairs\n  }\n}\n\nexport { SpaceHash }\n\n\n\n// WEBPACK FOOTER //\n// ./src/jolecule/pairs.js","/**\n * @file Store - an array-based space-efficient typed datastore, to be used\n * as a Flyweight, with an associated Proxy\n *\n * adapted from NGL @author Alexander Rose <alexander.rose@weirdbyte.de>\n */\n\nfunction getTypedArray (arrayType, arraySize) {\n  switch (arrayType) {\n    case 'int8':\n      return new Int8Array(arraySize)\n    case 'int16':\n      return new Int16Array(arraySize)\n    case 'int32':\n      return new Int32Array(arraySize)\n    case 'uint8':\n      return new Uint8Array(arraySize)\n    case 'uint16':\n      return new Uint16Array(arraySize)\n    case 'uint32':\n      return new Uint32Array(arraySize)\n    case 'float32':\n      return new Float32Array(arraySize)\n    default:\n      throw new Error('arrayType unknown: ' + arrayType)\n  }\n}\n\n/**\n * Store - an array-based space-efficient typed datastore, to be used\n * as a Flyweight, with an associated Proxy\n */\nclass Store {\n  /**\n   * @param fields - list of typed fields in the store\n   * @param {Integer} size - initial size of the datastore\n   */\n  constructor (fields, size) {\n    // actual size allocated\n    this.length = 0\n\n    // size to use, updated by this.growIfFull\n    this.count = 0\n\n    this._fields = fields\n\n    if (Number.isInteger(size)) {\n      this._init(size)\n    } else {\n      this._init(0)\n    }\n  }\n\n  /**\n   * Initialize the store\n   * @param {Integer} size - size to initialize\n   */\n  _init (size) {\n    this.length = size\n    this.count = 0\n\n    for (let field of this._fields) {\n      this._initField(...field)\n    }\n  }\n\n  /**\n   * Initialize a field\n   * @param  {String} name - field name\n   * @param  {Integer} size - element size\n   * @param  {String} type - data type, one of int8, int16, int32,\n   *                         uint8, uint16, uint32, float32\n   */\n  _initField (name, size, type) {\n    this[ name ] = getTypedArray(type, this.length * size)\n  }\n\n  /**\n   * Add a field\n   * @param  {String} name - field name\n   * @param  {Integer} size - element size\n   * @param  {String} type - data type, one of int8, int16, int32,\n   *                         uint8, uint16, uint32, float32\n   */\n  addField (name, size, type) {\n    this._fields.push([name, size, type])\n    this._initField(name, size, type)\n  }\n\n  /**\n   * Resize the store to the new size\n   * @param  {Integer} size - new size\n   */\n  resize (size) {\n    // Log.time( \"Store.resize\" );\n\n    this.length = Math.round(size || 0)\n    this.count = Math.min(this.count, this.length)\n\n    for (let i = 0, il = this._fields.length; i < il; ++i) {\n      const name = this._fields[ i ][ 0 ]\n      const itemSize = this._fields[ i ][ 1 ]\n      const arraySize = this.length * itemSize\n      const tmpArray = new this[ name ].constructor(arraySize)\n\n      if (this[ name ].length > arraySize) {\n        tmpArray.set(this[ name ].subarray(0, arraySize))\n      } else {\n        tmpArray.set(this[ name ])\n      }\n      this[ name ] = tmpArray\n    }\n\n    // Log.timeEnd( \"Store.resize\" );\n  }\n\n  /**\n   * Resize the store to 1.5 times its current size if full, or to 256 if empty\n   */\n  growIfFull () {\n    if (this.count >= this.length) {\n      const size = Math.round(this.length * 1.5)\n      this.resize(Math.max(256, size))\n    }\n  }\n\n  /**\n   * Increase the store by 1, and resize if necessary\n   */\n  increment () {\n    this.count += 1\n    this.growIfFull()\n  }\n\n  /**\n   * Copy data from one store to another\n   * @param  {Store} other - store to copy from\n   * @param  {Integer} thisOffset - offset to start copying to\n   * @param  {Integer} otherOffset - offset to start copying from\n   * @param  {Integer} length - number of entries to copy\n   */\n  copyFrom (other, thisOffset, otherOffset, length) {\n    for (let i = 0, il = this._fields.length; i < il; ++i) {\n      const name = this._fields[ i ][ 0 ]\n      const itemSize = this._fields[ i ][ 1 ]\n      const thisField = this[ name ]\n      const otherField = other[ name ]\n\n      for (let j = 0; j < length; ++j) {\n        const thisIndex = itemSize * (thisOffset + j)\n        const otherIndex = itemSize * (otherOffset + j)\n        for (let k = 0; k < itemSize; ++k) {\n          thisField[ thisIndex + k ] = otherField[ otherIndex + k ]\n        }\n      }\n    }\n  }\n\n  /**\n   * Copy data within this store\n   * @param  {Integer} offsetTarget - offset to start copying to\n   * @param  {Integer} offsetSource - offset to start copying from\n   * @param  {Integer} length - number of entries to copy\n   */\n  copyWithin (offsetTarget, offsetSource, length) {\n    for (let i = 0, il = this._fields.length; i < il; ++i) {\n      const name = this._fields[ i ][ 0 ]\n      const itemSize = this._fields[ i ][ 1 ]\n      const thisField = this[ name ]\n\n      for (let j = 0; j < length; ++j) {\n        const targetIndex = itemSize * (offsetTarget + j)\n        const sourceIndex = itemSize * (offsetSource + j)\n        for (let k = 0; k < itemSize; ++k) {\n          thisField[ targetIndex + k ] = thisField[ sourceIndex + k ]\n        }\n      }\n    }\n  }\n\n  /**\n   * Sort entries in the store given the compare function\n   * @param  {Function} compareFunction - function to sort by (i, j) -> Integer\n   *            the return value is - if item[i] is smaller than item[j]\n   */\n  sort (compareFunction) {\n    const thisStore = this\n    const tmpStore = new this.constructor(this._fields, 1)\n\n    function swap (index1, index2) {\n      if (index1 === index2) return\n      tmpStore.copyFrom(thisStore, 0, index1, 1)\n      thisStore.copyWithin(index1, index2, 1)\n      thisStore.copyFrom(tmpStore, index2, 0, 1)\n    }\n\n    function quicksort (left, right) {\n      if (left < right) {\n        let pivot = Math.floor((left + right) / 2)\n        let leftNew = left\n        let rightNew = right\n        do {\n          while (compareFunction(leftNew, pivot) < 0) {\n            leftNew += 1\n          }\n          while (compareFunction(rightNew, pivot) > 0) {\n            rightNew -= 1\n          }\n          if (leftNew <= rightNew) {\n            if (leftNew === pivot) {\n              pivot = rightNew\n            } else if (rightNew === pivot) {\n              pivot = leftNew\n            }\n            swap(leftNew, rightNew)\n            leftNew += 1\n            rightNew -= 1\n          }\n        } while (leftNew <= rightNew)\n        quicksort(left, rightNew)\n        quicksort(leftNew, right)\n      }\n    }\n\n    quicksort(0, this.count - 1)\n  }\n\n  /**\n   * Empty the store, but keep the allocated memory\n   */\n  clear () {\n    this.count = 0\n  }\n\n  /**\n   * Dispose of the store entries and fields\n   */\n  dispose () {\n    delete this.length\n    delete this.count\n\n    for (let i = 0, il = this._fields.length; i < il; ++i) {\n      const name = this._fields[ i ][ 0 ]\n      delete this[ name ]\n    }\n  }\n}\n\nexport default Store\n\n\n\n// WEBPACK FOOTER //\n// ./src/jolecule/store.js","/**\n * @file Bit array\n * @author Alexander Rose <alexander.rose@weirdbyte.de>\n * @author Paul Pillot <paulpillot@gmail.com>\n * @private\n */\n\n/**\n * Compute the Hamming weight of a 32-bit unsigned integer\n * @param  {Integer} v - a 32-bit unsigned integer\n * @return {Integer} the Hamming weight\n */\nfunction hammingWeight (v) {\n  // works with signed or unsigned shifts\n  v -= ((v >>> 1) & 0x55555555)\n  v = (v & 0x33333333) + ((v >>> 2) & 0x33333333)\n  return ((v + (v >>> 4) & 0xF0F0F0F) * 0x1010101) >>> 24\n}\n\n/**\n * Bit array\n *\n * Based heavily on https://github.com/lemire/FastBitSet.js\n * which is licensed under the Apache License, Version 2.0.\n */\nclass BitArray {\n  /**\n   * @param  {Integer} length - array length\n   * @param  {Boolean} [setAll] - initialize with true\n   */\n  constructor (length, setAll) {\n    this.length = length\n    this._words = new Uint32Array((length + 32) >>> 5)\n    if (setAll === true) {\n      this.setAll()\n    }\n  }\n\n  /**\n   * Get value at index\n   * @param  {Integer} index - the index\n   * @return {Boolean} value\n   */\n  get (index) {\n    return (this._words[ index >>> 5 ] & (1 << index)) !== 0\n  }\n\n  /**\n   * Set value at index to true\n   * @param  {Integer} index - the index\n   * @return {undefined}\n   */\n  set (index) {\n    this._words[ index >>> 5 ] |= 1 << index\n  }\n\n  /**\n   * Set value at index to false\n   * @param  {Integer} index - the index\n   * @return {undefined}\n   */\n  clear (index) {\n    this._words[ index >>> 5 ] &= ~(1 << index)\n  }\n\n  /**\n   * Flip value at index\n   * @param  {Integer} index - the index\n   * @return {undefined}\n   */\n  flip (index) {\n    this._words[ index >>> 5 ] ^= 1 << index\n  }\n\n  _assignRange (start, end, value) {\n    const words = this._words\n    const wordValue = value === true ? 0xFFFFFFFF : 0\n    const wordStart = start >>> 5\n    const wordEnd = end >>> 5\n    // set complete words when applicable\n    for (let k = wordStart; k < wordEnd; ++k) {\n      words[ k ] = wordValue\n    }\n    // set parts of the range not spanning complete words\n    const startWord = wordStart << 5\n    const endWord = wordEnd << 5\n    if (value === true) {\n      if (end - start < 32) {\n        for (let i = start, n = end + 1; i < n; ++i) {\n          words[ i >>> 5 ] |= 1 << i\n        }\n      } else {\n        for (let i = start, n = startWord; i < n; ++i) {\n          words[ i >>> 5 ] |= 1 << i\n        }\n        for (let i = endWord, n = end + 1; i < n; ++i) {\n          words[ i >>> 5 ] |= 1 << i\n        }\n      }\n    } else {\n      if (end - start < 32) {\n        for (let i = start, n = end + 1; i < n; ++i) {\n          words[ i >>> 5 ] &= ~(1 << i)\n        }\n      } else {\n        for (let i = start, n = startWord; i < n; ++i) {\n          words[ i >>> 5 ] &= ~(1 << i)\n        }\n        for (let i = endWord, n = end + 1; i < n; ++i) {\n          words[ i >>> 5 ] &= ~(1 << i)\n        }\n      }\n    }\n    return this\n  }\n\n  /**\n   * Set bits of the given range\n   * @param {Integer} start - start index\n   * @param {Integer} end - end index\n   * @return {BitArray} this object\n   */\n  setRange (start, end) {\n    return this._assignRange(start, end, true)\n  }\n\n  /**\n   * Clear bits of the given range\n   * @param {Integer} start - start index\n   * @param {Integer} end - end index\n   * @return {BitArray} this object\n   */\n  clearRange (start, end) {\n    return this._assignRange(start, end, false)\n  }\n\n  /**\n   * Set bits at all given indices\n   * @param {...Integer} arguments - indices\n   * @return {Boolean} this object\n   */\n  setBits () {\n    const words = this._words\n    const n = arguments.length\n    for (let i = 0; i < n; ++i) {\n      const index = arguments[ i ]\n      words[ index >>> 5 ] |= 1 << index\n    }\n    return this\n  }\n\n  /**\n   * Clear bits at all given indices\n   * @param {...Integer} arguments - indices\n   * @return {Boolean} this object\n   */\n  clearBits () {\n    const words = this._words\n    const n = arguments.length\n    for (let i = 0; i < n; ++i) {\n      const index = arguments[ i ]\n      words[ index >>> 5 ] &= ~(1 << index)\n    }\n    return this\n  }\n\n  /**\n   * Set all bits of the array\n   * @return {BitArray} this object\n   */\n  setAll () {\n    return this._assignRange(0, this.length - 1, true)\n  }\n\n  /**\n   * Clear all bits of the array\n   * @return {BitArray} this object\n   */\n  clearAll () {\n    return this._assignRange(0, this.length - 1, false)\n  }\n\n  /**\n   * Flip all the values in the array\n   * @return {BitArray} this object\n   */\n  flipAll () {\n    const count = this._words.length\n    const words = this._words\n    const bs = 32 - this.length % 32\n    for (let k = 0; k < count - 1; ++k) {\n      words[k] = ~words[ k ]\n    }\n    words[ count - 1 ] = (~(words[ count - 1 ] << bs)) >>> bs\n    return this\n  }\n\n  _isRangeValue (start, end, value) {\n    const words = this._words\n    const wordValue = value === true ? 0xFFFFFFFF : 0\n    const wordStart = start >>> 5\n    const wordEnd = end >>> 5\n    // set complete words when applicable\n    for (let k = wordStart; k < wordEnd; ++k) {\n      if (words[ k ] !== wordValue) return false\n    }\n    // set parts of the range not spanning complete words\n    if (end - start < 32) {\n      for (let i = start, n = end + 1; i < n; ++i) {\n        if (!!(words[ i >>> 5 ] & (1 << i)) !== value) return false\n      }\n    } else {\n      const startWord = wordStart << 5\n      const endWord = wordEnd << 5\n      for (let i = start, n = startWord << 5; i < n; ++i) {\n        if (!!(words[ i >>> 5 ] & (1 << i)) !== value) return false\n      }\n      for (let i = endWord, n = end + 1; i < n; ++i) {\n        if (!!(words[ i >>> 5 ] & (1 << i)) !== value) return false\n      }\n    }\n    return true\n  }\n\n  /**\n   * Test if bits in given range are set\n   * @param {Integer} start - start index\n   * @param {Integer} end - end index\n   * @return {BitArray} this object\n   */\n  isRangeSet (start, end) {\n    return this._isRangeValue(start, end, true)\n  }\n\n  /**\n   * Test if bits in given range are clear\n   * @param {Integer} start - start index\n   * @param {Integer} end - end index\n   * @return {BitArray} this object\n   */\n  isRangeClear (start, end) {\n    return this._isRangeValue(start, end, false)\n  }\n\n  /**\n   * Test if all bits in the array are set\n   * @return {Boolean} test result\n   */\n  isAllSet () {\n    return this._isRangeValue(0, this.length - 1, true)\n  }\n\n  /**\n   * Test if all bits in the array are clear\n   * @return {Boolean} test result\n   */\n  isAllClear () {\n    return this._isRangeValue(0, this.length - 1, false)\n  }\n\n  /**\n   * Test if bits at all given indices are set\n   * @param {...Integer} arguments - indices\n   * @return {Boolean} test result\n   */\n  isSet () {\n    const words = this._words\n    const n = arguments.length\n    for (let i = 0; i < n; ++i) {\n      const index = arguments[ i ]\n      if ((words[ index >>> 5 ] & (1 << index)) === 0) return false\n    }\n    return true\n  }\n\n  /**\n   * Test if bits at all given indices are clear\n   * @param {...Integer} arguments - indices\n   * @return {Boolean} test result\n   */\n  isClear () {\n    const words = this._words\n    const n = arguments.length\n    for (let i = 0; i < n; ++i) {\n      const index = arguments[ i ]\n      if ((words[ index >>> 5 ] & (1 << index)) !== 0) return false\n    }\n    return true\n  }\n\n  /**\n   * Test if two BitArrays are identical in all their values\n   * @param {BitArray} otherBitarray - the other BitArray\n   * @return {Boolean} test result\n   */\n  isEqualTo (otherBitarray) {\n    const words1 = this._words\n    const words2 = otherBitarray._words\n    const count = Math.min(words1.length, words2.length)\n    for (let k = 0; k < count; ++k) {\n      if (words1[ k ] !== words2[ k ]) {\n        return false\n      }\n    }\n    return true\n  }\n\n  /**\n   * How many set bits?\n   * @return {Integer} number of set bits\n   */\n  getSize () {\n    const count = this._words.length\n    const words = this._words\n    let size = 0\n    for (let i = 0; i < count; ++i) {\n      size += hammingWeight(words[ i ])\n    }\n    return size\n  }\n\n  /**\n   * Calculate difference betwen this and another bit array.\n   * Store result in this object.\n   * @param  {BitArray} otherBitarray - the other bit array\n   * @return {BitArray} this object\n   */\n  difference (otherBitarray) {\n    const words1 = this._words\n    const words2 = otherBitarray._words\n    const count = Math.min(words1.length, words2.length)\n    for (let k = 0; k < count; ++k) {\n      words1[ k ] = words1[ k ] & ~words2[ k ]\n    }\n    for (let k = words1.length; k < count; ++k) {\n      words1[ k ] = 0\n    }\n    return this\n  }\n\n  /**\n   * Calculate union betwen this and another bit array.\n   * Store result in this object.\n   * @param  {BitArray} otherBitarray - the other bit array\n   * @return {BitArray} this object\n   */\n  union (otherBitarray) {\n    const words1 = this._words\n    const words2 = otherBitarray._words\n    const count = Math.min(words1.length, words2.length)\n    for (let k = 0; k < count; ++k) {\n      words1[ k ] |= words2[ k ]\n    }\n    for (let k = words1.length; k < count; ++k) {\n      words1[ k ] = 0\n    }\n    return this\n  }\n\n  /**\n   * Calculate intersection betwen this and another bit array.\n   * Store result in this object.\n   * @param  {BitArray} otherBitarray - the other bit array\n   * @return {BitArray} this object\n   */\n  intersection (otherBitarray) {\n    const words1 = this._words\n    const words2 = otherBitarray._words\n    const count = Math.min(words1.length, words2.length)\n    for (let k = 0; k < count; ++k) {\n      words1[ k ] &= words2[ k ]\n    }\n    for (let k = words1.length; k < count; ++k) {\n      words1[ k ] = 0\n    }\n    return this\n  }\n\n  /**\n   * Test if there is any intersection betwen this and another bit array.\n   * @param  {BitArray} otherBitarray - the other bit array\n   * @return {Boolean} test result\n   */\n  intersects (otherBitarray) {\n    const words1 = this._words\n    const words2 = otherBitarray._words\n    const count = Math.min(words1.length, words2.length)\n    for (let k = 0; k < count; ++k) {\n      if ((words1[ k ] & words2[ k ]) !== 0) {\n        return true\n      }\n    }\n    return false\n  }\n\n  /**\n   * Calculate the number of bits in common betwen this and another bit array.\n   * @param  {BitArray} otherBitarray - the other bit array\n   * @return {Integer} size\n   */\n  getIntersectionSize (otherBitarray) {\n    const words1 = this._words\n    const words2 = otherBitarray._words\n    const count = Math.min(words1.length, words2.length)\n    let size = 0\n    for (let k = 0; k < count; ++k) {\n      size += hammingWeight(words1[ k ] & words2[ k ])\n    }\n    return size\n  }\n\n  /**\n   * Calculate intersection betwen this and another bit array.\n   * Store result in a new bit array.\n   * @param  {BitArray} otherBitarray - the other bit array\n   * @return {BitArray} the new bit array\n   */\n  makeIntersection (otherBitarray) {\n    const words1 = this._words\n    const words2 = otherBitarray._words\n    const count = Math.min(words1.length, words2.length)\n    const wordsA = new Uint32Array(count)\n    const intersection = Object.create(BitArray.prototype)\n    intersection._words = wordsA\n    intersection.length = Math.min(this.length, otherBitarray.length)\n    for (let k = 0; k < count; ++k) {\n      wordsA[ k ] = words1[ k ] & words2[ k ]\n    }\n    return intersection\n  }\n\n  /**\n   * Iterate over all set bits in the array\n   * @param  {function( index: Integer, i: Integer )} callback - the callback\n   * @return {undefined}\n   */\n  forEach (callback) {\n    const count = this._words.length\n    const words = this._words\n    let i = 0\n    for (let k = 0; k < count; ++k) {\n      let w = words[ k ]\n      while (w !== 0) {\n        const t = w & -w\n        const index = (k << 5) + hammingWeight(t - 1)\n        callback(index, i)\n        w ^= t\n        ++i\n      }\n    }\n  }\n\n  /**\n   * Get an array with the set bits\n   * @return {Array} bit indices\n   */\n  toArray () {\n    const words = this._words\n    const answer = new Array(this.getSize())\n    const count = this._words.length\n    let pos = 0\n    for (let k = 0; k < count; ++k) {\n      let w = words[ k ]\n      while (w !== 0) {\n        const t = w & -w\n        answer[ pos++ ] = (k << 5) + hammingWeight(t - 1)\n        w ^= t\n      }\n    }\n    return answer\n  }\n\n  toString () {\n    return '{' + this.toArray().join(',') + '}'\n  }\n\n  toSeleString () {\n    const sele = this.toArray().join(',')\n    return sele ? '@' + sele : 'NONE'\n  }\n\n  /**\n   * Clone this object\n   * @return {BitArray} the cloned object\n   */\n  clone () {\n    const clone = Object.create(BitArray.prototype)\n    clone.length = this.length\n    clone._words = new Uint32Array(this._words)\n    return clone\n  }\n}\n\nexport default BitArray\n\n\n\n// WEBPACK FOOTER //\n// ./src/jolecule/bitarray.js","/**\n * Central place to store constants and color\n * accesors\n */\n\nimport _ from 'lodash'\nimport * as THREE from 'three'\n\nconst proteinResTypes = [\n  'ALA', 'CYS', 'ASP', 'GLU', 'PHE', 'GLY', 'HIS',\n  'ILE', 'LYS', 'LEU', 'MET', 'ASN', 'PRO', 'GLN',\n  'ARG', 'SER', 'THR', 'TRP', 'VAL', 'TYR']\nconst dnaResTypes = ['DA', 'DT', 'DG', 'DC', 'A', 'T', 'G', 'C']\nconst rnaResTypes = ['RA', 'RU', 'RC', 'RG', 'A', 'G', 'C', 'U']\n\n// Color constants\n\nconst green = new THREE.Color(0x639941)\nconst blue = new THREE.Color(0x568AB5)\nconst yellow = new THREE.Color(0xFFC900)\nconst purple = new THREE.Color(0x9578AA)\nconst grey = new THREE.Color(0xBBBBBB)\nconst red = new THREE.Color(0x993333)\n\nconst darkGreen = new THREE.Color(0x2E471E)\nconst darkBlue = new THREE.Color(0x406786)\nconst darkYellow = new THREE.Color(0xC39900)\nconst darkPurple = new THREE.Color(0x5E4C6B)\nconst darkGrey = new THREE.Color(0x555555)\nconst darkRed = new THREE.Color(0x662222)\n\nlet ElementColors = {\n  'H': 0xCCCCCC,\n  'C': 0xAAAAAA,\n  'O': 0xCC0000,\n  'N': 0x0000CC,\n  'S': 0xAAAA00,\n  'P': 0x6622CC,\n  'F': 0x00CC00,\n  'CL': 0x00CC00,\n  'BR': 0x882200,\n  'I': 0x6600AA,\n  'FE': 0xCC6600,\n  'CA': 0x8888AA,\n  'He': 0x7B86C2,\n  'Ne': 0x9ED2E4,\n  'Ar': 0x5DC4BE,\n  'Kr': 0xACD376,\n  'Xe': 0xF79F7C,\n  'Rn': 0xE29EC5\n}\n\nfor (let [k, v] of _.toPairs(ElementColors)) {\n  ElementColors[k] = new THREE.Color(v)\n}\n\nfunction getIndexColor (i) {\n  return new THREE.Color().setHex(i)\n}\n\nfunction getSsColor (ss) {\n  if (ss === 'E') {\n    return yellow\n  } else if (ss === 'H') {\n    return blue\n  } else if (ss === 'D') {\n    return purple\n  } else if (ss === 'C') {\n    return green\n  } else if (ss === 'W') {\n    return red\n  }\n  return grey\n}\n\nfunction getDarkSsColor (ss) {\n  if (ss === 'E') {\n    return darkYellow\n  } else if (ss === 'H') {\n    return darkBlue\n  } else if (ss === 'D') {\n    return darkPurple\n  } else if (ss === 'C') {\n    return darkGreen\n  } else if (ss === 'W') {\n    return darkRed\n  }\n  return darkGrey\n}\n\nconst resToAa = {\n  'ALA': 'A',\n  'CYS': 'C',\n  'ASP': 'D',\n  'GLU': 'E',\n  'PHE': 'F',\n  'GLY': 'G',\n  'HIS': 'H',\n  'ILE': 'I',\n  'LYS': 'K',\n  'LEU': 'L',\n  'MET': 'M',\n  'ASN': 'N',\n  'PRO': 'P',\n  'GLN': 'Q',\n  'ARG': 'R',\n  'SER': 'S',\n  'THR': 'T',\n  'VAL': 'V',\n  'TRP': 'W',\n  'TYR': 'Y',\n  'DA': 'A',\n  'DT': 'T',\n  'DG': 'G',\n  'DC': 'C',\n  'A': 'A',\n  'T': 'T',\n  'G': 'G',\n  'C': 'C',\n  'RA': 'A',\n  'RU': 'U',\n  'RC': 'C',\n  'RG': 'G',\n  'U': 'U'\n\n}\n\n// Backbone atom names\n\nconst backboneAtomTypes = [\n  'N', 'C', 'O', 'H', 'HA', 'CA', 'OXT',\n  'C3\\'', 'P', 'OP1', 'O5\\'', 'OP2',\n  'C5\\'', 'O5\\'', 'O3\\'', 'C4\\'', 'O4\\'', 'C1\\'', 'C2\\'', 'O2\\'',\n  'H2\\'', 'H2\\'\\'', 'H3\\'', 'H4\\'', 'H5\\'', 'H5\\'\\'', 'HO3\\''\n]\n\n// Cartoon cross-sections\nconst ribbonFace = new THREE.Shape([\n  new THREE.Vector2(-1.5, -0.2),\n  new THREE.Vector2(-1.5, +0.2),\n  new THREE.Vector2(+1.5, +0.2),\n  new THREE.Vector2(+1.5, -0.2)\n])\nconst coilFace = new THREE.Shape([\n  new THREE.Vector2(-0.2, -0.2),\n  new THREE.Vector2(-0.2, +0.2),\n  new THREE.Vector2(+0.2, +0.2),\n  new THREE.Vector2(+0.2, -0.2)\n])\n\n// Tube cross-sections\nconst fatCoilFace = new THREE.Shape([\n  new THREE.Vector2(-0.25, -0.25),\n  new THREE.Vector2(-0.25, +0.25),\n  new THREE.Vector2(+0.25, +0.25),\n  new THREE.Vector2(+0.25, -0.25)\n])\n\nfunction getSsFace (ss) {\n  if (ss === 'C' || ss === '-') {\n    return coilFace\n  }\n  return ribbonFace\n}\n\nexport {\n  getIndexColor,\n  getSsColor,\n  resToAa,\n  getDarkSsColor,\n  backboneAtomTypes,\n  getSsFace,\n  coilFace,\n  fatCoilFace,\n  green,\n  blue,\n  yellow,\n  purple,\n  grey,\n  red,\n  darkGreen,\n  darkBlue,\n  darkYellow,\n  darkPurple,\n  darkGrey,\n  darkRed,\n  ElementColors,\n  proteinResTypes,\n  dnaResTypes,\n  rnaResTypes\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/jolecule/data.js","import _ from 'lodash'\nimport v3 from './v3'\nimport { getWindowUrl, inArray, getCurrentDateStr } from './util.js'\nimport * as glgeom from './glgeom'\nimport { SpaceHash } from './pairs.js'\nimport Store from './store.js'\nimport BitArray from './bitarray.js'\nimport * as data from './data'\n\nlet user = 'public' // will be overriden by server\n\nfunction deleteNumbers (text) {\n  return text.replace(/\\d+/, '')\n}\n\nfunction pushToListInDict (dict, key, value) {\n  if (!(key in dict)) {\n    dict[key] = []\n  }\n  dict[key].push(value)\n}\n\nfunction getValueTableIndex (valueList, value) {\n  if (!_.includes(valueList, value)) {\n    valueList.push(value)\n  }\n  return valueList.indexOf(value)\n}\n\nfunction intToBool (i) {\n  return i === 1\n}\n\nfunction boolToInt (b) {\n  return b ? 1 : 0\n}\n\nfunction intToChar (i) {\n  return i ? String.fromCharCode(i) : ''\n}\n\nfunction charToInt (c) {\n  return c.charCodeAt(0)\n}\n\nfunction parsetTitleFromPdbText (text) {\n  let result = ''\n  let lines = text.split(/\\r?\\n/)\n  for (let line of lines) {\n    if (line.substring(0, 5) === 'TITLE') {\n      result += line.substring(10)\n    }\n  }\n  return result\n}\n\nconst atomStoreFields = [\n  ['x', 1, 'float32'],\n  ['y', 1, 'float32'],\n  ['z', 1, 'float32'],\n  ['bfactor', 1, 'float32'],\n  ['alt', 1, 'uint8'],\n  ['iAtomType', 1, 'uint16'],\n  ['iElem', 1, 'uint16'],\n  ['iRes', 1, 'uint32'],\n  ['iChain', 1, 'int32'],\n  ['bondOffset', 1, 'uint32'],\n  ['bondCount', 1, 'uint16']\n]\n\nclass AtomProxy {\n  constructor (soup, iAtom) {\n    this.soup = soup\n    if (Number.isInteger(iAtom)) {\n      this.load(iAtom)\n    }\n    this._pos = v3.create()\n  }\n\n  load (iAtom) {\n    this.iAtom = iAtom\n    return this\n  }\n\n  get pos () {\n    this._pos.x = this.soup.atomStore.x[this.iAtom]\n    this._pos.y = this.soup.atomStore.y[this.iAtom]\n    this._pos.z = this.soup.atomStore.z[this.iAtom]\n    return this._pos\n  }\n\n  get resId () {\n    return this.soup.resIds[this.iRes]\n  }\n\n  get elem () {\n    let iElem = this.soup.atomStore.iElem[this.iAtom]\n    return this.soup.elemTable[iElem]\n  }\n\n  get bfactor () {\n    return this.soup.atomStore.bfactor[this.iAtom]\n  }\n\n  get atomType () {\n    let iAtomType = this.soup.atomStore.iAtomType[this.iAtom]\n    return this.soup.atomTypeTable[iAtomType]\n  }\n\n  get alt () {\n    return intToChar(this.soup.atomStore.alt[this.iAtom])\n  }\n\n  set alt (c) {\n    this.soup.atomStore.alt[this.iAtom] = charToInt(c)\n  }\n\n  get iRes () {\n    return this.soup.atomStore.iRes[this.iAtom]\n  }\n\n  get resType () {\n    let iResType = this.soup.residueStore[this.iRes]\n    return this.soup.resTypeTable[iResType]\n  }\n\n  get label () {\n    let iResType = this.soup.residueStore.iResType[this.iRes]\n    let resType = this.soup.resTypeTable[iResType]\n    let label = this.soup.resIds[this.iRes] +\n      ':' + resType +\n      ':' + this.atomType\n    if (this.alt) {\n      label += ':' + this.alt\n    }\n    return label\n  }\n\n  getBondIndices () {\n    let iStart = this.soup.atomStore.bondOffset[this.iAtom]\n    let n = this.soup.atomStore.bondCount[this.iAtom]\n    let iEnd = iStart + n\n    return _.range(iStart, iEnd)\n  }\n\n  get color () {\n    if (this.elem === 'C' || this.elem === 'H') {\n      let iRes = this.iRes\n      let iColor = this.soup.residueStore.iColor[iRes]\n      return this.soup.colorTable[iColor]\n    } else if (this.elem in data.ElementColors) {\n      return data.ElementColors[this.elem]\n    }\n    return data.darkGrey\n  }\n}\n\nconst residueStoreFields = [\n  ['atomOffset', 1, 'uint32'],\n  ['atomCount', 1, 'uint16'],\n  ['iCentralAtom', 1, 'uint32'],\n  ['iResType', 1, 'uint16'],\n  ['iChain', 1, 'uint8'],\n  ['resNum', 1, 'int32'],\n  ['insCode', 1, 'uint8'],\n  ['sstruc', 1, 'uint8'],\n  ['iColor', 1, 'uint8'],\n  ['isPolymer', 1, 'uint8']\n]\n\nclass ResidueProxy {\n  constructor (soup, iRes) {\n    this.soup = soup\n    if (Number.isInteger(iRes)) {\n      this.load(iRes)\n    }\n  }\n\n  load (iRes) {\n    this.iRes = iRes\n    return this\n  }\n\n  get iAtom () {\n    return this.soup.residueStore.iCentralAtom[this.iRes]\n  }\n\n  set iAtom (iAtom) {\n    this.soup.residueStore.iCentralAtom[this.iRes] = iAtom\n  }\n\n  get iChain () {\n    return this.soup.residueStore.iChain[this.iRes]\n  }\n\n  get resId () {\n    return this.soup.resIds[this.iRes]\n  }\n\n  get resNum () {\n    return this.soup.residueStore.resNum[this.iRes]\n  }\n\n  get insCode () {\n    return intToChar(this.soup.residueStore.insCode[this.iRes])\n  }\n\n  set insCode (c) {\n    this.soup.residueStore.insCode[this.iRes] = charToInt(c)\n  }\n\n  get isPolymer () {\n    return intToBool(this.soup.residueStore.isPolymer[this.iRes])\n  }\n\n  set isPolymer (v) {\n    this.soup.residueStore.isPolymer[this.iRes] = boolToInt(v)\n  }\n\n  get color () {\n    let iColor = this.soup.residueStore.iColor[this.iRes]\n    return this.soup.colorTable[iColor]\n  }\n\n  set color (color) {\n    let iColor = getValueTableIndex(this.soup.colorTable, color)\n    this.soup.residueStore.iColor[this.iRes] = iColor\n  }\n\n  get selected () {\n    return this.soup.residueSelect.get(this.iRes)\n  }\n\n  set selected (v) {\n    if (v) {\n      this.soup.residueSelect.set(this.iRes)\n    } else {\n      this.soup.residueSelect.clear(this.iRes)\n    }\n  }\n\n  get resType () {\n    let iResType = this.soup.residueStore.iResType[this.iRes]\n    return this.soup.resTypeTable[iResType]\n  }\n\n  get normal () {\n    let hasNormal = this.iRes in this.soup.residueNormal\n    return hasNormal ? this.soup.residueNormal[this.iRes].clone() : null\n  }\n\n  get ss () {\n    return intToChar(this.soup.residueStore.sstruc[this.iRes])\n  }\n\n  set ss (c) {\n    this.soup.residueStore.sstruc[this.iRes] = charToInt(c)\n  }\n\n  get label () {\n    let iResType = this.soup.residueStore.iResType[this.iRes]\n    let resType = this.soup.resTypeTable[iResType]\n    let label = this.soup.resIds[this.iRes] +\n      ':' + resType\n    return label\n  }\n\n  getAtomIndices () {\n    let iStart = this.soup.residueStore.atomOffset[this.iRes]\n    let n = this.soup.residueStore.atomCount[this.iRes]\n    let iEnd = iStart + n\n    return _.range(iStart, iEnd)\n  }\n\n  getAtomProxy (atomType) {\n    let atom = this.soup.getAtomProxy()\n    for (let iAtom of this.getAtomIndices()) {\n      atom.iAtom = iAtom\n      if (atom.atomType === atomType) {\n        return atom\n      }\n    }\n    return null\n  }\n\n  getIAtom (atomType) {\n    for (let iAtom of this.getAtomIndices()) {\n      let iAtomType = this.soup.atomStore.iAtomType[iAtom]\n      let testAatomType = this.soup.atomTypeTable[iAtomType]\n      if (testAatomType === atomType) {\n        return iAtom\n      }\n    }\n    return null\n  }\n\n  checkAtomTypes (atomTypes) {\n    for (let atomType of atomTypes) {\n      if (this.getIAtom(atomType) === null) {\n        return false\n      }\n    }\n    return true\n  }\n\n  isProteinConnectedToPrev () {\n    if (this.iRes === 0) {\n      return false\n    }\n\n    let thisRes = this\n    let prevRes = new ResidueProxy(this.soup, this.iRes - 1)\n\n    const proteinAtomTypes = ['CA', 'N', 'C']\n    if (prevRes.checkAtomTypes(proteinAtomTypes) &&\n      thisRes.checkAtomTypes(proteinAtomTypes)) {\n      let c = prevRes.getAtomProxy('C').pos\n      let n = thisRes.getAtomProxy('N').pos\n      if (v3.distance(c, n) < 2) {\n        return true\n      }\n    }\n\n    return false\n  }\n\n  isNucleotideConnectedToPrev () {\n    if (this.iRes === 0) {\n      return false\n    }\n\n    let thisRes = this\n    let prevRes = new ResidueProxy(this.soup, this.iRes - 1)\n\n    const nucleicAtomTypes = ['C3\\'', 'O3\\'', 'C5\\'', 'O4\\'', 'C1\\'']\n\n    if (prevRes.checkAtomTypes(nucleicAtomTypes) &&\n        thisRes.checkAtomTypes(nucleicAtomTypes) &&\n        thisRes.checkAtomTypes(['P'])) {\n      let o3 = prevRes.getAtomProxy('O3\\'').pos\n      let p = thisRes.getAtomProxy('P').pos\n      if (v3.distance(o3, p) < 2.5) {\n        return true\n      }\n    }\n    return false\n  }\n\n  isConnectedToPrev () {\n    return this.isProteinConnectedToPrev() || this.isNucleotideConnectedToPrev()\n  }\n\n  getNucleotideNormal () {\n    let c3 = this.getAtomProxy('C3\\'').pos\n    let c5 = this.getAtomProxy('C5\\'').pos\n    let c1 = this.getAtomProxy('C1\\'').pos\n    let forward = v3.diff(c3, c5)\n    let up = v3.diff(c1, c3)\n    return v3.crossProduct(forward, up)\n  }\n}\n\nconst bondStoreFields = [\n  ['iAtom1', 1, 'int32'],\n  ['iAtom2', 1, 'int32']\n]\n\nclass BondProxy {\n  constructor (soup, iBond) {\n    this.soup = soup\n    if (Number.isInteger(iBond)) {\n      this.load(iBond)\n    }\n  }\n\n  load (iBond) {\n    this.iBond = iBond\n    return this\n  }\n\n  get iAtom1 () {\n    return this.soup.bondStore.iAtom1[this.iBond]\n  }\n\n  get iAtom2 () {\n    return this.soup.bondStore.iAtom2[this.iBond]\n  }\n}\n\n/**\n * Soup: main data object that holds information\n * about protein structure. The soup will be\n * embedded in a SoupView that will handle\n * all the different viewing options.\n * Allowable mutations on the Soup\n * will be made via the Controller.\n */\nclass Soup {\n  constructor () {\n    this.parsingError = ''\n    this.title = ''\n\n    this.chains = []\n    this.atomStore = new Store(atomStoreFields)\n    this.residueStore = new Store(residueStoreFields)\n    this.bondStore = new Store(bondStoreFields)\n    this.resIds = []\n    this.residueNormal = {}\n\n    this.residueProxy = new ResidueProxy(this)\n    this.atomProxy = new AtomProxy(this)\n\n    this.atomSelect = new BitArray(0)\n    this.residueSelect = new BitArray(0)\n    this.bondSelect = new BitArray(0)\n\n    this.elemTable = []\n    this.atomTypeTable = []\n    this.resTypeTable = []\n    this.colorTable = []\n\n    this.grid = {\n      bCutoff: 0.8,\n      bMax: 2,\n      bMin: 0.4,\n      changed: true,\n      isElem: {}\n    }\n  }\n\n  load (pdbData) {\n    console.log(`Soup.load parse ${this.pdbId}...`)\n\n    this.parsePdbData(pdbData.pdb_text, this.pdbId)\n\n    this.assignResidueSsAndCentralAtoms()\n\n    console.log(\n      `Soup.load processed ${this.getAtomCount()} atoms, ` +\n      `${this.getResidueCount()} residues`)\n\n    console.log('Soup.load finding bonds...')\n    this.calcBondsStrategic()\n\n    console.log(`Soup.load calculated ${this.getBondCount()} bonds`)\n\n    this.calcMaxLength()\n\n    this.findSecondaryStructure()\n    console.log(`Soup.load calculated secondary-structure`)\n  }\n\n  parsePdbData (pdbText, pdbId) {\n    if (!this.pdbId) {\n      this.pdbId = pdbId\n      console.log('Set pdbId', this.pdbId)\n    }\n\n    if (!this.title) {\n      let title = parsetTitleFromPdbText(pdbText)\n      this.title = this.pdbId + ': ' + title\n    }\n\n    const pdbLines = pdbText.split(/\\r?\\n/)\n\n    let lines = []\n    for (let line of pdbLines) {\n      if ((line.slice(0, 4) === 'ATOM') ||\n        (line.slice(0, 6) === 'HETATM')) {\n        lines.push(line)\n      }\n      if (line.slice(0, 3) === 'END') {\n        break\n      }\n    }\n\n    if (lines.length === 0) {\n      this.parsingError = 'No atom lines'\n      return\n    }\n\n    let x, y, z, chain, resType\n    let atomType, bfactor, elem, alt, resNum, insCode\n\n    for (let iLine = 0; iLine < lines.length; iLine += 1) {\n      let line = lines[iLine]\n      if (line.substr(0, 4) === 'ATOM' || line.substr(0, 6) === 'HETATM') {\n        try {\n          atomType = _.trim(line.substr(12, 4))\n          alt = _.trim(line.substr(16, 1))\n          resType = _.trim(line.substr(17, 3))\n          chain = _.trim(line[21])\n          resNum = parseInt(line.substr(22, 4))\n          insCode = line.substr(26, 1)\n          x = parseFloat(line.substr(30, 7))\n          y = parseFloat(line.substr(38, 7))\n          z = parseFloat(line.substr(46, 7))\n          bfactor = parseFloat(line.substr(60, 6))\n          elem = deleteNumbers(_.trim(line.substr(76, 2)))\n        } catch (e) {\n          this.parsingError = 'line ' + iLine\n          console.log(`Error: \"${line}\"`)\n          continue\n        }\n\n        if (elem === '') {\n          elem = deleteNumbers(_.trim(atomType)).substr(0, 1)\n        }\n\n        this.addAtom(\n          x, y, z, bfactor, alt, atomType, elem,\n          resType, resNum, insCode, chain)\n      }\n    }\n  }\n\n  addAtom (x, y, z, bfactor, alt, atomType, elem, resType, resNum, insCode, chain) {\n    let iAtom = this.atomStore.count\n\n    this.atomStore.increment()\n\n    this.atomStore.x[iAtom] = x\n    this.atomStore.y[iAtom] = y\n    this.atomStore.z[iAtom] = z\n\n    this.atomStore.bfactor[iAtom] = bfactor\n    this.atomStore.alt[iAtom] = charToInt(alt)\n\n    this.atomStore.bondCount[iAtom] = 0\n\n    this.atomStore.iAtomType[iAtom] = getValueTableIndex(\n      this.atomTypeTable, atomType)\n\n    this.atomStore.iElem[iAtom] = getValueTableIndex(\n      this.elemTable, elem)\n\n    let nRes = this.getResidueCount()\n\n    let isNewRes = false\n    if (nRes === 0) {\n      isNewRes = true\n    } else {\n      this.residueProxy.iRes = nRes - 1\n      if (this.residueProxy.resNum !== resNum) {\n        isNewRes = true\n      } else if (this.residueProxy.insCode !== insCode) {\n        isNewRes = true\n      }\n    }\n\n    if (isNewRes) {\n      this.addResidue(iAtom, resNum, insCode, chain, resType)\n    }\n\n    let iRes = this.getResidueCount() - 1\n    this.residueStore.atomCount[iRes] += 1\n    this.atomStore.iRes[iAtom] = iRes\n  }\n\n  addResidue (iFirstAtomInRes, resNum, insCode, chain, resType) {\n    let iRes = this.getResidueCount()\n    this.residueStore.increment()\n\n    let resId = this.pdbId + ':'\n    if (chain) {\n      resId += chain + ':'\n    }\n    resId += resNum + _.trim(insCode)\n\n    this.resIds.push(resId)\n\n    let iChain = getValueTableIndex(this.chains, chain)\n    this.residueStore.iChain[iRes] = iChain\n\n    this.residueStore.resNum[iRes] = resNum\n    this.residueStore.insCode[iRes] = charToInt(insCode)\n\n    this.residueStore.iResType[iRes] = getValueTableIndex(\n      this.resTypeTable, resType)\n\n    this.residueStore.atomOffset[iRes] = iFirstAtomInRes\n    this.residueStore.atomCount[iRes] = 0\n  }\n\n  getAtomProxyOfCenter () {\n    let atomIndices = _.range(this.getAtomCount())\n    let center = this.getCenter(atomIndices)\n    let iAtom = this.getIAtomClosest(center, atomIndices)\n    return this.getAtomProxy(iAtom)\n  }\n\n  assignResidueSsAndCentralAtoms () {\n    let res = this.getResidueProxy()\n    for (let iRes = 0; iRes < this.getResidueCount(); iRes += 1) {\n      res.iRes = iRes\n\n      if (_.includes(data.proteinResTypes, res.resType)) {\n        res.iAtom = res.getIAtom('CA')\n        res.ss = 'C'\n        res.isPolymer = true\n      } else if (_.includes(data.dnaResTypes, res.resType) ||\n        _.includes(data.rnaResTypes, res.resType)) {\n        res.iAtom = res.getIAtom('C3\\'')\n        res.ss = 'D'\n        res.isPolymer = true\n      } else {\n        res.isPolymer = false\n        if (res.resType === 'HOH') {\n          // water\n          res.ss = 'W'\n        } else if (res.resType === 'XXX') {\n          // grid atom\n          res.ss = 'G'\n        } else {\n          res.ss = '-'\n        }\n        let center = this.getCenter(res.getAtomIndices())\n        res.iAtom = this.getIAtomClosest(center, res.getAtomIndices())\n      }\n    }\n    this.atomSelect = new BitArray(this.getAtomCount())\n    this.residueSelect = new BitArray(this.getResidueCount())\n  }\n\n  getIAtomClosest (pos, atomIndices) {\n    let iAtomClosest = null\n    let minD = 1E6\n    let atom = this.getAtomProxy()\n    for (let iAtom of atomIndices) {\n      if (iAtomClosest === null) {\n        iAtomClosest = iAtom\n      } else {\n        atom.iAtom = iAtom\n        let d = v3.distance(pos, atom.pos)\n        if (d < minD) {\n          iAtomClosest = iAtom\n          minD = d\n        }\n      }\n    }\n    return iAtomClosest\n  }\n\n  getCenter (atomIndices) {\n    let result = v3.create(0, 0, 0)\n    let atom = this.getAtomProxy()\n    for (let iAtom of atomIndices) {\n      result = v3.sum(result, atom.load(iAtom).pos)\n    }\n    result.divideScalar(atomIndices.length)\n    return result\n  }\n\n  /**\n   * TODO: replace with bounding box?\n   */\n  calcMaxLength () {\n    let maxima = [0.0, 0.0, 0.0]\n    let minima = [0.0, 0.0, 0.0]\n    let spans = [0.0, 0.0, 0.0]\n\n    function comp (v, i) {\n      if (i === 0) return v.x\n      if (i === 1) return v.y\n      if (i === 2) return v.z\n    }\n\n    let atom = this.getAtomProxy()\n    for (let iDim = 0; iDim < 3; iDim++) {\n      for (let iAtom = 0; iAtom < this.getAtomCount(); iAtom += 1) {\n        let pos = atom.load(iAtom).pos\n        if (minima[iDim] > comp(pos, iDim)) {\n          minima[iDim] = comp(pos, iDim)\n        }\n        if (maxima[iDim] < comp(pos, iDim)) {\n          maxima[iDim] = comp(pos, iDim)\n        }\n      }\n      spans[iDim] = maxima[iDim] - minima[iDim]\n    }\n    this.maxLength = Math.max(spans[0], spans[1], spans[2])\n  }\n\n  calcBondsStrategic () {\n    this.bondStore.count = 0\n\n    const smallCutoffSq = 1.2 * 1.2\n    const mediumCutoffSq = 1.9 * 1.9\n    const largeCutoffSq = 2.4 * 2.4\n    const CHONPS = ['C', 'H', 'O', 'N', 'P', 'S']\n\n    function isBonded (atom1, atom2) {\n      if ((atom1 === null) || (atom2 === null)) {\n        return false\n      }\n      // don't include bonds between different alt positions\n      if ((atom1.alt !== '') && (atom2.alt !== '')) {\n        if (atom1.alt !== atom2.alt) {\n          return false\n        }\n      }\n\n      let cutoffSq\n      if ((atom1.elem === 'H') || (atom2.elem === 'H')) {\n        cutoffSq = smallCutoffSq\n      } else if (\n        inArray(atom1.elem, CHONPS) &&\n        inArray(atom2.elem, CHONPS)) {\n        cutoffSq = mediumCutoffSq\n      } else {\n        cutoffSq = largeCutoffSq\n      }\n\n      let diffX = atom1.pos.x - atom2.pos.x\n      let diffY = atom1.pos.y - atom2.pos.y\n      let diffZ = atom1.pos.z - atom2.pos.z\n      let distSq = diffX * diffX + diffY * diffY + diffZ * diffZ\n      return distSq <= cutoffSq\n    }\n\n    let makeBond = (atom1, atom2) => {\n      let iBond = this.getBondCount()\n      this.bondStore.increment()\n      this.bondStore.iAtom1[iBond] = atom1.iAtom\n      this.bondStore.iAtom2[iBond] = atom2.iAtom\n\n      iBond = this.getBondCount()\n      this.bondStore.increment()\n      this.bondStore.iAtom1[iBond] = atom2.iAtom\n      this.bondStore.iAtom2[iBond] = atom1.iAtom\n    }\n\n    let residue1 = this.getResidueProxy()\n    let residue2 = this.getResidueProxy()\n    let nRes = this.getResidueCount()\n    let atom1 = this.getAtomProxy()\n    let atom2 = this.getAtomProxy()\n\n    for (let iRes1 = 0; iRes1 < nRes; iRes1++) {\n      residue2.iRes = iRes1\n\n      // cycle through all atoms within a residue\n      for (let iAtom1 of residue2.getAtomIndices()) {\n        for (let iAtom2 of residue2.getAtomIndices()) {\n          atom1.iAtom = iAtom1\n          atom2.iAtom = iAtom2\n          if (isBonded(atom1, atom2)) {\n            makeBond(atom1, atom2)\n          }\n        }\n      }\n    }\n\n    for (let iRes2 = 1; iRes2 < nRes; iRes2++) {\n      residue1.iRes = iRes2 - 1\n      residue2.iRes = iRes2\n      if (residue2.isProteinConnectedToPrev()) {\n        atom1.iAtom = residue1.getIAtom('C')\n        atom2.iAtom = residue2.getIAtom('N')\n      } else if (residue2.isNucleotideConnectedToPrev()) {\n        atom1.iAtom = residue1.getIAtom(`O3'`)\n        atom2.iAtom = residue2.getIAtom('P')\n      } else {\n        continue\n      }\n      makeBond(atom1, atom2)\n    }\n\n    // sort bonds by iAtom1\n    let iAtom1Array = this.bondStore.iAtom1\n    this.bondStore.sort((i, j) => iAtom1Array[i] - iAtom1Array[j])\n\n    // asign bonds to atoms\n    for (let iAtom = 0; iAtom < this.getAtomCount(); iAtom += 1) {\n      this.atomStore.bondCount[iAtom] = 0\n    }\n    let bond = this.getBondProxy()\n    let iAtom1 = null\n    for (let iBond = 0; iBond < this.getBondCount(); iBond += 1) {\n      bond.iBond = iBond\n      if (iAtom1 !== bond.iAtom1) {\n        iAtom1 = bond.iAtom1\n        this.atomStore.bondOffset[iAtom1] = iBond\n      }\n      this.atomStore.bondCount[iAtom1] += 1\n    }\n\n    this.bondSelect = new BitArray(this.getBondCount())\n  }\n\n  /**\n   * Identify backbone hydrogen bonds using a distance\n   * criteria between O and N atoms.\n   */\n  findBackboneHbonds () {\n    let residue = this.getResidueProxy()\n    let atom0 = this.getAtomProxy()\n    let atom1 = this.getAtomProxy()\n\n    // Collect backbone O and N atoms\n    let vertices = []\n    let atomIndices = []\n    for (let iRes = 0; iRes < this.getResidueCount(); iRes += 1) {\n      residue.iRes = iRes\n      if (residue.isPolymer) {\n        for (let aTypeName of ['O', 'N']) {\n          let iAtom = residue.getIAtom(aTypeName)\n          if (iAtom !== null) {\n            atom0.iAtom = iAtom\n            vertices.push([atom0.pos.x, atom0.pos.y, atom0.pos.z])\n            atomIndices.push(iAtom)\n          }\n        }\n      }\n    }\n\n    let result = []\n    let cutoff = 3.5\n    let spaceHash = new SpaceHash(vertices)\n    for (let pair of spaceHash.getClosePairs()) {\n      atom0.iAtom = atomIndices[pair[0]]\n      atom1.iAtom = atomIndices[pair[1]]\n      if ((atom0.elem === 'O') && (atom1.elem === 'N')) {\n        [atom0, atom1] = [atom1, atom0]\n      }\n      if (!((atom0.elem === 'N') && (atom1.elem === 'O'))) {\n        continue\n      }\n      let iRes0 = atom0.iRes\n      let iRes1 = atom1.iRes\n      if (iRes0 === iRes1) {\n        continue\n      }\n      if (v3.distance(atom0.pos, atom1.pos) <= cutoff) {\n        pushToListInDict(result, iRes0, iRes1)\n      }\n    }\n\n    this.conhPartners = result\n  }\n\n  /**\n   * Methods to calculate secondary-structure using Kabsch-Sanders\n   *\n   * Secondary Structure:\n   * - H - alpha-helix/3-10-helix\n   * - E - beta-sheet\n   * - C - coil\n   * - - - ligand\n   * - W - water\n   * - D - DNA or RNA\n   * - R - non-standard nucleotide\n   */\n  findSecondaryStructure () {\n    let conhPartners = this.conhPartners\n    let residueNormals = {}\n\n    let nRes = this.getResidueCount()\n    let residue0 = this.getResidueProxy()\n    let residue1 = this.getResidueProxy()\n\n    let atom0 = this.getAtomProxy()\n    let atom1 = this.getAtomProxy()\n\n    function isCONH (iRes0, iRes1) {\n      if ((iRes1 < 0) || (iRes1 >= nRes) || (iRes0 < 0) || (iRes0 >= nRes)) {\n        return false\n      }\n      return _.includes(conhPartners[iRes1], iRes0)\n    }\n\n    function vecBetweenResidues (iRes0, iRes1) {\n      atom0.iAtom = residue0.load(iRes0).iAtom\n      atom1.iAtom = residue1.load(iRes1).iAtom\n      return v3.diff(atom0.pos, atom1.pos)\n    }\n\n    // Collect ca atoms\n    let vertices = []\n    let atomIndices = []\n    let resIndices = []\n    for (let iRes = 0; iRes < this.getResidueCount(); iRes += 1) {\n      residue0.iRes = iRes\n      if (residue0.isPolymer && !(residue0.ss === 'D')) {\n        let iAtom = residue0.getIAtom('CA')\n        if (iAtom !== null) {\n          atom0.iAtom = iAtom\n          vertices.push([atom0.pos.x, atom0.pos.y, atom0.pos.z])\n          atomIndices.push(iAtom)\n          resIndices.push(iRes)\n        }\n      }\n    }\n\n    for (let iRes0 = 0; iRes0 < nRes; iRes0 += 1) {\n      residue0.iRes = iRes0\n\n      if (!residue0.isPolymer) {\n        continue\n      }\n\n      if (residue0.ss === 'D') {\n        pushToListInDict(\n          residueNormals, iRes0, residue0.getNucleotideNormal())\n        continue\n      }\n\n      // alpha-helix\n      if (isCONH(iRes0, iRes0 + 4) && isCONH(iRes0 + 1, iRes0 + 5)) {\n        let normal0 = vecBetweenResidues(iRes0, iRes0 + 4)\n        let normal1 = vecBetweenResidues(iRes0 + 1, iRes0 + 5)\n        for (let iRes1 = iRes0 + 1; iRes1 < iRes0 + 5; iRes1 += 1) {\n          residue0.load(iRes1).ss = 'H'\n          pushToListInDict(residueNormals, iRes1, normal0)\n          pushToListInDict(residueNormals, iRes1, normal1)\n        }\n      }\n\n      // 3-10 helix\n      if (isCONH(iRes0, iRes0 + 3) && isCONH(iRes0 + 1, iRes0 + 4)) {\n        let normal1 = vecBetweenResidues(iRes0, iRes0 + 3)\n        let normal2 = vecBetweenResidues(iRes0 + 1, iRes0 + 4)\n        for (let iRes1 = iRes0 + 1; iRes1 < iRes0 + 4; iRes1 += 1) {\n          residue0.load(iRes1).ss = 'H'\n          pushToListInDict(residueNormals, iRes1, normal1)\n          pushToListInDict(residueNormals, iRes1, normal2)\n        }\n      }\n    }\n\n    let betaResidues = []\n    let spaceHash = new SpaceHash(vertices)\n    for (let pair of spaceHash.getClosePairs()) {\n      let [iVertex0, iVertex1] = pair\n      let iRes0 = resIndices[iVertex0]\n      let iRes1 = resIndices[iVertex1]\n      if ((Math.abs(iRes0 - iRes1) <= 5)) {\n        continue\n      }\n      // parallel beta sheet pairs\n      if (isCONH(iRes0, iRes1 + 1) && isCONH(iRes1 - 1, iRes0)) {\n        betaResidues = betaResidues.concat([iRes0, iRes1])\n      }\n      if (isCONH(iRes0 - 1, iRes1) && isCONH(iRes1, iRes0 + 1)) {\n        betaResidues = betaResidues.concat([iRes0, iRes1])\n      }\n\n      // anti-parallel hbonded beta sheet pairs\n      if (isCONH(iRes0, iRes1) && isCONH(iRes1, iRes0)) {\n        betaResidues = betaResidues.concat([iRes0, iRes1])\n        let normal = vecBetweenResidues(iRes0, iRes1)\n        pushToListInDict(residueNormals, iRes0, normal)\n        pushToListInDict(residueNormals, iRes1, v3.scaled(normal, -1))\n      }\n\n      // anti-parallel non-hbonded beta sheet pairs\n      if (isCONH(iRes0 - 1, iRes1 + 1) && isCONH(iRes1 - 1, iRes0 + 1)) {\n        betaResidues = betaResidues.concat([iRes0, iRes1])\n        let normal = vecBetweenResidues(iRes0, iRes1)\n        pushToListInDict(residueNormals, iRes0, v3.scaled(normal, -1))\n        pushToListInDict(residueNormals, iRes1, normal)\n      }\n    }\n\n    for (let iRes of betaResidues) {\n      residue0.load(iRes).ss = 'E'\n    }\n\n    // average residueNormals to make a nice average\n    for (let iRes = 0; iRes < nRes; iRes += 1) {\n      if ((iRes in residueNormals) && (residueNormals[iRes].length > 0)) {\n        let normalSum = v3.create(0, 0, 0)\n        for (let normal of residueNormals[iRes]) {\n          normalSum = v3.sum(normalSum, normal)\n        }\n        this.residueNormal[iRes] = v3.normalized(normalSum)\n      }\n    }\n\n    // flip every second beta-strand normal so they are\n    // consistently pointing in the same direction\n    for (let iRes = 1; iRes < nRes; iRes += 1) {\n      residue0.iRes = iRes - 1\n      residue1.iRes = iRes\n      if ((residue0.ss === 'E') && residue0.normal) {\n        if ((residue1.ss === 'E') && residue1.normal) {\n          if (residue1.normal.dot(residue0.normal) < 0) {\n            this.residueNormal[iRes].negate()\n          }\n        }\n      }\n    }\n  }\n\n  getAtomProxy (iAtom) {\n    return new AtomProxy(this, iAtom)\n  }\n\n  getAtomCount () {\n    return this.atomStore.count\n  }\n\n  getResidueProxy (iRes) {\n    return new ResidueProxy(this, iRes)\n  }\n\n  getCurrentResidueProxy (iRes) {\n    return this.residueProxy.load(iRes)\n  }\n\n  getBondProxy (iBond) {\n    return new BondProxy(this, iBond)\n  }\n\n  getBondCount () {\n    return this.bondStore.count\n  }\n\n  getResidueCount () {\n    return this.residueStore.count\n  }\n\n  areCloseResidues (iRes0, iRes1) {\n    let atom0 = this.getAtomProxy()\n    let atom1 = this.getAtomProxy()\n\n    let res0 = this.getResidueProxy(iRes0)\n    let pos0 = atom0.load(res0.iAtom).pos.clone()\n    let atomIndices0 = res0.getAtomIndices()\n\n    let res1 = this.getResidueProxy(iRes1)\n    let pos1 = atom1.load(res1.iAtom).pos.clone()\n    let atomIndices1 = res1.getAtomIndices()\n\n    if (v3.distance(pos0, pos1) > 17) {\n      return false\n    }\n\n    for (let iAtom0 of atomIndices0) {\n      for (let iAtom1 of atomIndices1) {\n        if (v3.distance(atom0.load(iAtom0).pos, atom1.load(iAtom1).pos) < 4) {\n          return true\n        }\n      }\n    }\n    return false\n  }\n\n  clearSelectedResidues () {\n    this.residueSelect.clearBits()\n  }\n\n  selectResidues (residueIndices, select) {\n    let residue = this.getResidueProxy()\n    for (let iRes of residueIndices) {\n      residue.load(iRes).selected = select\n    }\n  }\n\n  selectNeighbourResidues (iRes, selected) {\n    let indices = [iRes]\n    for (let jRes = 0; jRes < this.getResidueCount(); jRes += 1) {\n      if (this.areCloseResidues(jRes, iRes)) {\n        indices.push(jRes)\n      }\n    }\n    this.selectResidues(indices, selected)\n  }\n\n  /**\n   * Searches autodock grid atoms for B-factor limits\n   */\n  findGridLimits () {\n    let residue = this.getResidueProxy()\n    let atom = this.getAtomProxy()\n    for (let iRes = 0; iRes < this.getResidueCount(); iRes += 1) {\n      residue.iRes = iRes\n      if (residue.ss === 'G') {\n        atom.iAtom = residue.iAtom\n        if (!(atom.elem in this.grid.isElem)) {\n          this.grid.isElem[atom.elem] = true\n        }\n        if (this.grid.bMin === null) {\n          this.grid.bMin = atom.bfactor\n          this.grid.bMax = atom.bfactor\n        } else {\n          if (atom.bfactor > this.grid.bMax) {\n            this.grid.bMax = atom.bfactor\n          }\n          if (atom.bfactor < this.grid.bMin) {\n            this.grid.bMin = atom.bfactor\n          }\n        }\n      }\n    }\n\n    if (this.grid.bMin === null) {\n      this.grid.bMin = 0\n    }\n    if (this.grid.bMax === null) {\n      this.grid.bMin = 0\n    }\n    this.grid.bCutoff = this.grid.bMin\n  }\n}\n\n/**\n * View\n * ----\n * A view includes all pertinent viewing options\n * needed to render the soup in the way\n * for the user.\n *\n * cameraParams stores the direction and zoom that a soup\n * should be viewed:\n * cameraParams {\n *   focus: position that cameraParams is looking at\n *   position: position of cameraParams - distance away gives zoom\n *   up: vector direction denoting the up direction of cameraParams\n *   zFront: clipping plane in front of the cameraParams focus\n *   zBack: clipping plane behind the cameraParams focus\n * }\n *\n * OpenGL notes:\n *   - box is -1 to 1 that gets projected on screen + perspective\n *   - x right -> left\n *   - y bottom -> top (inverse of classic 2D coordinate)\n *   - z far -> near\n *   - that is positive Z direction is out of the screen\n *   - box -1 to +1\n */\nclass View {\n  constructor () {\n    this.id = 'view:000000'\n    this.iAtom = -1\n    this.order = 1\n    this.cameraParams = {\n      focus: v3.create(0, 0, 0),\n      position: v3.create(0, 0, -1),\n      up: v3.create(0, 1, 0),\n      zFront: 0,\n      zBack: 0,\n      zoom: 1\n    }\n    this.selected = []\n    this.labels = []\n    this.distances = []\n    this.text = 'Default view of PDB file'\n    this.creator = ''\n    this.url = getWindowUrl()\n    this.show = {\n      sidechain: true,\n      peptide: true,\n      hydrogen: false,\n      water: false,\n      ligands: true,\n      trace: true,\n      backboneAtom: false,\n      ribbon: false\n    }\n  }\n\n  setCamera (cameraParams) {\n    this.cameraParams = cameraParams\n  }\n\n  makeDefaultOfSoup (soup) {\n    let atom = soup.getAtomProxyOfCenter()\n    this.iAtom = atom.iAtom\n\n    this.show.sidechain = false\n\n    this.cameraParams.zFront = -soup.maxLength / 2\n    this.cameraParams.zBack = soup.maxLength / 2\n    this.cameraParams.zoom = Math.abs(soup.maxLength) * 1.75\n    this.cameraParams.up = v3.create(0, 1, 0)\n    this.cameraParams.focus.copy(atom.pos)\n    this.cameraParams.position = v3\n      .create(0, 0, -this.cameraParams.zoom).add(atom.pos)\n\n    this.order = 0\n    this.text = soup.title\n    this.pdb_id = soup.pdbId\n  }\n\n  getViewTranslatedTo (pos) {\n    let view = this.clone()\n    let disp = pos.clone().sub(view.cameraParams.focus)\n    view.cameraParams.focus.copy(pos)\n    view.cameraParams.position.add(disp)\n    return view\n  }\n\n  clone () {\n    let v = new View()\n    v.id = this.id\n    v.iAtom = this.iAtom\n    v.selected = this.selected\n    v.labels = _.cloneDeep(this.labels)\n    v.distances = _.cloneDeep(this.distances)\n    v.order = this.order\n    v.text = this.text\n    v.time = this.time\n    v.url = this.url\n    v.cameraParams = _.cloneDeep(this.cameraParams)\n    v.show = _.cloneDeep(this.show)\n    return v\n  }\n\n  getDict () {\n    // version 2.0 camera dict structure {\n    //    pos: soupView center, cameraParams focus\n    //    up: gives the direction of the y vector from pos\n    //    in: gives the positive z-axis direction\n    //    zFront: clipping plane in front of the cameraParams focus\n    //    zBack: clipping plane behind the cameraParams focus\n    // }\n    let cameraDir = this.cameraParams.focus.clone()\n      .sub(this.cameraParams.position)\n    let zoom = cameraDir.length()\n    cameraDir.normalize()\n    let pos = this.cameraParams.focus\n    let inV = pos.clone().add(cameraDir)\n    let upV = pos.clone().sub(this.cameraParams.up)\n\n    let show = _.clone(this.show)\n    show.all_atom = show.backboneAtom\n    delete show.backboneAtom\n\n    return {\n      version: 2,\n      view_id: this.id,\n      creator: this.creator,\n      pdb_id: this.pdb_id,\n      order: this.order,\n      show: this.show,\n      text: this.text,\n      i_atom: this.iAtom,\n      labels: this.labels,\n      selected: this.selected,\n      distances: this.distances,\n      camera: {\n        slab: {\n          z_front: this.cameraParams.zFront,\n          z_back: this.cameraParams.zBack,\n          zoom: zoom\n        },\n        pos: [pos.x, pos.y, pos.z],\n        up: [upV.x, upV.y, upV.z],\n        in: [inV.x, inV.y, inV.z]\n      }\n    }\n  }\n\n  setFromDict (flatDict) {\n    this.id = flatDict.view_id\n    this.view_id = flatDict.view_id\n    this.pdb_id = flatDict.pdb_id\n    this.lock = flatDict.lock\n    this.text = flatDict.text\n    this.creator = flatDict.creator\n    this.order = flatDict.order\n    this.res_id = flatDict.res_id\n    this.iAtom = flatDict.i_atom\n\n    this.labels = flatDict.labels\n    this.selected = flatDict.selected\n    this.distances = flatDict.distances\n\n    this.show = flatDict.show\n    this.show.backboneAtom = flatDict.show.all_atom\n    delete this.show.all_atom\n\n    if (!(this.show.backboneAtom || this.show.trace || this.show.ribbon)) {\n      this.show.ribbon = true\n    }\n\n    let pos = v3.create(\n      flatDict.camera.pos[0],\n      flatDict.camera.pos[1],\n      flatDict.camera.pos[2])\n\n    let upV = v3.create(\n      flatDict.camera.up[0],\n      flatDict.camera.up[1],\n      flatDict.camera.up[2])\n\n    let inV = v3.create(\n      flatDict.camera.in[0],\n      flatDict.camera.in[1],\n      flatDict.camera.in[2])\n\n    let zoom = flatDict.camera.slab.zoom\n\n    let focus = v3.clone(pos)\n\n    let cameraDirection = v3\n      .clone(inV)\n      .sub(focus)\n      .multiplyScalar(zoom)\n      .negate()\n\n    let position = v3\n      .clone(focus).add(cameraDirection)\n\n    let up = v3\n      .clone(upV)\n      .sub(focus)\n      .negate()\n\n    this.cameraParams = {\n      focus: focus,\n      position: position,\n      up: up,\n      zFront: flatDict.camera.slab.z_front,\n      zBack: flatDict.camera.slab.z_back,\n      zoom: zoom\n    }\n  }\n}\n\nfunction interpolateCameras (oldCamera, futureCamera, t) {\n  let oldCameraDirection = oldCamera.position.clone()\n    .sub(oldCamera.focus)\n  let oldZoom = oldCameraDirection.length()\n  oldCameraDirection.normalize()\n\n  let futureCameraDirection =\n    futureCamera.position.clone().sub(futureCamera.focus)\n\n  let futureZoom = futureCameraDirection.length()\n  futureCameraDirection.normalize()\n\n  let cameraDirRotation = glgeom.getUnitVectorRotation(\n    oldCameraDirection, futureCameraDirection)\n\n  let partialRotatedCameraUp = oldCamera.up.clone()\n    .applyQuaternion(cameraDirRotation)\n\n  let fullCameraUpRotation = glgeom\n    .getUnitVectorRotation(partialRotatedCameraUp, futureCamera.up)\n    .multiply(cameraDirRotation)\n  let cameraUpRotation = glgeom.getFractionRotation(\n    fullCameraUpRotation, t)\n\n  let focusDisp = futureCamera.focus.clone()\n    .sub(oldCamera.focus)\n    .multiplyScalar(t)\n\n  let focus = oldCamera.focus.clone().add(focusDisp)\n\n  let zoom = glgeom.fraction(oldZoom, futureZoom, t)\n\n  let focusToPosition = oldCameraDirection.clone()\n    .applyQuaternion(cameraUpRotation)\n    .multiplyScalar(zoom)\n\n  return {\n    focus: focus,\n    position: focus.clone().add(focusToPosition),\n    up: oldCamera.up.clone().applyQuaternion(cameraUpRotation),\n    zFront: glgeom.fraction(oldCamera.zFront, futureCamera.zFront, t),\n    zBack: glgeom.fraction(oldCamera.zBack, futureCamera.zBack, t),\n    zoom: zoom\n  }\n}\n\n/**\n * The SoupView contains a soup and a list of\n * views of the soup, including the current\n * view, and a target view for animation\n */\nclass SoupView {\n  constructor (soup) {\n    // the soup data for the soupView\n    this.soup = soup\n\n    this.changed = true\n\n    // stores the current cameraParams, display\n    // options, distances, labels, selected\n    // residues\n    this.currentView = new View()\n\n    // stores other views that can be reloaded\n    this.savedViewsByViewId = {}\n    this.savedViews = []\n    this.iLastViewSelected = 0\n\n    // stores a target view for animation\n    this.targetView = null\n\n    // timing counter that is continually decremented\n    // until it becomes negative\n    this.nUpdateStep = -1\n\n    // this is to set the time between transitions of views\n    this.maxUpdateStep = 20\n\n    this.updateResidueSelection = false\n    this.updateView = true\n  }\n\n  initViewsAfterSoupLoad () {\n    if (this.savedViews.length === 0) {\n      this.currentView.makeDefaultOfSoup(this.soup)\n      this.saveView(this.currentView)\n      this.changed = true\n    }\n  }\n\n  setTargetView (view) {\n    this.nUpdateStep = this.maxUpdateStep\n    this.targetView = view.clone()\n    this.updateView = true\n  }\n\n  getCenteredAtom () {\n    let iAtom = this.currentView.iAtom\n    return this.soup.getAtomProxy(iAtom)\n  }\n\n  getIViewFromViewId (viewId) {\n    for (let iView = 0; iView < this.savedViews.length; iView += 1) {\n      if (this.savedViews[iView].id === viewId) {\n        return iView\n      }\n    }\n    return -1\n  }\n\n  insertView (iView, newViewId, newView) {\n    this.savedViewsByViewId[newViewId] = newView\n    if (iView >= this.savedViews.length) {\n      this.savedViews.push(newView)\n    } else {\n      this.savedViews.splice(iView, 0, newView)\n    }\n    this.iLastViewSelected = iView\n    for (let i = 0; i < this.savedViews.length; i++) {\n      this.savedViews[i].order = i\n    }\n  }\n\n  removeView (viewId) {\n    let iView = this.getIViewFromViewId(viewId)\n    if (iView < 0) {\n      return\n    }\n    this.savedViews.splice(iView, 1)\n    delete this.savedViewsByViewId[viewId]\n    for (let j = 0; j < this.savedViews.length; j++) {\n      this.savedViews[j].order = j\n    }\n    if (this.iLastViewSelected >= this.savedViews.length) {\n      this.iLastViewSelected = this.savedViews.length - 1\n    }\n    this.changed = true\n  }\n\n  saveView (view) {\n    this.savedViewsByViewId[view.id] = view\n    this.savedViews.push(view)\n  }\n}\n\n/**\n * The Controller for SoupView. All mutations\n * to a Soup and its Views go through here.\n */\nclass Controller {\n  constructor (scene) {\n    this.soup = scene.soup\n    this.soupView = scene\n  }\n\n  deleteDistance (iDistance) {\n    this.soupView.currentView.distances.splice(iDistance, 1)\n    this.soupView.changed = true\n  }\n\n  makeDistance (iAtom1, iAtom2) {\n    this.soupView.currentView.distances.push({i_atom1: iAtom1, i_atom2: iAtom2})\n    this.soupView.changed = true\n  }\n\n  makeAtomLabel (iAtom, text) {\n    this.soupView.currentView.labels.push({i_atom: iAtom, text})\n    this.soupView.changed = true\n  }\n\n  deleteAtomLabel (iLabel) {\n    this.soupView.currentView.labels.splice(iLabel, 1)\n    this.soupView.changed = true\n  }\n\n  setTargetView (view) {\n    this.soupView.setTargetView(view)\n  }\n\n  setTargetViewByViewId (viewId) {\n    let view = this.soupView.savedViewsByViewId[viewId]\n    this.soupView.iLastViewSelected = this.soupView.savedViewsByViewId[viewId].order\n    this.setTargetView(view)\n  }\n\n  setTargetViewByAtom (iAtom) {\n    let atom = this.soup.getAtomProxy(iAtom)\n    let view = this.soupView.currentView.getViewTranslatedTo(atom.pos)\n    view.iAtom = iAtom\n    this.setTargetView(view)\n  }\n\n  setTargetToPrevResidue () {\n    let iAtom = this.soupView.currentView.iAtom\n    let iRes = this.soup.getAtomProxy(iAtom).iRes\n    if (iRes <= 0) {\n      iRes = this.soup.getResidueCount() - 1\n    } else {\n      iRes -= 1\n    }\n    iAtom = this.soup.getResidueProxy(iRes).iAtom\n    this.setTargetViewByAtom(iAtom)\n  }\n\n  setTargetToNextResidue () {\n    let iAtom = this.soupView.currentView.iAtom\n    let iRes = this.soup.getAtomProxy(iAtom).iRes\n    if (iRes >= this.soup.getResidueCount() - 1) {\n      iRes = 0\n    } else {\n      iRes += 1\n    }\n    iAtom = this.soup.getResidueProxy(iRes).iAtom\n    this.setTargetViewByAtom(iAtom)\n  }\n\n  setTargetToPrevView () {\n    let scene = this.soupView\n    scene.iLastViewSelected -= 1\n    if (scene.iLastViewSelected < 0) {\n      scene.iLastViewSelected = scene.savedViews.length - 1\n    }\n    let id = scene.savedViews[scene.iLastViewSelected].id\n    this.setTargetViewByViewId(id)\n    return id\n  }\n\n  setTargetToNextView () {\n    let scene = this.soupView\n    scene.iLastViewSelected += 1\n    if (scene.iLastViewSelected >= scene.savedViews.length) {\n      scene.iLastViewSelected = 0\n    }\n    let id = scene.savedViews[scene.iLastViewSelected].id\n    this.setTargetViewByViewId(id)\n    return id\n  }\n\n  swapViews (i, j) {\n    this.soupView.savedViews[j].order = i\n    this.soupView.savedViews[i].order = j\n    let dummy = this.soupView.savedViews[j]\n    this.soupView.savedViews[j] = this.soupView.savedViews[i]\n    this.soupView.savedViews[i] = dummy\n  }\n\n  getViewDicts () {\n    let viewDicts = []\n    for (let i = 1; i < this.soupView.savedViews.length; i += 1) {\n      viewDicts.push(this.soupView.savedViews[i].getDict())\n    }\n    return viewDicts\n  }\n\n  makeSelectedResidueList () {\n    let result = []\n    let residue = this.soup.getResidueProxy()\n    for (let i = 0; i < this.soup.getResidueCount(); i += 1) {\n      if (residue.load(i).selected) {\n        result.push(i)\n      }\n    }\n    return result\n  }\n\n  clearSelectedResidues () {\n    this.soup.clearSelectedResidues()\n    this.soupView.currentView.selected = this.makeSelectedResidueList()\n    this.soupView.changed = true\n  }\n\n  selectResidue (iRes, select) {\n    this.soup.getResidueProxy(iRes).selected = select\n    this.soupView.currentView.selected = this.makeSelectedResidueList()\n    this.soupView.changed = true\n  }\n\n  toggleResidueNeighbors () {\n    let iAtom = this.soupView.currentView.iAtom\n    let iRes = this.soup.getAtomProxy(iAtom).iRes\n    let b\n    if (this.lastNeighborIRes === iRes) {\n      b = false\n      this.lastNeighborIRes = null\n    } else {\n      b = true\n      this.lastNeighborIRes = iRes\n    }\n    this.soup.selectNeighbourResidues(iRes, b)\n    this.soupView.currentView.selected = this.makeSelectedResidueList()\n    this.soupView.changed = true\n    this.soupView.updateResidueSelection = true\n  }\n\n  saveCurrentView (newViewId) {\n    let iNewView = this.soupView.iLastViewSelected + 1\n    let newView = this.soupView.currentView.clone()\n    newView.text = 'Click edit to change this text.'\n    newView.pdb_id = this.soup.pdb_id\n    let time = getCurrentDateStr()\n    if (user === '' || typeof user === 'undefined') {\n      newView.creator = '~ [public] @' + time\n    } else {\n      newView.creator = '~ ' + user + ' @' + time\n    }\n    newView.id = newViewId\n    newView.selected = this.makeSelectedResidueList()\n    this.soupView.insertView(iNewView, newViewId, newView)\n    return iNewView\n  }\n\n  deleteView (viewId) {\n    this.soupView.removeView(viewId)\n  }\n\n  sortViewsByOrder () {\n    function orderSort (a, b) {\n      return a.order - b.order\n    }\n\n    this.soupView.savedViews.sort(orderSort)\n    for (let i = 0; i < this.soupView.savedViews.length; i += 1) {\n      this.soupView.savedViews[i].order = i\n    }\n  }\n\n  loadViewsFromViewDicts (viewDicts) {\n    for (let i = 0; i < viewDicts.length; i += 1) {\n      let view = new View()\n      view.setFromDict(viewDicts[i])\n      if (view.id === 'view:000000') {\n        continue\n      }\n      this.soupView.saveView(view)\n    }\n    this.sortViewsByOrder()\n  }\n\n  setBackboneOption (option) {\n    this.soupView.currentView.show.backboneAtom = false\n    this.soupView.currentView.show.trace = false\n    this.soupView.currentView.show.ribbon = false\n    this.soupView.currentView.show[option] = true\n    this.soupView.changed = true\n  }\n\n  setShowOption (option, bool) {\n    console.log('Controller.setShowOption', option, bool)\n    this.soupView.currentView.show[option] = bool\n    if (option === 'sidechain') {\n      this.soupView.updateResidueSelection = true\n    }\n    this.soupView.changed = true\n  }\n\n  getShowOption (option) {\n    return this.soupView.currentView.show[option]\n  }\n\n  toggleShowOption (option) {\n    let val = this.getShowOption(option)\n    this.setShowOption(option, !val)\n  }\n\n  setChangeFlag () {\n    this.soupView.changed = true\n  }\n\n  setCurrentView (view) {\n    this.soupView.currentView = view.clone()\n    this.soupView.soup.clearSelectedResidues()\n    this.soupView.soup.selectResidues(view.selected, true)\n    this.soupView.changed = true\n  }\n}\n\nexport {\n  Soup,\n  Controller,\n  interpolateCameras,\n  SoupView\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/jolecule/soup.js","/**\n * Widget interface\n *\n * decorated graphical objects on top of ProteinDisplay that are a hybrid\n * of HTML DOM elements and WebGL elements such as lines, atom labels,\n * distance measures, sequence bars, z-slab control, grid controls\n *\n * this.reset - called after model rebuild\n * this.draw - called at every draw event\n * this.resize - called after every resize of window\n */\n\nimport $ from 'jquery'\nimport * as THREE from 'three'\nimport _ from 'lodash'\n\nimport * as data from './data'\nimport * as util from './util'\n\n/**\n * LineElement\n * - instantiates a DOM object is to draw a line between (x1, y1) and\n *   (x2, y2) within a jquery div\n * - used to display the mouse tool for making distance labels\n */\n\nclass LineElement {\n  constructor (display, color) {\n    this.color = color\n\n    this.div = $('<canvas>')\n      .css({\n        'position': 'absolute',\n        'z-index': '1000',\n        'display': 'none',\n        'pointer-events': 'none'\n      })\n\n    this.canvas = this.div[0]\n    this.context2d = this.canvas.getContext('2d')\n\n    this.parentDiv = $(display.divTag)\n    this.parentDiv.append(this.div)\n  }\n\n  hide () {\n    this.div.css('display', 'none')\n  }\n\n  move (x1, y1, x2, y2) {\n    let parentDivPos = this.parentDiv.position()\n\n    let width = Math.abs(x1 - x2)\n    let height = Math.abs(y1 - y2)\n\n    let left = Math.min(x1, x2)\n    let top = Math.min(y1, y2)\n\n    this.div\n      .css('display', 'block')\n      .css('width', width)\n      .css('height', height)\n      .css('top', top + parentDivPos.top)\n      .css('left', left + parentDivPos.left)\n\n    this.canvas.width = width\n    this.canvas.height = height\n\n    this.context2d.clearRect(0, 0, width, height)\n    this.context2d.beginPath()\n    this.context2d.moveTo(x1 - left, y1 - top)\n    this.context2d.lineTo(x2 - left, y2 - top)\n    this.context2d.lineWidth = 2\n    this.context2d.strokeStyle = this.color\n    this.context2d.stroke()\n  }\n}\n\n/**\n * CanvasWrapper\n *   - abstract class to wrap a canvas element\n *   - instantiates an absolute div that fits the $(selector)\n *   - attaches a canvas to this div\n *   - creates methods that redirects mouse commands to that canvas\n */\n\nclass CanvasWrapper {\n  constructor (selector) {\n    this.parentDiv = $(selector)\n\n    this.div = $('<div>')\n      .css('position', 'absolute')\n      .css('z-index', 100)\n\n    this.parentDiv.append(this.div)\n\n    this.canvas = $('<canvas>')\n\n    this.div.append(this.canvas)\n    this.canvasDom = this.canvas[0]\n    this.drawContext = this.canvasDom.getContext('2d')\n\n    this.mousePressed = false\n    const dom = this.canvasDom\n    const bind = (ev, fn) => {\n      dom.addEventListener(ev, fn)\n    }\n    bind('mousedown', e => this.mousedown(e))\n    bind('mousemove', e => this.mousemove(e))\n    bind('mouseup', e => this.mouseup(e))\n    bind('mouseout', e => this.mouseup(e))\n    bind('touchstart', e => this.mousedown(e))\n    bind('touchmove', e => this.mousemove(e))\n    bind('touchend', e => this.mouseup(e))\n    bind('touchcancel', e => this.mouseup(e))\n  }\n\n  width () {\n    return this.parentDiv.width()\n  }\n\n  height () {\n    return this.parentDiv.height()\n  }\n\n  x () {\n    let parentDivPos = this.parentDiv.position()\n    return parentDivPos.left\n  }\n\n  y () {\n    let parentDivPos = this.parentDiv.position()\n    return parentDivPos.top\n  }\n\n  inside (x, y) {\n    return (\n      (x >= this.x()) &&\n      (x <= this.x() + this.width()) &&\n      (y >= this.y()) &&\n      (y <= this.y() + this.height()))\n  }\n\n  draw () {\n  }\n\n  resize () {\n    this.canvasDom.width = this.width()\n    this.canvasDom.height = this.height()\n  }\n\n  strokeRect (x, y, w, h, strokeStyle) {\n    this.drawContext.strokeStyle = strokeStyle\n    this.drawContext.strokeRect(x, y, w, h)\n  }\n\n  fillRect (x, y, w, h, fillStyle) {\n    this.drawContext.fillStyle = fillStyle\n    this.drawContext.fillRect(x, y, w, h)\n  }\n\n  line (x1, y1, x2, y2, lineWidth, color) {\n    this.drawContext.moveTo(x1, y1)\n    this.drawContext.lineTo(x2, y2)\n    this.drawContext.lineWidth = lineWidth\n    this.drawContext.strokeStyle = color\n    this.drawContext.stroke()\n  }\n\n  text (text, x, y, font, color, align) {\n    this.drawContext.fillStyle = color\n    this.drawContext.font = font\n    this.drawContext.textAlign = align\n    this.drawContext.textBaseline = 'middle'\n    this.drawContext.fillText(text, x, y)\n  }\n\n  textWidth (text, font) {\n    this.drawContext.font = font\n    this.drawContext.textAlign = 'center'\n    return this.drawContext.measureText(text).width\n  }\n\n  mousedown (event) {\n    event.preventDefault()\n\n    this.mousePressed = true\n\n    this.mousemove(event)\n  }\n\n  mousemove (event) {\n  }\n\n  mouseup (event) {\n    event.preventDefault()\n\n    this.mousePressed = false\n  }\n\n  getPointer (event) {\n    let rect = event.target.getBoundingClientRect()\n    this.pointerX = event.clientX - rect.left\n    this.pointerY = event.clientY - rect.top\n  }\n}\n\n/**\n * PopupText is a little blob of text with a down\n * arrow that can be displayed in a (x, y) position\n * within a parent div denoted by selector\n */\n\nclass PopupText {\n  constructor (divTag) {\n    this.div = $('<div>')\n      .css({\n        'position': 'absolute',\n        'top': 0,\n        'left': 0,\n        'background': 'white',\n        'padding': '5',\n        'opacity': 0.7,\n        'display': 'none',\n        'pointer-events': 'none'\n      })\n\n    this.arrow = $('<div>')\n      .css({\n        'position': 'absolute',\n        'top': 0,\n        'left': 0,\n        'width': 0,\n        'height': 0,\n        'border-left': '5px solid transparent',\n        'border-right': '5px solid transparent',\n        'border-top': '50px solid white',\n        'opacity': 0.7,\n        'display': 'none',\n        'pointer-events': 'none'\n      })\n\n    this.parentDiv = $(divTag)\n    this.parentDiv.append(this.div)\n    this.parentDiv.append(this.arrow)\n  }\n\n  move (x, y) {\n    let parentDivPos = this.parentDiv.position()\n    let width = this.div.innerWidth()\n    let height = this.div.innerHeight()\n\n    if (\n      (x < 0) ||\n      (x > this.parentDiv.width()) ||\n      (y < 0) ||\n      (y > this.parentDiv.height())) {\n      this.hide()\n      return\n    }\n\n    this.div.css({\n      'top': y - height - 50 + 10 + parentDivPos.top,\n      'left': x - width / 2 + parentDivPos.left,\n      'display': 'block',\n      'font-family': 'sans-serif',\n      'cursor': 'pointer'\n    })\n\n    this.arrow.css({\n      'top': y - 50 + parentDivPos.top,\n      'left': x - 5 + parentDivPos.left,\n      'display': 'block'\n    })\n  }\n\n  hide () {\n    this.div.css('display', 'none')\n    this.arrow.css('display', 'none')\n  }\n\n  html (text) {\n    this.div.html(text)\n  }\n\n  remove () {\n    this.div.remove()\n    this.arrow.remove()\n  }\n}\n\n/**\n * A set of pop-up text labels over specified atoms, rendered as\n * DIV text on the DOM on top of Display but using opacity\n * of the given z position of the associated atoms\n */\nclass AtomLabelsWidget {\n  constructor (display) {\n    this.display = display\n    this.soupView = display.soupView\n    this.controller = display.controller\n    this.popups = []\n  }\n\n  removePopup (i) {\n    this.popups[i].remove()\n    this.popups.splice(i, 1)\n    this.controller.deleteAtomLabel(i)\n  }\n\n  createPopup (i) {\n    let popup = new PopupText(this.display.divTag)\n    popup.div.click(() => { this.removePopup(i) })\n    return popup\n  }\n\n  draw () {\n    let labels = this.soupView.currentView.labels\n\n    if (labels.length > this.popups.length) {\n      for (let i = this.popups.length; i < labels.length; i += 1) {\n        this.popups.push(this.createPopup(i))\n      }\n    }\n\n    if (this.popups.length > labels.length) {\n      for (let i = this.popups.length - 1; i >= labels.length; i -= 1) {\n        this.removePopup(i)\n      }\n    }\n\n    let atom = this.soupView.soup.getAtomProxy()\n    for (let i = 0; i < labels.length; i += 1) {\n      atom.iAtom = labels[i].i_atom\n\n      this.popups[i].html(labels[i].text)\n\n      let opacity = 0.7 * this.display.opacity(atom.pos) + 0.2\n      this.popups[i].div.css('opacity', opacity)\n      this.popups[i].arrow.css('opacity', opacity)\n\n      let v = this.display.posXY(atom.pos)\n      this.popups[i].move(v.x, v.y)\n\n      if (!this.display.inZlab(atom.pos)) {\n        this.popups[i].div.css('display', 'none')\n        this.popups[i].arrow.css('display', 'none')\n      }\n    }\n  }\n}\n\n/**\n * Collection of inter-atomic distances to be displayed\n * using a combination of opaque canvas lines and text div\n * tags\n */\nclass DistanceMeasuresWidget {\n  constructor (display) {\n    this.distanceMeasures = []\n    this.scene = display.displayScene\n    this.soupView = display.soupView\n    this.controller = display.controller\n    this.display = display\n    this.parentDiv = $(this.display.divTag)\n  }\n\n  removeDistance (i) {\n    this.scene.remove(this.distanceMeasures[i].line)\n    this.distanceMeasures[i].div.remove()\n    this.controller.deleteDistance(i)\n    this.distanceMeasures.splice(i, 1)\n  }\n\n  createDistanceMeasure (i) {\n    let div = $('<div>')\n      .css({\n        'position': 'absolute',\n        'top': 0,\n        'left': 0,\n        'background-color': '#FFDDDD',\n        'padding': '5',\n        'opacity': 0.7,\n        'font-family': 'sans-serif'\n      })\n    div.click(() => { this.removeDistance(i) })\n    this.parentDiv.append(div)\n\n    let geometry = new THREE.Geometry()\n    geometry.vertices.push(new THREE.Vector3(0, 0, 0))\n    geometry.vertices.push(new THREE.Vector3(1, 1, 1))\n    let material = new THREE.LineDashedMaterial({\n      color: 0xFF7777,\n      dashSize: 3,\n      gapSize: 4,\n      linewidth: 2\n    })\n    let line = new THREE.Line(geometry, material)\n    this.scene.add(line)\n\n    return { line, div }\n  }\n\n  draw () {\n    let distances = this.soupView.currentView.distances\n\n    if (distances.length > this.distanceMeasures.length) {\n      for (let i = this.distanceMeasures.length; i < distances.length; i += 1) {\n        this.distanceMeasures.push(this.createDistanceMeasure(i))\n      }\n    }\n\n    if (this.distanceMeasures.length > distances.length) {\n      for (let i = this.distanceMeasures.length - 1; i >= distances.length; i -= 1) {\n        this.removeDistance(i)\n      }\n    }\n\n    let parentDivPos = this.parentDiv.position()\n\n    let a0 = this.soupView.soup.getAtomProxy()\n    let a1 = this.soupView.soup.getAtomProxy()\n\n    for (let i = 0; i < distances.length; i += 1) {\n      let distance = distances[i]\n      let distanceMeasure = this.distanceMeasures[i]\n\n      let p1 = a0.load(distance.i_atom1).pos\n      let p2 = a1.load(distance.i_atom2).pos\n\n      let text = p1.distanceTo(p2).toFixed(1)\n      distanceMeasure.div.text(text)\n\n      let m = p1.clone().add(p2).multiplyScalar(0.5)\n      let opacity = 0.7 * this.display.opacity(m) + 0.3\n\n      let v = this.display.posXY(m)\n      let x = v.x\n      let y = v.y\n\n      if ((x < 0) || (x > this.parentDiv.width()) || (y < 0) ||\n        (y > this.parentDiv.height())) {\n        distanceMeasure.div.hide()\n        continue\n      }\n\n      let width = distanceMeasure.div.innerHeight()\n      let height = distanceMeasure.div.innerWidth()\n      distanceMeasure.div.css({\n        'top': y - width / 2 + parentDivPos.top,\n        'left': x - height / 2 + parentDivPos.left,\n        'display': 'block',\n        'cursor': 'pointer',\n        'opacity': opacity\n      })\n\n      distanceMeasure.line.geometry.vertices[0].copy(p1)\n      distanceMeasure.line.geometry.vertices[1].copy(p2)\n\n      if (!this.display.inZlab(m)) {\n        distanceMeasure.div.css('display', 'none')\n      }\n    }\n  }\n}\n\n/**\n * SequenceWidget\n *   - creates a dual band across the top of the selected div\n *     for glProteinDisplay\n *   - the first band is a sequence bar widget\n *   - the second band is a sequence text widget\n *   - these two are integrated so that they share state\n */\n\nclass SequenceWidget extends CanvasWrapper {\n  constructor (display) {\n    super(display.divTag)\n\n    this.display = display\n    this.soupView = display.soupView\n    this.traces = display.traces\n\n    this.iRes = 0\n\n    this.offsetY = 4\n    this.heightBar = 16\n    this.spacingY = 4\n    this.backColor = '#CCC'\n    this.selectColor = '#FFF'\n    this.highlightColor = '#222'\n\n    this.div.attr('id', 'sequence-widget')\n    this.div.css({\n      'width': this.parentDiv.width(),\n      'height': this.height(),\n      'top': this.y(),\n      'background-color': '#CCC',\n      'border-bottom': '1px solid #AAA'\n    })\n\n    this.charWidth = 14\n    this.charHeight = 16\n\n    this.textXOffset = 0\n\n    this.residues = []\n    this.iRes = null\n    this.iStartChar = null\n    this.iEndChar = null\n\n    this.resize()\n  }\n\n  width () {\n    return this.parentDiv.width()\n  }\n\n  height () {\n    return this.offsetY + this.heightBar + this.spacingY * 6 + this.charHeight\n  }\n\n  resize () {\n    super.resize()\n    this.div.css('width', this.parentDiv.width())\n  }\n\n  xToI (x) {\n    return parseInt((x - this.textXOffset) * this.nResidue / this.textWidth())\n  }\n\n  iToX (iRes) {\n    return parseInt(iRes / this.nResidue * this.textWidth()) + this.textXOffset\n  }\n\n  textWidth () {\n    return this.width() - this.textXOffset\n  }\n\n  xToIChar (x) {\n    return parseInt((x - this.textXOffset) * this.nChar / this.textWidth()) + this.iStartChar\n  }\n\n  iCharToX (iRes) {\n    return parseInt(\n      (iRes - this.iStartChar) /\n      this.nChar *\n      this.textWidth() +\n      this.textXOffset)\n  }\n\n  reset () {\n    this.residues.length = 0\n    for (let trace of this.traces) {\n      for (let i of _.range(trace.points.length)) {\n        let iRes = trace.indices[i]\n        let residue = trace.getReference(i)\n\n        let entry = {\n          iRes,\n          ss: residue.ss,\n          resId: residue.resId,\n          iAtom: residue.iAtom\n        }\n\n        let resType = residue.resType\n        if (resType in data.resToAa) {\n          entry.c = data.resToAa[resType]\n        } else {\n          entry.c = '.'\n        }\n\n        this.residues.push(entry)\n      }\n    }\n\n    this.nResidue = this.residues.length\n\n    this.iRes = this.nChar / 2\n    this.iStartChar = 0\n  }\n\n  draw () {\n    if (!util.exists(this.soupView)) {\n      return\n    }\n\n    if (this.residues.length === 0) {\n      return\n    }\n\n    this.nChar = Math.ceil(this.width() / this.charWidth)\n\n    this.iEndChar = this.iStartChar + this.nChar\n    if (this.iEndChar > this.residues.length) {\n      this.iEndChar = this.residues.length\n    }\n    if (this.iStartChar < 0) {\n      this.iStartChar = 0\n    }\n\n    // draw background\n    this.fillRect(\n      0, 0, this.width(), this.height(), this.backColor)\n\n    this.fillRect(\n      this.textXOffset, 0, this.textWidth(), this.heightBar + this.spacingY * 2, this.backColor)\n\n    this.fillRect(\n      this.textXOffset, this.offsetY + this.heightBar + this.spacingY * 2,\n      this.textWidth(), this.charHeight + this.spacingY * 2, this.selectColor)\n\n    let x1 = this.iToX(this.iStartChar)\n    let x2 = this.iToX(this.iEndChar)\n\n    this.fillRect(\n      x1, this.offsetY, x2 - x1, this.heightBar + this.spacingY * 2,\n      1, this.selectColor)\n\n    // draw secondary-structure color bars\n    let ss = this.residues[0].ss\n    let iStart = 0\n    let iEnd = 0\n    while (iEnd < this.nResidue) {\n      iEnd += 1\n      if (iEnd === this.nResidue || this.residues[iEnd].ss !== ss) {\n        let x1 = this.iToX(iStart)\n        let x2 = this.iToX(iEnd)\n        let color = data.getSsColor(ss).getStyle()\n        this.fillRect(\n          x1,\n          this.offsetY + this.spacingY,\n          x2 - x1,\n          this.heightBar,\n          color)\n\n        if (iEnd <= this.nResidue - 1) {\n          iStart = iEnd\n          ss = this.residues[iEnd].ss\n        }\n      }\n    }\n\n    // draw characters for sequence\n    let y = this.offsetY + this.heightBar + this.spacingY * 3\n    for (let iChar = this.iStartChar; iChar < this.iEndChar; iChar += 1) {\n      let residue = this.residues[iChar]\n      let x1 = this.iCharToX(iChar)\n      let colorStyle = data.getSsColor(residue.ss).getStyle()\n      this.fillRect(\n        x1, y, this.charWidth, this.charHeight, colorStyle)\n      this.text(\n        residue.c,\n        x1 + this.charWidth / 2, y + this.charHeight / 2,\n        '8pt Monospace', 'black', 'center')\n    }\n\n    let atom = this.soupView.soup.getAtomProxy(this.soupView.currentView.iAtom)\n    for (let iRes = this.iStartChar; iRes < this.iEndChar; iRes++) {\n      if (iRes === atom.iRes) {\n        this.strokeRect(\n          this.iCharToX(iRes),\n          this.offsetY + this.heightBar + this.spacingY * 2,\n          this.charWidth,\n          this.charHeight + this.spacingY * 2,\n          this.highlightColor)\n        break\n      }\n    }\n  }\n\n  getCurrIAtom () {\n    return this.residues[this.iRes].iAtom\n  }\n\n  mousemove (event) {\n    if (!this.mousePressed) {\n      return\n    }\n    this.getPointer(event)\n    if (this.pointerY < (this.heightBar + this.spacingY * 2)) {\n      this.iRes = this.xToI(this.pointerX)\n\n      // reset sequence window\n      this.iStartChar = Math.max(this.iRes - 0.5 * this.nChar, 0)\n      this.iStartChar = Math.min(this.iStartChar, this.nResidue - this.nChar)\n      this.iStartChar = parseInt(this.iStartChar)\n\n      this.display.setTargetViewFromAtom(this.getCurrIAtom())\n      this.draw()\n    } else {\n      this.iRes = this.xToIChar(this.pointerX)\n      this.display.setTargetViewFromAtom(this.getCurrIAtom())\n      this.draw()\n    }\n  }\n}\n\n/**\n * ZSlabWidget\n */\n\nclass ZSlabWidget extends CanvasWrapper {\n  constructor (display) {\n    super(display.divTag)\n    this.soupView = display.soupView\n    this.maxZLength = 0.0\n    this.yOffset = 60\n    this.div.attr('id', 'zslab')\n\n    this.backColor = 'rgb(150, 150, 150)'\n    this.zBackColor = 'rgb(100, 70, 70)'\n    this.zFrontColor = 'rgb(150, 90, 90)'\n  }\n\n  resize () {\n    this.div.css({\n      'width': this.width(),\n      'height': this.height(),\n      'top': this.y(),\n      'left': this.x()\n    })\n    super.resize()\n  }\n\n  width () {\n    return 40\n  }\n\n  y () {\n    let parentDivPos = this.parentDiv.position()\n    let result = parentDivPos.top + this.yOffset\n    return result\n  }\n\n  height () {\n    return this.parentDiv.height() - this.yOffset\n  }\n\n  x () {\n    let parentDivPos = this.parentDiv.position()\n    return this.parentDiv.width() - this.width() + parentDivPos.left\n  }\n\n  yToZ (y) {\n    let fraction = y / this.height()\n    return (0.5 - fraction) * this.maxZLength\n  }\n\n  zToY (z) {\n    let fraction = z / this.maxZLength\n    return (0.5 - fraction) * this.height()\n  }\n\n  draw () {\n    let protein = this.soupView.soup\n    let cameraParams = this.soupView.currentView.cameraParams\n    this.maxZLength = 2.0 * protein.maxLength\n\n    let yBack = this.zToY(cameraParams.zBack)\n    let yFront = this.zToY(cameraParams.zFront)\n    let yMid = this.zToY(0)\n\n    this.fillRect(\n      0, 0, this.width(), this.height(), this.backColor)\n\n    this.fillRect(\n      0, yBack, this.width(), yMid - yBack, this.zBackColor)\n\n    this.fillRect(\n      0, yMid, this.width(), yFront - yMid, this.zFrontColor)\n\n    let font = '12px sans-serif'\n    let xm = this.width() / 2\n\n    this.text(\n      'zslab', xm, 10, font, this.zFrontColor, 'center')\n    this.text(\n      'back', xm, yBack - 7, font, this.zBackColor, 'center')\n    this.text(\n      'front', xm, yFront + 7, font, this.zFrontColor, 'center')\n  }\n\n  getZ (event) {\n    this.getPointer(event)\n    this.z = this.yToZ(this.pointerY)\n  }\n\n  mousedown (event) {\n    this.getZ(event)\n\n    if (this.z > 0) {\n      this.back = true\n      this.front = false\n    } else {\n      this.front = true\n      this.back = false\n    }\n\n    super.mousedown(event)\n  }\n\n  mousemove (event) {\n    event.preventDefault()\n\n    if (!this.mousePressed) {\n      return\n    }\n\n    this.getZ(event)\n\n    let cameraParams = this.soupView.currentView.cameraParams\n\n    if (this.back) {\n      cameraParams.zBack = Math.max(2, this.z)\n    } else if (this.front) {\n      cameraParams.zFront = Math.min(-2, this.z)\n    }\n    this.soupView.changed = true\n    this.draw()\n  }\n}\n\n/**\n * GridControlWidget\n */\n\nclass GridControlWidget extends CanvasWrapper {\n  constructor (display) {\n    super(display.divTag)\n    this.isGrid = display.isGrid\n    this.soupView = display.soupView\n    this.buttonHeight = 40\n    this.sliderHeight = this.buttonHeight * 6 - 50\n    this.div.attr('id', 'grid-control')\n    if (!this.isGrid) {\n      this.div.css('display', 'none')\n    }\n    this.div.css('height', this.height())\n    this.backgroundColor = '#AAA'\n    this.buttonsDiv = $('<div id=\"grid-control-buttons\">')\n    this.div.append(this.buttonsDiv)\n  }\n\n  reset () {\n    if (!this.isGrid) {\n      return\n    }\n\n    this.buttonsDiv.empty()\n\n    let y = 10\n    for (let elem of _.keys(this.soupView.soup.grid.isElem)) {\n      this.buttonsDiv.append(this.makeElemButton(elem, y))\n      y += this.buttonHeight\n    }\n\n    if (_.keys(this.soupView.soup.grid.isElem).length === 0) {\n      this.div.hide()\n    } else {\n      this.div.show()\n    }\n  }\n\n  makeElemButton (elem, y) {\n    let color = data.ElementColors[elem]\n    let colorHexStr = color.getHexString()\n    let textButton = util.toggleButton(\n      'toggle_text',\n      elem,\n      'jolecule-button',\n      () => this.soupView.soup.grid.isElem[elem],\n      (b) => {\n        this.soupView.soup.grid.isElem[elem] = b\n        this.soupView.soup.grid.changed = true\n        this.soupView.changed = true\n      },\n      colorHexStr)\n    textButton.css('position', 'absolute')\n    textButton.css('top', y + 'px')\n    textButton.css('left', '40px')\n    textButton.css('width', '20px')\n    return textButton\n  }\n\n  resize () {\n    if (!this.isGrid) {\n      return\n    }\n    this.div.css({\n      'width': this.width(),\n      'height': this.height(),\n      'top': this.y(),\n      'left': this.x()\n    })\n    this.canvasDom.width = this.width()\n    this.canvasDom.height = this.height()\n  }\n\n  width () {\n    return 84\n  }\n\n  height () {\n    return this.buttonHeight * 6 + 10\n  }\n\n  x () {\n    let parentDivPos = this.parentDiv.position()\n    return parentDivPos.left\n  }\n\n  y () {\n    let parentDivPos = this.parentDiv.position()\n    return parentDivPos.top + 60\n  }\n\n  yToZ (y) {\n    let fraction = (y - 20) / this.sliderHeight\n    let grid = this.soupView.soup.grid\n    let diff = grid.bMax - grid.bMin\n    let z = fraction * diff + grid.bMin\n    if (z < this.soupView.soup.grid.bMin) {\n      z = this.soupView.soup.grid.bMin\n    }\n    if (z > this.soupView.soup.grid.bMax) {\n      z = this.soupView.soup.grid.bMax\n    }\n    return z\n  }\n\n  zToY (z) {\n    let grid = this.soupView.soup.grid\n    let diff = grid.bMax - grid.bMin\n    return (z - grid.bMin) / diff * this.sliderHeight + 20\n  }\n\n  draw () {\n    if (!this.isGrid) {\n      return\n    }\n\n    this.fillRect(0, 0, this.width(), this.height(), this.backgroundColor)\n\n    let xm = 20\n\n    let dark = 'rgb(100, 100, 100)'\n    let yTop = this.zToY(this.soupView.soup.grid.bMin)\n    let yBottom = this.zToY(this.soupView.soup.grid.bMax)\n    this.line(xm, yTop, xm, yBottom, 1, dark)\n    this.line(5, yTop, 35, yTop, 1, dark)\n\n    let font = '12px sans-serif'\n    let textColor = '#666'\n    let y = this.zToY(this.soupView.soup.grid.bCutoff)\n    this.fillRect(5, y, 30, 5, textColor)\n    this.text(-this.soupView.soup.grid.bCutoff.toFixed(2), xm, y + 15, font, textColor, 'center')\n  }\n\n  getZ (event) {\n    this.getPointer(event)\n\n    this.z = this.yToZ(this.pointerY)\n  }\n\n  mousedown (event) {\n    event.preventDefault()\n\n    this.getZ(event)\n\n    this.mousePressed = true\n\n    this.mousemove(event)\n  }\n\n  mousemove (event) {\n    event.preventDefault()\n\n    if (!this.mousePressed) {\n      return\n    }\n\n    this.getZ(event)\n\n    this.soupView.soup.grid.bCutoff = this.z\n    this.soupView.soup.grid.changed = true\n    this.draw()\n\n    this.soupView.changed = true\n  }\n\n  mouseup (event) {\n    event.preventDefault()\n\n    this.mousePressed = false\n  }\n}\n\nexport default {\n  LineElement,\n  PopupText,\n  AtomLabelsWidget,\n  DistanceMeasuresWidget,\n  SequenceWidget,\n  ZSlabWidget,\n  GridControlWidget\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/jolecule/widgets.js","import $ from 'jquery'\nimport _ from 'lodash'\nimport v3 from './v3'\n\nimport * as THREE from 'three'\nimport * as glgeom from './glgeom'\nimport * as util from './util'\nimport widgets from './widgets'\nimport * as data from './data'\nimport { interpolateCameras } from './soup'\n\n/**\n * Display is the main window for drawing the soup\n * in a WebGL HTML5 canvas, includes various widgets that\n * are described in widgets.js.\n *\n * Display takes a soup, and builds three.js from\n * it. Display also handles mouse input and\n * uses controller to make changes to the underlying soup\n * and their associated views\n */\nclass Display {\n  /**\n   * @param soupView - SoupView object that holds a soup and views\n   * @param divTag - a selector tag for a DOM element\n   * @param controller - the controller for the soupView\n   * @param isGrid - flat to show autodock 3D grid control panel\n   * @param backgroundColor - the background color of canvas and webgl\n   */\n  constructor (soupView, divTag, controller, isGrid, backgroundColor) {\n    this.divTag = divTag\n    this.div = $(this.divTag)\n    this.div.css('overflow', 'hidden')\n\n    this.backgroundColor = backgroundColor\n    this.div.css('background-color', this.backgroundColor)\n\n    // input control parameters\n    this.saveMouseX = null\n    this.saveMouseY = null\n    this.saveMouseR = null\n    this.saveMouseT = null\n    this.mouseX = null\n    this.mouseY = null\n    this.mouseR = null\n    this.mouseT = null\n    this.mousePressed = false\n\n    // WebGL related properties\n\n    // div to instantiate WebGL renderer\n    this.webglDivId = this.div.attr('id') + '-canvas-wrapper'\n    this.webglDiv = $('<div>')\n      .attr('id', this.webglDivId)\n      .css('overflow', 'hidden')\n      .css('z-index', '0')\n      .css('background-color', '#CCC')\n      .css('position', 'absolute')\n    this.webglDiv.contextmenu(() => false)\n    this.div.append(this.webglDiv)\n\n    // Params that will be used to set the camera below\n    this.cameraParams = {\n      focus: new THREE.Vector3(0, 0, 0),\n      position: new THREE.Vector3(0, 0, -1),\n      up: new THREE.Vector3(0, 1, 0),\n      // clipping planes relative to focus\n      zFront: -40,\n      zBack: 20,\n      // distance of focus from position\n      zoom: 1.0\n    }\n\n    // a THREE.js camera, will be set properly before draw\n    this.camera = new THREE.PerspectiveCamera(\n      45, this.width() / this.height())\n\n    this.displayScene = new THREE.Scene()\n    this.displayScene.background = new THREE.Color(this.backgroundColor)\n    this.displayScene.fog = new THREE.Fog(this.backgroundColor, 1, 100)\n\n    // this.displayMeshes is a dictionary that holds THREE.Object3D\n    // collections of meshes. This allows collections to be collectively\n    // turned on and off. The meshes will be regenerated into this.displayScene\n    // if the underlying data changes. The convenience function\n    // will send geometries into the displayMeshes, using this.displayMaterial\n    // as the default. This assumes vertexColors are used, allowing multiple\n    // colors within the same geometry.\n    this.displayMeshes = {}\n    this.displayMaterial = new THREE.MeshLambertMaterial(\n      {vertexColors: THREE.VertexColors})\n\n    this.pickingScene = new THREE.Scene()\n    this.pickingTexture = new THREE.WebGLRenderTarget(this.width(), this.height())\n    this.pickingTexture.texture.minFilter = THREE.LinearFilter\n\n    this.pickingMeshes = {}\n    this.pickingMaterial = new THREE.MeshBasicMaterial(\n      {vertexColors: THREE.VertexColors})\n\n    this.lights = []\n    this.buildLights()\n\n    // Hooks to protein data\n    this.soupView = soupView\n    this.soup = soupView.soup\n    this.controller = controller\n    this.nDataServer = 0\n    // stores trace of protein/nucleotide backbones for ribbons\n    this.traces = []\n    // screen atom radius\n    this.atomRadius = 0.35\n\n    // Cross-hairs to identify centered atom\n    this.buildCrossHairs()\n\n    // div to display processing messages\n    this.messageDiv = $('<div>')\n      .attr('id', 'loading-message')\n      .addClass('jolecule-loading-message')\n    this.setMesssage('Loading data...')\n\n    // Widgets that decorate the display\n\n    // popup hover box over the mouse position\n    this.hover = new widgets.PopupText(this.divTag, 'lightblue')\n\n    // Sequence bar of protein at top of embedded window\n    this.sequenceWidget = new widgets.SequenceWidget(this)\n\n    // Clipping plane control bar to the right\n    this.zSlabWidget = new widgets.ZSlabWidget(this)\n\n    // Docking display control\n    this.isGrid = isGrid\n    this.gridControlWidget = new widgets.GridControlWidget(this)\n\n    // display distance measures between atoms\n    this.distanceWidget = new widgets.DistanceMeasuresWidget(this)\n\n    // display atom labels\n    this.labelWidget = new widgets.AtomLabelsWidget(this)\n\n    // draw onscreen line for mouse dragging between atoms\n    this.lineElement = new widgets.LineElement(this, '#FF7777')\n  }\n\n  initWebglRenderer () {\n    this.renderer = new THREE.WebGLRenderer({antialias: true})\n    this.renderer.setClearColor(this.backgroundColor)\n    this.renderer.setSize(this.width(), this.height())\n\n    let dom = this.renderer.domElement\n    this.webglDiv[0].appendChild(dom)\n\n    const bind = (w, fn) => { dom.addEventListener(w, fn) }\n    bind('mousedown', e => this.mousedown(e))\n    bind('mousemove', e => this.mousemove(e))\n    bind('mouseup', e => this.mouseup(e))\n    bind('mousewheel', e => this.mousewheel(e))\n    bind('DOMMouseScroll', e => this.mousewheel(e))\n    bind('touchstart', e => this.mousedown(e))\n    bind('touchmove', e => this.mousemove(e))\n    bind('touchend', e => this.mouseup(e))\n    bind('touchcancel', e => this.mouseup(e))\n    bind('gesturestart', e => this.gesturestart(e))\n    bind('gesturechange', e => this.gesturechange(e))\n    bind('gestureend', e => this.gestureend(e))\n  }\n\n  setMesssage (message) {\n    console.log('Display.setProcessingMessage:', message)\n    this.messageDiv.html(message).show()\n    util.stickJqueryDivInTopLeft(this.div, this.messageDiv, 100, 90)\n  };\n\n  async asyncSetMesssage (message) {\n    this.setMesssage(message)\n    await util.delay(0)\n  };\n\n  cleanupMessage () {\n    this.messageDiv.hide()\n  };\n\n  calculateTracesForRibbons () {\n    this.traces.length = 0\n\n    let lastTrace\n\n    let residue = this.soup.getResidueProxy()\n    let atom = this.soup.getAtomProxy()\n\n    for (let iRes = 0; iRes < this.soup.getResidueCount(); iRes += 1) {\n      residue.iRes = iRes\n      if (residue.isPolymer) {\n        if ((iRes === 0) || !residue.isConnectedToPrev()) {\n          let newTrace = new glgeom.Trace()\n          newTrace.getReference = i => {\n            residue.iRes = newTrace.indices[i]\n            return residue\n          }\n          this.traces.push(newTrace)\n          lastTrace = newTrace\n        }\n        lastTrace.indices.push(iRes)\n\n        atom.iAtom = residue.iAtom\n        lastTrace.points.push(atom.pos.clone())\n\n        let normal = residue.normal\n        lastTrace.normals.push(normal)\n      }\n    }\n\n    for (let trace of this.traces) {\n      trace.calcTangents()\n      trace.calcNormals()\n      trace.calcBinormals()\n      trace.expand()\n    }\n  }\n\n  buildLights () {\n    let directedLight = new THREE.DirectionalLight(0xFFFFFF)\n    directedLight.position.copy(\n      v3.create(0.2, 0.2, -100).normalize())\n    directedLight.dontDelete = true\n    this.lights.push(directedLight)\n\n    let ambientLight = new THREE.AmbientLight(0x202020)\n    ambientLight.dontDelete = true\n    this.lights.push(ambientLight)\n\n    for (let i = 0; i < this.lights.length; i += 1) {\n      this.displayScene.add(this.lights[i])\n    }\n  }\n\n  /**\n   **********************************************************\n   * Mesh-building methods\n   *\n   * Routines to build meshes that will be incorporated into\n   * scenes, and to be used for gpu-picking.\n   *\n   * Meshes are stored in a dictionary: this.displayMeshes &\n   * this.pickingMeshes\n   **********************************************************\n   */\n\n  buildScene () {\n    this.soupView.initViewsAfterSoupLoad()\n\n    // pre-calculations needed before building meshes\n    let residue = this.soup.getResidueProxy()\n    for (let iRes of _.range(this.soup.getResidueCount())) {\n      residue.iRes = iRes\n      residue.color = data.getSsColor(residue.ss)\n    }\n    this.soup.findGridLimits()\n    this.calculateTracesForRibbons()\n\n    // this.buildMeshOfRibbons()\n    this.buildMeshOfTube()\n    this.buildMeshOfGrid()\n    this.buildMeshOfLigands()\n    this.buildMeshOfNucleotides()\n    this.buildMeshOfArrows()\n\n    this.rebuildSceneWithMeshes()\n\n    this.sequenceWidget.reset()\n    this.gridControlWidget.reset()\n\n    this.soupView.updateView = true\n  }\n\n  /**\n   * Clears/creates a mesh entry in the mesh collection\n   * @param meshName - the name for a mesh collection\n   */\n  createOrClearMesh (meshName) {\n    if (!(meshName in this.displayMeshes)) {\n      this.displayMeshes[meshName] = new THREE.Object3D()\n    } else {\n      glgeom.clearObject3D(this.displayMeshes[meshName])\n    }\n    if (!(meshName in this.pickingMeshes)) {\n      this.pickingMeshes[meshName] = new THREE.Object3D()\n    } else {\n      glgeom.clearObject3D(this.pickingMeshes[meshName])\n    }\n  }\n\n  /**\n   * Rebuild soupView from meshes in this.displayMeshes &\n   * this.pickingMeshes\n   */\n  rebuildSceneWithMeshes () {\n    glgeom.clearObject3D(this.displayScene)\n    glgeom.clearObject3D(this.pickingScene)\n    for (let mesh of _.values(this.displayMeshes)) {\n      if (mesh.children.length > 0) {\n        this.displayScene.add(mesh)\n      }\n    }\n    for (let mesh of _.values(this.pickingMeshes)) {\n      if (mesh.children.length > 0) {\n        this.pickingScene.add(mesh)\n      }\n    }\n  }\n\n  /**\n   * Sets the visibility of a mesh this.displayMeshes & this.pickingMeshes.\n   * If it does not exist, create it, and look for the corresponding method\n   * to build the mesh this.build<CaptializaedMeshName>\n   *\n   * @param meshName\n   * @param visible\n   */\n  setMeshVisible (meshName, visible) {\n    if (visible) {\n      if (!(meshName in this.displayMeshes)) {\n        let buildMeshOfFunctionName = 'buildMeshOf' + _.capitalize(meshName)\n\n        console.log('Display.' + buildMeshOfFunctionName)\n        this[buildMeshOfFunctionName]()\n\n        this.updateMeshesInScene = true\n      }\n    }\n    if (meshName in this.displayMeshes) {\n      glgeom.setVisible(this.displayMeshes[meshName], visible)\n    }\n    if (meshName in this.pickingMeshes) {\n      glgeom.setVisible(this.pickingMeshes[meshName], visible)\n    }\n  }\n\n  addGeomToDisplayMesh (meshName, geom, i) {\n    if (geom.vertices.length === 0) {\n      return\n    }\n    let mesh = new THREE.Mesh(geom, this.displayMaterial)\n    if (!_.isUndefined(i)) {\n      mesh.i = i\n    }\n    this.displayMeshes[meshName].add(mesh)\n  }\n\n  addGeomToPickingMesh (meshName, geom, i) {\n    if (geom.vertices.length === 0) {\n      return\n    }\n    let mesh = new THREE.Mesh(geom, this.pickingMaterial)\n    if (!_.isUndefined(i)) {\n      mesh.i = i\n    }\n    this.pickingMeshes[meshName].add(mesh)\n  }\n\n  buildMeshOfRibbons () {\n    this.createOrClearMesh('ribbons')\n    let displayGeom = new THREE.Geometry()\n    let pickingGeom = new THREE.Geometry()\n    for (let trace of this.traces) {\n      let n = trace.points.length\n      for (let i of _.range(n)) {\n        let res = trace.getReference(i)\n        let face = data.getSsFace(res.ss)\n        let color = res.color\n        let iAtom = res.iAtom\n        let isRound = res.ss === 'C'\n        let isFront = ((i === 0) ||\n          (res.ss !== trace.getReference(i - 1).ss))\n        let isBack = ((i === n - 1) ||\n          (res.ss !== trace.getReference(i + 1).ss))\n        let resGeom = trace.getSegmentGeometry(\n          i, face, isRound, isFront, isBack, color)\n        displayGeom.merge(resGeom)\n        glgeom.setGeometryVerticesColor(resGeom, data.getIndexColor(iAtom))\n        pickingGeom.merge(resGeom)\n      }\n    }\n    this.addGeomToDisplayMesh('ribbons', displayGeom)\n    this.addGeomToPickingMesh('ribbons', pickingGeom)\n  }\n\n  buildMeshOfTube () {\n    this.createOrClearMesh('tube')\n    let isRound = true\n    let isFront = false\n    let isBack = false\n    let geom = new glgeom.BufferRibbonGeometry(\n      this.traces, data.coilFace, isRound, isFront, isBack)\n    let displayMesh = new THREE.Mesh(geom, this.displayMaterial)\n    this.displayMeshes['tube'].add(displayMesh)\n  }\n\n  buildMeshOfArrows () {\n    this.createOrClearMesh('arrows')\n    let nCopy = 0\n    for (let trace of this.traces) {\n      nCopy += trace.points.length\n    }\n\n    let blockArrowGeometry = new glgeom.BlockArrowGeometry()\n    let bufferGeometry = new THREE.BufferGeometry().fromGeometry(blockArrowGeometry)\n\n    let displayGeom = new glgeom.CopyBufferGeometry(bufferGeometry, nCopy)\n    let pickingGeom = new glgeom.CopyBufferGeometry(bufferGeometry, nCopy)\n\n    let obj = new THREE.Object3D()\n\n    let iCopy = 0\n    for (let trace of this.traces) {\n      let n = trace.points.length\n      for (let i of _.range(n)) {\n        let point = trace.points[i]\n        let tangent = trace.tangents[i]\n        let normal = trace.binormals[i]\n        let target = point.clone().add(tangent)\n\n        let res = trace.getReference(i)\n        let color = data.getDarkSsColor(res.ss)\n        let iAtom = res.iAtom\n\n        obj.matrix.identity()\n        obj.position.copy(point)\n        obj.up.copy(normal)\n        obj.lookAt(target)\n        obj.updateMatrix()\n\n        displayGeom.applyMatrixToCopy(obj.matrix, iCopy)\n        displayGeom.applyColorToCopy(color, iCopy)\n\n        pickingGeom.applyMatrixToCopy(obj.matrix, iCopy)\n        pickingGeom.applyColorToCopy(data.getIndexColor(iAtom), iCopy)\n\n        iCopy += 1\n      }\n    }\n\n    let displayMesh = new THREE.Mesh(displayGeom, this.displayMaterial)\n    this.displayMeshes['arrows'].add(displayMesh)\n\n    let pickingMesh = new THREE.Mesh(pickingGeom, this.pickingMaterial)\n    this.pickingMeshes['arrows'].add(pickingMesh)\n  }\n\n  buildAtomMeshes (atomIndices, meshName) {\n    if (atomIndices.length === 0) {\n      return\n    }\n    let nCopy = atomIndices.length\n    let sphereBufferGeometry = new THREE.SphereBufferGeometry(1, 8, 8)\n    let displayGeom = new glgeom.CopyBufferGeometry(sphereBufferGeometry, nCopy)\n    let pickingGeom = new glgeom.CopyBufferGeometry(sphereBufferGeometry, nCopy)\n\n    let atom = this.soup.getAtomProxy()\n    for (let iCopy = 0; iCopy < nCopy; iCopy += 1) {\n      let iAtom = atomIndices[iCopy]\n      atom.iAtom = iAtom\n      let matrix = glgeom.getSphereMatrix(atom.pos, this.atomRadius)\n      displayGeom.applyMatrixToCopy(matrix, iCopy)\n      pickingGeom.applyMatrixToCopy(matrix, iCopy)\n      displayGeom.applyColorToCopy(atom.color, iCopy)\n      pickingGeom.applyColorToCopy(data.getIndexColor(iAtom), iCopy)\n    }\n\n    let displayMesh = new THREE.Mesh(displayGeom, this.displayMaterial)\n    this.displayMeshes[meshName].add(displayMesh)\n\n    let pickingMesh = new THREE.Mesh(pickingGeom, this.pickingMaterial)\n    this.pickingMeshes[meshName].add(pickingMesh)\n  }\n\n  buildBondMeshes (bondIndices, meshName) {\n    if (bondIndices.length === 0) {\n      return\n    }\n    let nCopy = bondIndices.length\n\n    let cylinderBufferGeometry = new THREE.CylinderBufferGeometry(1, 1, 1, 4, 1, false)\n    cylinderBufferGeometry.applyMatrix(\n      new THREE.Matrix4()\n        .makeRotationFromEuler(\n          new THREE.Euler(Math.PI / 2, Math.PI, 0)))\n\n    let displayGeom = new glgeom.CopyBufferGeometry(cylinderBufferGeometry, nCopy)\n\n    let atom1 = this.soup.getAtomProxy()\n    let atom2 = this.soup.getAtomProxy()\n    let bond = this.soup.getBondProxy()\n    let residue = this.soup.getResidueProxy()\n\n    for (let iCopy = 0; iCopy < nCopy; iCopy += 1) {\n      let iBond = bondIndices[iCopy]\n\n      bond.iBond = iBond\n      atom1.iAtom = bond.iAtom1\n      atom2.iAtom = bond.iAtom2\n      residue.iRes = atom1.iRes\n\n      let p1 = atom1.pos.clone()\n      let p2 = atom2.pos.clone()\n\n      if (atom1.iRes !== atom2.iRes) {\n        let midpoint = p2.clone().add(p1).multiplyScalar(0.5)\n        if (atom1.iRes === residue.iRes) {\n          p2 = midpoint\n        } else if (atom2.iRes === residue.iRes) {\n          p1 = midpoint\n        }\n      }\n\n      let matrix = glgeom.getCylinderMatrix(p1, p2, 0.2)\n\n      displayGeom.applyMatrixToCopy(matrix, iCopy)\n      displayGeom.applyColorToCopy(residue.color, iCopy)\n    }\n\n    let displayMesh = new THREE.Mesh(displayGeom, this.displayMaterial)\n    this.displayMeshes[meshName].add(displayMesh)\n  }\n\n  buildSelectedResidues (showAllResidues) {\n    this.createOrClearMesh('sidechains')\n\n    let atomIndices = []\n    let bondIndices = []\n\n    let atom = this.soup.getAtomProxy()\n    let residue = this.soup.getResidueProxy()\n\n    for (let iRes of _.range(this.soup.getResidueCount())) {\n      residue.iRes = iRes\n      if (!residue.isPolymer) {\n        continue\n      }\n      let residueShow = showAllResidues || residue.selected\n      if (!residueShow) {\n        continue\n      }\n      for (let iAtom of residue.getAtomIndices()) {\n        atom.iAtom = iAtom\n        if (!util.inArray(atom.atomType, data.backboneAtomTypes)) {\n          atomIndices.push(iAtom)\n          for (let iBond of atom.getBondIndices()) {\n            bondIndices.push(iBond)\n          }\n        }\n      }\n    }\n    this.buildAtomMeshes(atomIndices, 'sidechains')\n    this.buildBondMeshes(bondIndices, 'sidechains')\n  }\n\n  buildMeshOfBackbone () {\n    this.createOrClearMesh('backbone')\n\n    let atomIndices = []\n    let bondIndices = []\n\n    let atom = this.soup.getAtomProxy()\n    let residue = this.soup.getResidueProxy()\n\n    for (let iRes of _.range(this.soup.getResidueCount())) {\n      residue.iRes = iRes\n      if (!residue.isPolymer) {\n        continue\n      }\n      for (let iAtom of residue.getAtomIndices()) {\n        atom.iAtom = iAtom\n        if (util.inArray(atom.atomType, data.backboneAtomTypes)) {\n          atomIndices.push(iAtom)\n          for (let iBond of atom.getBondIndices()) {\n            bondIndices.push(iBond)\n          }\n        }\n      }\n    }\n    this.buildAtomMeshes(atomIndices, 'backbone')\n    this.buildBondMeshes(bondIndices, 'backbone')\n  }\n\n  buildMeshOfLigands () {\n    this.createOrClearMesh('ligands')\n    let atomIndices = []\n    let bondIndices = []\n\n    let atom = this.soup.getAtomProxy()\n    let residue = this.soup.getResidueProxy()\n\n    for (let iRes of _.range(this.soup.getResidueCount())) {\n      residue.iRes = iRes\n      if (residue.ss !== '-') {\n        continue\n      }\n      for (let iAtom of residue.getAtomIndices()) {\n        atom.iAtom = iAtom\n        atomIndices.push(iAtom)\n        for (let iBond of atom.getBondIndices()) {\n          bondIndices.push(iBond)\n        }\n      }\n    }\n    this.buildAtomMeshes(atomIndices, 'ligands')\n    this.buildBondMeshes(bondIndices, 'ligands')\n  }\n\n  buildMeshOfWater () {\n    this.createOrClearMesh('water')\n    let atomIndices = []\n    let residue = this.soup.getResidueProxy()\n    for (let iRes of _.range(this.soup.getResidueCount())) {\n      residue.iRes = iRes\n      if (residue.resType === 'HOH') {\n        atomIndices.push(residue.iAtom)\n      }\n    }\n    this.buildAtomMeshes(atomIndices, 'water')\n  }\n\n  buildMeshOfGrid () {\n    if (!this.gridControlWidget.isGrid) {\n      return\n    }\n    this.createOrClearMesh('grid')\n\n    let grid = this.soupView.soup.grid\n\n    let atomIndices = []\n    let residue = this.soup.getResidueProxy()\n    let atom = this.soup.getAtomProxy()\n    for (let iRes of _.range(this.soup.getResidueCount())) {\n      residue.iRes = iRes\n      if (residue.ss === 'G') {\n        atom.iAtom = residue.iAtom\n        if ((atom.bfactor > grid.bCutoff) && grid.isElem[atom.elem]) {\n          atomIndices.push(atom.iAtom)\n        }\n      }\n    }\n    this.buildAtomMeshes(atomIndices, 'grid')\n  }\n\n  buildMeshOfNucleotides () {\n    this.createOrClearMesh('basepairs')\n\n    let displayGeom = new THREE.Geometry()\n    let pickingGeom = new THREE.Geometry()\n\n    let cylinderGeom = new glgeom.UnitCylinderGeometry()\n\n    let residue = this.soup.getResidueProxy()\n    let atom = this.soup.getAtomProxy()\n\n    for (let iRes of _.range(this.soup.getResidueCount())) {\n      residue.iRes = iRes\n      if (residue.ss !== 'D' || !residue.isPolymer) {\n        continue\n      }\n\n      let basepairGeom = new THREE.Geometry()\n\n      let atomTypes, bondTypes\n      if (residue.resType === 'DA' || residue.resType === 'A') {\n        atomTypes = ['N9', 'C8', 'N7', 'C5', 'C6', 'N1', 'C2', 'N3', 'C4']\n        bondTypes = [['C3\\'', 'C2\\''], ['C2\\'', 'C1\\''], ['C1\\'', 'N9']]\n      } else if (residue.resType === 'DG' || residue.resType === 'G') {\n        atomTypes = ['N9', 'C8', 'N7', 'C5', 'C6', 'N1', 'C2', 'N3', 'C4']\n        bondTypes = [['C3\\'', 'C2\\''], ['C2\\'', 'C1\\''], ['C1\\'', 'N9']]\n      } else if (residue.resType === 'DT' || residue.resType === 'U') {\n        atomTypes = ['C6', 'N1', 'C2', 'N3', 'C4', 'C5']\n        bondTypes = [['C3\\'', 'C2\\''], ['C2\\'', 'C1\\''], ['C1\\'', 'N1']]\n      } else if (residue.resType === 'DC' || residue.resType === 'C') {\n        atomTypes = ['C6', 'N1', 'C2', 'N3', 'C4', 'C5']\n        bondTypes = [['C3\\'', 'C2\\''], ['C2\\'', 'C1\\''], ['C1\\'', 'N1']]\n      } else {\n        continue\n      }\n\n      let getVerticesFromAtomDict = (iRes, atomTypes) => {\n        residue.iRes = iRes\n        return _.map(atomTypes, a => {\n          atom.iAtom = residue.getIAtom(a)\n          return atom.pos.clone()\n        })\n      }\n\n      let vertices = getVerticesFromAtomDict(iRes, atomTypes)\n      let faceGeom = new glgeom.RaisedShapeGeometry(vertices, 0.2)\n      basepairGeom.merge(faceGeom)\n\n      for (let bond of bondTypes) {\n        let vertices = getVerticesFromAtomDict(iRes, [bond[0], bond[1]])\n        basepairGeom.merge(\n          cylinderGeom, glgeom.getCylinderMatrix(vertices[0], vertices[1], 0.2))\n      }\n\n      // explicitly set to zero-length array as RaisedShapeGeometry\n      // sets no uv but cylinder does, and the merged geometry causes\n      // warnings in THREE.js v0.79\n      basepairGeom.faceVertexUvs = [[]]\n\n      glgeom.setGeometryVerticesColor(\n        basepairGeom, residue.color)\n      displayGeom.merge(basepairGeom)\n\n      glgeom.setGeometryVerticesColor(\n        basepairGeom, data.getIndexColor(residue.iAtom))\n      pickingGeom.merge(basepairGeom)\n    }\n\n    this.addGeomToDisplayMesh('basepairs', displayGeom)\n    this.addGeomToPickingMesh('basepairs', pickingGeom)\n  }\n\n  buildCrossHairs () {\n    let radius = 1.2\n    let segments = 60\n    let material = new THREE.LineDashedMaterial(\n      {color: 0xFF7777, linewidth: 2})\n    let geometry = new THREE.CircleGeometry(radius, segments)\n\n    // Remove center vertex\n    geometry.vertices.shift()\n\n    this.crossHairs = new THREE.Line(geometry, material)\n    this.crossHairs.dontDelete = true\n    this.displayScene.add(this.crossHairs)\n  }\n\n  /**\n   ******************************************\n   * Handle cameraParams\n   ******************************************\n   */\n\n  setTargetViewFromAtom (iAtom) {\n    this.controller.setTargetViewByAtom(iAtom)\n  }\n\n  getCurrentViewCamera () {\n    return this.soupView.currentView.cameraParams\n  }\n\n  rotateCameraToCurrentView () {\n    let viewCamera = this.soupView.currentView.cameraParams\n\n    // rotate lights to soupView orientation\n    let cameraDirection = this.cameraParams.position.clone()\n      .sub(this.cameraParams.focus)\n      .normalize()\n    let viewCameraDirection = viewCamera.position.clone()\n      .sub(viewCamera.focus)\n    viewCameraDirection.normalize()\n    let rotation = glgeom.getUnitVectorRotation(\n      cameraDirection, viewCameraDirection)\n    for (let i = 0; i < this.lights.length; i += 1) {\n      this.lights[i].position.applyQuaternion(rotation)\n    }\n\n    this.cameraParams = viewCamera\n\n    let far = this.cameraParams.zoom + this.cameraParams.zBack\n    let near = this.cameraParams.zoom + this.cameraParams.zFront\n    if (near < 1) {\n      near = 1\n    }\n\n    this.camera.position.copy(this.cameraParams.position)\n    this.camera.up.copy(this.cameraParams.up)\n    this.camera.lookAt(this.cameraParams.focus)\n    this.camera.near = near\n    this.camera.far = far\n    this.camera.updateProjectionMatrix()\n\n    this.displayScene.fog.near = near\n    this.displayScene.fog.far = far\n  }\n\n  adjustCamera (xRotationAngle, yRotationAngle, zRotationAngle, zoomRatio) {\n    let cameraParams = this.getCurrentViewCamera()\n\n    let y = cameraParams.up\n    let z = cameraParams.position.clone()\n      .sub(cameraParams.focus)\n      .normalize()\n    let x = (v3.create())\n      .crossVectors(y, z)\n      .normalize()\n\n    let rotZ = new THREE.Quaternion()\n      .setFromAxisAngle(z, zRotationAngle)\n\n    let rotY = new THREE.Quaternion()\n      .setFromAxisAngle(y, -yRotationAngle)\n\n    let rotX = new THREE.Quaternion()\n      .setFromAxisAngle(x, -xRotationAngle)\n\n    let rotation = new THREE.Quaternion()\n      .multiply(rotZ)\n      .multiply(rotY)\n      .multiply(rotX)\n\n    let newZoom = zoomRatio * cameraParams.zoom\n\n    if (newZoom < 2) {\n      newZoom = 2\n    }\n\n    let position = cameraParams.position.clone()\n      .sub(cameraParams.focus)\n      .applyQuaternion(rotation)\n      .normalize()\n      .multiplyScalar(newZoom)\n      .add(cameraParams.focus)\n\n    let view = this.soupView.currentView.clone()\n    view.cameraParams.focus = cameraParams.focus.clone()\n    view.cameraParams.position = position\n    view.cameraParams.up = cameraParams.up.clone().applyQuaternion(rotation)\n    view.cameraParams.zoom = newZoom\n\n    this.controller.setCurrentView(view)\n  }\n\n  getZ (pos) {\n    let cameraParams = this.getCurrentViewCamera()\n    let cameraDir = cameraParams.focus.clone()\n      .sub(cameraParams.position)\n      .normalize()\n    let posRelativeToOrigin = pos.clone()\n      .sub(cameraParams.focus)\n    return posRelativeToOrigin.dot(cameraDir)\n  }\n\n  inZlab (pos) {\n    let z = this.getZ(pos)\n    let cameraParams = this.getCurrentViewCamera()\n    return ((z >= cameraParams.zFront) && (z <= cameraParams.zBack))\n  }\n\n  opacity (pos) {\n    let z = this.getZ(pos)\n\n    let cameraParams = this.getCurrentViewCamera()\n\n    if (z < cameraParams.zFront) {\n      return 1.0\n    }\n\n    if (z > cameraParams.zBack) {\n      return 0.0\n    }\n\n    return 1 - (z - cameraParams.zFront) / (cameraParams.zBack - cameraParams.zFront)\n  }\n\n  posXY (pos) {\n    let widthHalf = 0.5 * this.width()\n    let heightHalf = 0.5 * this.height()\n\n    let vector = pos.clone().project(this.camera)\n\n    return {\n      x: (vector.x * widthHalf) + widthHalf + this.x(),\n      y: -(vector.y * heightHalf) + heightHalf + this.y()\n    }\n  }\n\n  /**\n   ******************************************\n   * Draw & Animate Graphical objects\n   ******************************************\n   */\n\n  updateCrossHairs () {\n    let cameraParams = this.getCurrentViewCamera()\n    this.crossHairs.position.copy(cameraParams.focus)\n    this.crossHairs.lookAt(cameraParams.position)\n    this.crossHairs.updateMatrix()\n  }\n\n  atomLabelDialog () {\n    let iAtom = this.soupView.currentView.iAtom\n    if (iAtom >= 0) {\n      let atom = this.soup.getAtomProxy(iAtom)\n      let label = 'Label atom : ' + atom.label\n      let success = text => { this.controller.makeAtomLabel(iAtom, text) }\n      util.textEntryDialog(this.div, label, success)\n    }\n  }\n\n  getIAtomHover () {\n    let x = this.mouseX\n    let y = this.mouseY\n\n    if ((x === null) || (y === null)) {\n      return null\n    }\n\n    // create buffer for reading single pixel\n    let pixelBuffer = new Uint8Array(4)\n\n    // render the picking soupView off-screen\n    this.renderer.render(\n      this.pickingScene, this.camera, this.pickingTexture)\n\n    // read the pixel under the mouse from the texture\n    this.renderer.readRenderTargetPixels(\n      this.pickingTexture,\n      this.mouseX, this.pickingTexture.height - y,\n      1, 1,\n      pixelBuffer)\n\n    // interpret the pixel as an ID\n    let i =\n      (pixelBuffer[0] << 16) |\n      (pixelBuffer[1] << 8) |\n      (pixelBuffer[2])\n\n    if (i < this.soup.getAtomCount()) {\n      return i\n    }\n\n    return null\n  }\n\n  updateHover () {\n    if (this.soupView.nUpdateStep > 1) {\n      this.hover.hide()\n      return\n    }\n\n    this.iHoverAtom = this.getIAtomHover()\n\n    if (this.iHoverAtom) {\n      let atom = this.soup.getAtomProxy(this.iHoverAtom)\n      let text = atom.label\n      let iAtom = atom.iAtom\n      let pos = atom.pos.clone()\n      if (iAtom === this.soupView.getCenteredAtom().iAtom) {\n        text = '<div style=\"text-align: center\">'\n        text += atom.label\n        text += '<br>[drag distances]<br>'\n        text += '[double-click labels]'\n        text += '</div>'\n      }\n      this.hover.html(text)\n      let vector = this.posXY(pos)\n      this.hover.move(vector.x, vector.y)\n    } else {\n      this.hover.hide()\n    }\n  }\n\n  /**\n   ********************************************\n   * Main event loop methods\n   ********************************************\n   */\n\n  isChanged () {\n    return this.soupView.changed\n  }\n\n  draw () {\n    if (!this.isChanged()) {\n      return\n    }\n\n    this.updateMeshesInScene = false\n\n    let show = this.soupView.currentView.show\n    this.setMeshVisible('tube', show.trace)\n    this.setMeshVisible('water', show.water)\n    this.setMeshVisible('ribbons', show.ribbon)\n    this.setMeshVisible('arrows', !show.backboneAtoms)\n    this.setMeshVisible('backbone', show.backboneAtom)\n    this.setMeshVisible('ligands', show.ligands)\n\n    if (this.soupView.soup.grid.changed) {\n      this.buildMeshOfGrid()\n      this.soupView.soup.grid.changed = false\n      this.updateMeshesInScene = true\n    }\n\n    if (this.soupView.updateResidueSelection) {\n      this.buildSelectedResidues(show.sidechain)\n      this.soupView.updateResidueSelection = false\n      this.updateMeshesInScene = true\n    }\n\n    if (this.updateMeshesInScene) {\n      this.rebuildSceneWithMeshes()\n    }\n\n    this.updateCrossHairs()\n\n    this.rotateCameraToCurrentView()\n\n    // needs to be drawn before render\n    this.distanceWidget.draw()\n\n    // leave this to the very last moment\n    // to avoid the dreaded black canvas\n    if (!util.exists(this.renderer)) {\n      this.initWebglRenderer()\n    }\n\n    // renders visible meshes to the gpu\n    this.renderer.render(\n      this.displayScene, this.camera)\n\n    if (this.soupView.updateView) {\n      this.zSlabWidget.draw()\n      this.sequenceWidget.draw()\n      this.gridControlWidget.draw()\n      this.soupView.updateView = false\n    }\n\n    // needs to be drawn after render\n    this.labelWidget.draw()\n\n    this.soupView.changed = false\n  }\n\n  animate () {\n    if (this.soupView.targetView === null) {\n      return\n    }\n\n    this.soupView.nUpdateStep -= 1\n    let nStep = this.soupView.nUpdateStep\n    if (nStep <= 0) {\n      return\n    }\n\n    let newCamera = interpolateCameras(\n      this.soupView.currentView.cameraParams,\n      this.soupView.targetView.cameraParams,\n      1.0 / nStep)\n\n    let view = this.soupView.targetView.clone()\n    view.setCamera(newCamera)\n    this.controller.setCurrentView(view)\n\n    this.updateHover()\n  }\n\n  /**\n   ********************************************\n   * Standard DOM methods\n   ********************************************\n   */\n\n  resize () {\n    console.log('Display.resize')\n\n    this.zSlabWidget.resize()\n    this.gridControlWidget.resize()\n    this.sequenceWidget.resize()\n\n    let position = this.div.position()\n    this.webglDiv.css('left', this.x() + position.left)\n    this.webglDiv.css('top', this.y() + position.top)\n\n    this.camera.aspect = this.width() / this.height()\n    this.camera.updateProjectionMatrix()\n\n    this.pickingTexture.setSize(this.width(), this.height())\n\n    this.soupView.updateView = true\n    this.controller.setChangeFlag()\n\n    if (util.exists(this.renderer)) {\n      this.renderer.setSize(this.width(), this.height())\n    }\n  }\n\n  x () {\n    return 0\n  }\n\n  y () {\n    let y = 0\n    if (!_.isUndefined(this.sequenceWidget)) {\n      y += this.sequenceWidget.height()\n    }\n    return y\n  }\n\n  width () {\n    let width = this.div.width() - this.x()\n    if (!_.isUndefined(this.zSlabWidget)) {\n      width -= this.zSlabWidget.width()\n    }\n    return width\n  }\n\n  height () {\n    return this.div.height() - this.y()\n  }\n\n  getMouse (event) {\n    if (util.exists(event.touches) && (event.touches.length > 0)) {\n      this.eventX = event.touches[0].clientX\n      this.eventY = event.touches[0].clientY\n    } else {\n      this.eventX = event.clientX\n      this.eventY = event.clientY\n    }\n\n    let rect = event.target.getBoundingClientRect()\n    this.mouseX = this.eventX - rect.left\n    this.mouseY = this.eventY - rect.top\n\n    let x = this.mouseX - this.width() / 2\n    let y = this.mouseY - this.height() / 2\n\n    this.mouseR = Math.sqrt(x * x + y * y)\n\n    this.mouseT = Math.atan(y / x)\n    if (x < 0) {\n      if (y > 0) {\n        this.mouseT += Math.PI\n      } else {\n        this.mouseT -= Math.PI\n      }\n    }\n  }\n\n  saveMouse () {\n    this.saveMouseX = this.mouseX\n    this.saveMouseY = this.mouseY\n    this.saveMouseR = this.mouseR\n    this.saveMouseT = this.mouseT\n  }\n\n  doubleclick () {\n    if (this.iHoverAtom !== null) {\n      if (this.iHoverAtom === this.soupView.getCenteredAtom().iAtom) {\n        this.atomLabelDialog()\n      } else {\n        this.setTargetViewFromAtom(this.iHoverAtom)\n      }\n      this.isDraggingCentralAtom = false\n    }\n  }\n\n  mousedown (event) {\n    this.getMouse(event)\n\n    event.preventDefault()\n\n    let now = (new Date()).getTime()\n\n    let isDoubleClick = (now - this.timePressed) < 500\n\n    this.updateHover()\n\n    this.iDownAtom = this.getIAtomHover()\n\n    if (isDoubleClick) {\n      this.doubleclick()\n    } else {\n      this.isDraggingCentralAtom = this.iDownAtom !== null\n    }\n\n    this.timePressed = now\n\n    this.saveMouse()\n    this.mousePressed = true\n  }\n\n  mousemove (event) {\n    this.getMouse(event)\n\n    event.preventDefault()\n\n    if (this.isGesture) {\n      return\n    }\n\n    this.updateHover()\n\n    if (this.isDraggingCentralAtom) {\n      let v = this.posXY(this.soup.getAtomProxy(this.iDownAtom).pos)\n\n      this.lineElement.move(this.mouseX + this.x(), this.mouseY + this.y(), v.x, v.y)\n    } else {\n      let shiftDown = (event.shiftKey === 1)\n\n      let rightMouse =\n        (event.button === 2) || (event.which === 3)\n\n      if (this.mousePressed) {\n        let zoomRatio = 1.0\n        let zRotationAngle = 0\n        let yRotationAngle = 0\n        let xRotationAngle = 0\n\n        if (rightMouse || shiftDown) {\n          zRotationAngle = this.mouseT - this.saveMouseT\n\n          if (this.mouseR > 0.0) {\n            zoomRatio = this.saveMouseR / this.mouseR\n          }\n        } else {\n          yRotationAngle = v3.degToRad(this.mouseX - this.saveMouseX)\n          xRotationAngle = v3.degToRad(this.mouseY - this.saveMouseY)\n        }\n\n        this.adjustCamera(\n          xRotationAngle,\n          yRotationAngle,\n          zRotationAngle,\n          zoomRatio)\n\n        this.saveMouse()\n      }\n    }\n  }\n\n  mousewheel (event) {\n    event.preventDefault()\n\n    let wheel\n    if (util.exists(event.wheelDelta)) {\n      wheel = event.wheelDelta / 120\n    } else {\n      // for Firefox\n      wheel = -event.detail / 12\n    }\n    let zoom = Math.pow(1 + Math.abs(wheel) / 2, wheel > 0 ? 1 : -1)\n\n    this.adjustCamera(0, 0, 0, zoom)\n  }\n\n  mouseup (event) {\n    this.getMouse(event)\n\n    event.preventDefault()\n\n    if (this.isDraggingCentralAtom) {\n      if (this.iHoverAtom !== null) {\n        if (this.iHoverAtom !== this.iDownAtom) {\n          this.controller.makeDistance(this.iHoverAtom, this.iDownAtom)\n        }\n      }\n\n      this.lineElement.hide()\n\n      this.isDraggingCentralAtom = false\n    }\n\n    if (util.exists(event.touches)) {\n      this.hover.hide()\n      this.mouseX = null\n      this.mouseY = null\n    }\n\n    this.iDownAtom = null\n\n    this.mousePressed = false\n  }\n\n  gesturestart (event) {\n    event.preventDefault()\n    this.isGesture = true\n    this.lastPinchRotation = 0\n    this.lastScale = event.scale * event.scale\n  }\n\n  gesturechange (event) {\n    event.preventDefault()\n    this.adjustCamera(\n      0,\n      0,\n      v3.degToRad(event.rotation * 2 - this.lastPinchRotation),\n      this.lastScale / (event.scale * event.scale))\n\n    this.lastPinchRotation = event.rotation * 2\n    this.lastScale = event.scale * event.scale\n  }\n\n  gestureend (event) {\n    event.preventDefault()\n    this.isGesture = false\n    this.iDownAtom = null\n    this.mousePressed = false\n  }\n}\n\nexport { Display }\n\n\n\n// WEBPACK FOOTER //\n// ./src/jolecule/display.js","import $ from 'jquery'\nimport _ from 'lodash'\nimport { Soup, Controller, SoupView } from './soup'\nimport { Display } from './display'\nimport {\n  exists,\n  linkButton,\n  toggleButton,\n  randomId,\n  delay\n} from './util.js'\n\nclass ViewPiece {\n  /**\n   * @param {Object} params {\n   *    goto,\n   *    saveChage(txt),\n   *    pick,\n   *    view,\n   *    deleteView,\n   *    isEditable,\n   *    swapUp\n   * }\n   */\n  constructor (params) {\n    this.params = params\n    this.div = $('<div>').addClass('jolecule-view')\n\n    if (exists(params.goto)) {\n      this.div\n        .append(\n          linkButton(\n            '',\n            this.params.goto,\n            'jolecule-button',\n            this.params.pick)\n        )\n        .append(\n          '<div style=\"width: 10px\">'\n        )\n    }\n    this.params = params\n    this.makeEditDiv()\n\n    this.makeShowDiv()\n  }\n\n  saveChange () {\n    console.log('ViewPiece.saveChange')\n    var changedTet = this.editTextArea.val()\n    this.editDiv.hide()\n    this.showDiv.show()\n    this.showTextDiv.html(changedTet)\n    this.params.saveChange(changedTet)\n    window.keyboard_lock = false\n  }\n\n  startEdit () {\n    this.params.pick()\n    this.editTextArea.text(this.params.view.text)\n    this.editDiv.show()\n    this.showDiv.hide()\n    var textarea = this.editTextArea.find('textarea')\n    setTimeout(function () { textarea.focus() }, 100)\n    window.keyboard_lock = true\n  }\n\n  discardChange () {\n    this.editDiv.hide()\n    this.showDiv.show()\n    window.keyboard_lock = false\n  }\n\n  makeEditDiv () {\n    this.editTextArea = $('<textarea>')\n      .addClass('jolecule-view-text')\n      .css('width', '100%')\n      .css('height', '5em')\n      .click(_.noop)\n\n    this.editDiv = $('<div>')\n      .css('width', '100%')\n      .click(_.noop)\n      .append(this.editTextArea)\n      .append('<br><br>')\n      .append(\n        linkButton(\n          '', 'save', 'jolecule-small-button',\n          (event) => { this.saveChange() }))\n      .append(' &nbsp; ')\n      .append(\n        linkButton(\n          '', 'discard', 'jolecule-small-button',\n          (event) => { this.discardChange() }))\n      .hide()\n\n    this.div.append(this.editDiv)\n  }\n\n  makeShowDiv () {\n    var view = this.params.view\n\n    var editButton = linkButton(\n      '', 'edit', 'jolecule-small-button',\n      () => { this.startEdit() })\n\n    this.showTextDiv = $('<div>')\n      .addClass('jolecule-view-text')\n      .html(this.params.view.text)\n\n    this.showDiv = $('<div>')\n      .css('width', '100%')\n      .append(this.showTextDiv)\n\n    if (view.id !== 'view:000000') {\n      this.showDiv\n        .append(\n          $('<div>')\n            .addClass('jolecule-author')\n            .html(view.creator)\n        )\n    }\n\n    let isEditable = this.params.isEditable &&\n      (!view.lock) &&\n      (view.id !== 'view:000000')\n\n    if (isEditable) {\n      // this.showDiv\n      //   .append(embedButton)\n      //   .append(' ');\n\n      this.showDiv\n        .append(editButton)\n\n      if (exists(this.params.swapUp) && this.params.swapUp) {\n        this.showDiv\n          .append(' ')\n          .append(\n            linkButton(\n              '', 'up', 'jolecule-small-button',\n              () => { this.params.swapUp() }))\n      }\n\n      if (exists(this.params.swapUp) && this.params.swapDown) {\n        this.showDiv\n          .append(' ')\n          .append(\n            linkButton(\n              '', 'down', 'jolecule-small-button',\n              () => { this.params.swapDown() }))\n      }\n\n      if (exists(this.params.deleteView)) {\n        this.showDiv\n          .append(\n            $('<div>')\n              .css('float', 'right')\n              .append(\n                linkButton(\n                  '', 'delete', 'jolecule-small-button',\n                  () => {\n                    console.log('ViewPiece.deleteButton')\n                    this.params.deleteView()\n                  })))\n      }\n    }\n\n    this.div.append(this.showDiv)\n  }\n}\n\n/**\n * EmbedJolecule - the widget that shows proteins and\n * annotations\n */\n\nlet defaultArgs = {\n  divTag: '',\n  viewId: '',\n  viewHeight: 170,\n  isViewTextShown: false,\n  isEditable: true,\n  isLoop: false,\n  isGrid: false,\n  backgroundColor: 0xCCCCCC\n}\n\nclass EmbedJolecule {\n  constructor (params) {\n    this.params = params\n    this.isLoop = this.params.isLoop\n\n    this.divTag = this.params.divTag\n    this.div = $(this.params.divTag)\n\n    // disable right mouse click\n    this.div[0].oncontextmenu = _.noop\n\n    this.initViewId = this.params.viewId\n    this.hAnnotationView = this.params.viewHeight\n\n    this.soup = new Soup()\n    this.soupView = new SoupView(this.soup)\n    this.controller = new Controller(this.soupView)\n\n    this.residueSelector = null\n\n    this.createProteinDiv()\n    this.display = new Display(\n      this.soupView,\n      '#jolecule-soup-display',\n      this.controller,\n      params.isGrid,\n      params.backgroundColor)\n\n    this.createStatusDiv()\n    this.createViewDiv()\n\n    this.isViewTextShown = this.params.isViewTextShown\n    this.setTextState()\n\n    $(window).resize(() => this.resize())\n\n    this.resize()\n\n    this.isProcessing = {flag: false}\n  };\n\n  async asyncLoadViews (dataServer) {\n    return new Promise(resolve => {\n      dataServer.get_views(viewDicts => {\n        this.controller.loadViewsFromViewDicts(viewDicts)\n\n        // let viewId = this.soupView.currentView.id\n        // if (this.initViewId) {\n        //   if (this.initViewId in this.soupView.savedViewsByViewId) {\n        //     viewId = this.initViewId\n        //   }\n        // }\n        this.updateView()\n\n        if (this.params.viewId in this.soupView.savedViewsByViewId) {\n          this.controller.setTargetViewByViewId(this.params.viewId)\n          this.updateView()\n        }\n\n        resolve()\n      })\n    })\n  }\n\n  async asyncLoadSoup (dataServer) {\n    return new Promise(resolve => {\n      dataServer.get_protein_data(async (proteinData) => {\n        let pdbText = proteinData.pdb_text\n        let pdbId = proteinData.pdb_id\n\n        if (proteinData.pdb_text.length === 0) {\n          await this.display.asyncSetMesssage('Error: no soup data')\n          resolve()\n          return\n        }\n\n        await this.display.asyncSetMesssage(`Parsing '${pdbId}'`)\n        this.soup.parsePdbData(pdbText, pdbId)\n        this.soup.assignResidueSsAndCentralAtoms()\n        this.populateResidueSelector()\n        this.soup.calcMaxLength()\n\n        let nAtom = this.soup.getAtomCount()\n        let nRes = this.soup.getResidueCount()\n        await this.display.asyncSetMesssage(\n          `Calculating bonds for ${nAtom} atoms, ${nRes} residues...`)\n        this.soup.calcBondsStrategic()\n\n        let nBond = this.soup.getBondCount()\n        await this.display.asyncSetMesssage(`Calculated ${nBond} bonds.`)\n        await this.display.asyncSetMesssage(`Assigning secondary structure...`)\n        this.soup.findBackboneHbonds()\n        this.soup.findSecondaryStructure()\n\n        if (this.soup.parsingError) {\n          let err = this.soup.parsingError\n          await this.display.asyncSetMesssage(`Error parsing soup: ${err}`)\n        } else {\n          this.display.buildScene()\n        }\n\n        resolve()\n      })\n    })\n  }\n\n  async asyncAddDataServer (dataServer) {\n    while (this.isProcessing.flag) {\n      await delay(100)\n    }\n    this.isProcessing.flag = true\n\n    await this.asyncLoadSoup(dataServer)\n\n    this.display.nDataServer += 1\n\n    if (this.display.nDataServer === 1) {\n      await this.display.asyncSetMesssage('Loading views...')\n      await this.asyncLoadViews(dataServer)\n    }\n\n    this.display.cleanupMessage()\n\n    this.isProcessing.flag = false\n  }\n\n  saveViewsToDataServer (success) {\n    this.dataServer.save_views(\n      this.controller.getViewDicts(), success)\n    this.soupView.changed = true\n  }\n\n  saveCurrView () {\n    var newId = randomId()\n    this.controller.saveCurrentView(newId)\n    this.updateView()\n    this.viewDiv.css('background-color', 'lightgray')\n    this.saveViewsToDataServer(() => { this.viewDiv.css('background-color', '') })\n  }\n\n  getCurrView () {\n    var i = this.soupView.iLastViewSelected\n    if (i in this.soupView.savedViews) {\n      var id = this.soupView.savedViews[i].id\n      return this.soupView.savedViewsByViewId[id]\n    } else {\n      return this.soupView.savedViews[0]\n    }\n  }\n\n  changeText (newText) {\n    var view = this.getCurrView()\n    view.text = newText\n    this.viewDiv.css('background-color', 'lightgray')\n    this.saveViewsToDataServer(\n      () => { this.viewDiv.css('background-color', '') })\n    this.soupView.changed = true\n  }\n\n  deleteCurrView () {\n    var i = this.soupView.iLastViewSelected\n    if (i === 0) {\n      // skip default view:000000\n      return\n    }\n    var id = this.soupView.savedViews[i].id\n    this.controller.deleteView(id)\n    this.viewDiv.css('background-color', 'lightgray')\n    this.dataServer.delete_protein_view(\n      id,\n      () => {\n        this.updateView()\n        this.viewDiv.css('background-color', '')\n      })\n  }\n\n  isChanged () {\n    if (!exists(this.display)) {\n      return false\n    }\n    return this.display.isChanged()\n  }\n\n  animate () {\n    if (exists(this.display)) {\n      this.display.animate()\n      if (this.isLoop) {\n        if (this.soupView.nUpdateStep <= 0) {\n          // loop started\n          this.soupView.nUpdateStep -= 1\n          if (this.soupView.nUpdateStep < -100) {\n            this.controller.setTargetToNextView()\n            this.soupView.changed = true\n          }\n        }\n      }\n    }\n  };\n\n  draw () {\n    if (exists(this.display)) {\n      if (this.soupView.changed) {\n        this.updateView()\n        this.display.draw()\n        this.populateResidueSelector()\n        this.soupView.changed = false\n      }\n    }\n  }\n\n  cycleBackbone () {\n    if (this.soupView.currentView.show.backboneAtom) {\n      this.controller.setBackboneOption('ribbon')\n    } else if (this.soupView.currentView.show.ribbon) {\n      this.controller.setBackboneOption('trace')\n    } else if (this.soupView.currentView.show.trace) {\n      this.controller.setBackboneOption('backboneAtom')\n    }\n  }\n\n  setTextState () {\n    if (this.isViewTextShown) {\n      this.viewDiv.height(this.hAnnotationView)\n      this.viewDiv.css('visibility', 'visible')\n    } else {\n      this.viewDiv.height(0)\n      this.viewDiv.css('visibility', 'hidden')\n    }\n    this.resize()\n    this.controller.soupView.changed = true\n  }\n\n  toggleTextState () {\n    this.isViewTextShown = !this.isViewTextShown\n    this.setTextState()\n  }\n\n  gotoPrevView () {\n    this.controller.setTargetToPrevView()\n    this.updateView()\n  }\n\n  gotoNextView () {\n    this.controller.setTargetToNextView()\n    this.updateView()\n  }\n\n  createProteinDiv () {\n    var height =\n      this.div.outerHeight() -\n      this.hAnnotationView\n    this.proteinDiv =\n      $('<div>')\n        .attr('id', 'jolecule-soup-display')\n        .addClass('jolecule-embed-body')\n        .css('overflow', 'hidden')\n        .css('width', this.div.outerWidth())\n        .css('height', height)\n    this.div.append(this.proteinDiv)\n  }\n\n  populateResidueSelector () {\n    // clear selector\n    this.residueSelector\n      .find('option')\n      .remove()\n\n    // rebuild selector\n    let residue = this.soup.getResidueProxy()\n    for (let i = 0; i < this.soup.getResidueCount(); i++) {\n      residue.iRes = i\n      let text = residue.resId + '-' + residue.resType\n      this.residueSelector.append(\n        $('<option>').attr('value', i).text(text))\n    }\n\n    let iAtom = this.soupView.currentView.iAtom\n    let iRes = this.soup.getAtomProxy(iAtom).iRes\n    this.residueSelector.val(iRes)\n  }\n\n  createStatusDiv () {\n    this.statusText = $('<span>')\n\n    var textButton = toggleButton(\n      'toggle_text', 'T', 'jolecule-button',\n      () => this.isViewTextShown,\n      (b) => { this.toggleTextState() })\n\n    var prevButton = linkButton(\n      'prev_view', '<', 'jolecule-button', () => { this.gotoPrevView() })\n\n    var nextButton = linkButton(\n      'prev_view', '>', 'jolecule-button', () => { this.gotoNextView() })\n\n    var loopButton = toggleButton(\n      'loop', '&orarr;', 'jolecule-button',\n      () => this.isLoop,\n      (b) => { this.isLoop = b })\n\n    var saveButton = ''\n    if (this.params.isEditable) {\n      saveButton = linkButton(\n        'saveView', '+', 'jolecule-button', () => { this.saveCurrView() })\n    }\n\n    this.ligButton = toggleButton(\n      '', 'lig', 'jolecule-button',\n      () => this.controller.getShowOption('ligands'),\n      (b) => { this.controller.setShowOption('ligands', b) }\n    )\n\n    this.watButton = toggleButton(\n      '', 'water', 'jolecule-button',\n      () => this.controller.getShowOption('water'),\n      (b) => { this.controller.setShowOption('water', b) }\n    )\n\n    this.hydButton = toggleButton(\n      '', 'h', 'jolecule-button',\n      () => this.controller.getShowOption('hydrogen'),\n      (b) => { this.controller.setShowOption('hydrogen', b) }\n    )\n    this.hydButton = ''\n\n    var backboneButton = linkButton(\n      '', 'backbone', 'jolecule-button',\n      () => { this.cycleBackbone() })\n\n    var allSidechainButton = linkButton('', 'all', 'jolecule-button',\n      () => { this.controller.setShowOption('sidechain', true) })\n\n    var clearSidechainButton = linkButton(\n      '', 'x', 'jolecule-button',\n      () => {\n        this.controller.setShowOption('sidechain', false)\n        this.controller.clearSelectedResidues()\n      })\n\n    var nearSidechainButton = linkButton(\n      '', 'near', 'jolecule-button',\n      () => { this.controller.toggleResidueNeighbors() })\n\n    this.residueSelector = $('<select>')\n      .addClass('jolecule-residue-selector')\n      .css({\n        'outline': 'none',\n        '-moz-appearance': 'none'\n      })\n\n    this.residueSelector.change(() => {\n      var iRes = parseInt(this.residueSelector.find(':selected').val())\n      this.display.setTargetViewFromAtom(\n        this.soupView.soup.getResidueProxy(iRes).iAtom)\n    })\n\n    this.viewBarDiv =\n      $('<div style=\"width: 100%; display: flex; flex-direction: row\">')\n        .append(\n          $('<div style=\"flex: 1; display: flex; flex-direction: row; align-items: center;\">')\n            .append(loopButton)\n            .append(textButton)\n            .append(prevButton)\n            .append(this.statusText)\n            .append(nextButton)\n            .append(saveButton))\n        .append(\n          $('<div style=\"flex: 1; display: flex; flex-direction: row; justify-content: flex-end;\">')\n            .append(this.residueSelector))\n\n    this.sidechainDiv =\n      $('<div style=\"width: 100%; display: flex; flex-direction: row; margin-top: 5px\">')\n        .append(\n          $('<div style=\"flex: 1; display: flex; flex-direction: row; align-items: center;\">')\n            .append(backboneButton)\n            .append(' ')\n            .append(this.ligButton)\n            .append(this.hydButton)\n            .append(this.watButton)\n            .append(' '))\n        .append(\n          $('<div style=\"flex: 1; justify-content: flex-end; display: flex; flex-direction: row; align-items: center;\">')\n            .append(' sidechain: ')\n            .append(allSidechainButton)\n            .append(clearSidechainButton)\n            .append(nearSidechainButton))\n\n    this.statusDiv = $('<div style=\"display: flex; flex-direction: column\">')\n      .addClass('jolecule-embed-view-bar')\n      .append(this.viewBarDiv)\n      .append(this.sidechainDiv)\n\n    this.div.append(this.statusDiv)\n  }\n\n  updateView () {\n    var view = this.getCurrView()\n    if (view == null) {\n      return\n    }\n    var nView = this.soupView.savedViews.length\n    var iView = view.order + 1\n    this.statusText.text(' ' + iView + '/' + nView + ' ')\n    var viewPiece = new ViewPiece({\n      view: view,\n      isEditable: this.params.isEditable,\n      delete_view: () => { this.deleteCurrView() },\n      save_change: (text) => { this.changeText(text) },\n      pick: _.noop,\n      embed_view: function () {\n        window.location.href = '/embed/pdb/pdb?pdb_id=' + view.pdb_id + '&view=' + view.id\n      }\n    })\n    this.realViewDiv = viewPiece.div\n    this.realViewDiv\n      .css('overflow-y', 'auto')\n      .css('height', '100%')\n    this.viewDiv\n      .empty()\n      .append(this.realViewDiv)\n    this.ligButton.redraw()\n    this.watButton.redraw()\n    if (this.hydButton) {\n      this.hydButton.redraw()\n    }\n  }\n\n  createViewDiv () {\n    this.viewDiv = $('<div>')\n      .addClass('jolecule-embed-view')\n    this.div.append(this.viewDiv)\n  }\n\n  resize () {\n    this.proteinDiv.width(this.div.outerWidth())\n    var newHeight = this.div.outerHeight() -\n      this.viewDiv.outerHeight() -\n      this.statusDiv.outerHeight()\n    if (exists(this.display)) {\n      if (exists(this.display.renderer)) {\n        this.display.renderer.domElement.style.height = newHeight\n      }\n      this.soupView.changed = true\n    }\n    this.proteinDiv.css('height', newHeight)\n    this.display.resize()\n  }\n}\n\nexport { EmbedJolecule, defaultArgs, ViewPiece }\n\n\n\n// WEBPACK FOOTER //\n// ./src/jolecule/embedjolecule.js","import $ from 'jquery'\nimport scrollTo from 'jquery.scrollto' // eslint-disable-line\nimport _ from 'lodash'\nimport { EmbedJolecule, ViewPiece } from './embedjolecule'\nimport { getWindowUrl, linkButton, randomId, exists } from './util'\n\n/**\n * ViewPieceList keeps track of the views\n */\n\nclass ViewPieceList {\n  constructor (divTag, controller, proteinDisplay, dataServer, isEditable) {\n    this.divTag = divTag\n    this.display = proteinDisplay\n    this.soupView = controller.soupView\n    this.controller = controller\n    this.isEditable = isEditable\n    this.data_server = dataServer\n    this.viewPiece = {}\n    this.topDiv = $(this.divTag)\n      .append(\n        $('<div>')\n          .addClass('jolecule-sub-header')\n          .append('VIEWS OF PROTEIN')\n          .append('<br>')\n          .append('<br>')\n          .append(\n            linkButton(\n              '', '+[v]iew', 'jolecule-button',\n              () => {\n                this.makeNewView()\n              }))\n          .append(\n            linkButton(\n              '', 'prev[&uarr;]', 'jolecule-button',\n              () => {\n                this.gotoPrevView()\n              }))\n          .append(\n            linkButton(\n              '', 'next[&darr;]', 'jolecule-button',\n              () => {\n                this.gotoNextView()\n              }))\n          .append(\n            linkButton(\n              '', '+l[a]bel', 'jolecule-button',\n              () => {\n                this.display.atomLabelDialog()\n              }\n            ))\n          .append('<br>')\n      )\n      .append(\n        $('<div>')\n          .attr('id', 'jolecule-views')\n      )\n  }\n\n  saveViewsToDataServer (success) {\n    console.log('ViewPieceList.saveViewsToDataServer')\n    this.data_server.save_views(\n      this.controller.getViewDicts(), success)\n  }\n\n  updateViews () {\n    for (let id in this.viewPiece) {\n      if (!(id in this.soupView.savedViewsByViewId)) {\n        this.viewPiece[id].div.remove()\n        delete this.viewPiece[id]\n      }\n    }\n    for (let i = 0; i < this.soupView.savedViews.length; i++) {\n      let view = this.soupView.savedViews[i]\n      let id = view.id\n\n      if (!(view.id in this.viewPiece)) {\n        this.insertNewViewDiv(view.id)\n      }\n\n      let iLastView = this.soupView.iLastViewSelected\n      let lastId = this.soupView.savedViews[iLastView].id\n\n      if (lastId === id) {\n        this.viewPiece[id].div.removeClass('jolecule-unselected-box')\n        this.viewPiece[id].div.addClass('jolecule-selected-box')\n      } else {\n        this.viewPiece[id].div.removeClass('jolecule-selected-box')\n        this.viewPiece[id].div.addClass('jolecule-unselected-box')\n      }\n\n      let viewPiece = this.viewPiece[id]\n      if (view.text !== viewPiece.showTextDiv.html()) {\n        viewPiece.showTextDiv.html(view.text)\n      }\n\n      let a = viewPiece.div.find('a').eq(0)\n      a.text(view.order + 1)\n    }\n  }\n\n  redrawSelectedViewId (id) {\n    this.updateViews()\n    $('#jolecule-views')\n      .stop()\n      .scrollTo(\n        this.viewPiece[id].div, 1000, {offset: {top: -80}})\n  }\n\n  setTargetByViewId (id) {\n    this.controller.setTargetViewByViewId(id)\n    this.redrawSelectedViewId(id)\n    window.location.hash = id\n  }\n\n  gotoPrevView () {\n    let id = this.controller.setTargetToPrevView()\n    this.redrawSelectedViewId(id)\n    window.location.hash = id\n  }\n\n  gotoNextView () {\n    let id = this.controller.setTargetToNextView()\n    this.redrawSelectedViewId(id)\n    window.location.hash = id\n  }\n\n  removeView (id) {\n    console.log('ViewPieceList.removeView')\n    this.viewPiece[id].div.css('background-color', 'lightgray')\n    this.data_server.delete_protein_view(id, () => {\n      this.controller.deleteView(id)\n      this.viewPiece[id].div.remove()\n      delete this.viewPiece[id]\n      this.updateViews()\n    })\n  }\n\n  swapViews (i, j) {\n    let iId = this.soupView.savedViews[i].id\n    let jId = this.soupView.savedViews[j].id\n    let iDiv = this.viewPiece[iId].div\n    let jDiv = this.viewPiece[jId].div\n\n    this.controller.swapViews(i, j)\n\n    iDiv.css('background-color', 'lightgray')\n    jDiv.css('background-color', 'lightgray')\n\n    this.saveViewsToDataServer(() => {\n      jDiv.insertBefore(iDiv)\n      this.updateViews()\n      iDiv.css('background-color', '')\n      jDiv.css('background-color', '')\n    })\n  }\n\n  swapUp (viewId) {\n    let i = this.soupView.getIViewFromViewId(viewId)\n    if (i < 2) {\n      return\n    }\n    this.swapViews(i - 1, i)\n  }\n\n  swapDown (viewId) {\n    let i = this.soupView.getIViewFromViewId(viewId)\n    if (i > this.soupView.savedViews.length - 2) {\n      return\n    }\n    this.swapViews(i, i + 1)\n  }\n\n  makeViewDiv (id) {\n    let view = this.soupView.savedViewsByViewId[id]\n    this.viewPiece[id] = new ViewPiece({\n      view: view,\n      isEditable: this.isEditable,\n      delete_view: () => {\n        this.removeView(id)\n      },\n      save_change: (changedText) => {\n        view.text = changedText\n        this.viewPiece[id].div.css('background-color', 'lightgray')\n        this.saveViewsToDataServer(() => {\n          this.viewPiece[id].div.css('background-color', '')\n        })\n        this.soupView.changed = true\n      },\n      pick: () => {\n        this.setTargetByViewId(id)\n      },\n      goto: view.order + 1,\n      swapUp: () => {\n        this.swapUp(id)\n      },\n      swapDown: () => {\n        this.swapDown(id)\n      },\n      embed_view: () => {\n        window.location.href = '/embed/pdb?pdb_id=' + view.pdb_id + '&view=' + view.id\n      }\n    })\n    return this.viewPiece[id].div\n  }\n\n  makeAllViews () {\n    for (let i = 0; i < this.soupView.savedViews.length; i += 1) {\n      let id = this.soupView.savedViews[i].id\n      let div = this.makeViewDiv(id)\n      $('#jolecule-views').append(div)\n    }\n  }\n\n  insertNewViewDiv (newId) {\n    let div = this.makeViewDiv(newId)\n\n    if (this.soupView.iLastViewSelected === this.soupView.savedViews.length - 1) {\n      $('#jolecule-views').append(div)\n    } else {\n      let j = this.soupView.iLastViewSelected - 1\n      let jId = this.soupView.savedViews[j].id\n      let jDiv = this.viewPiece[jId].div\n      div.insertAfter(jDiv)\n    }\n  }\n\n  makeNewView () {\n    console.log('ViewPieceList.makeNewView')\n    let newId = randomId()\n    this.controller.saveCurrentView(newId)\n    this.insertNewViewDiv(newId)\n    this.updateViews()\n    this.viewPiece[newId].div.css('background-color', 'lightgray')\n    this.saveViewsToDataServer(() => {\n      console.log('ViewPieceList.makeNewView success')\n      this.viewPiece[newId].div.css('background-color', '')\n      $('#jolecule-views').stop()\n      $('#jolecule-views').scrollTo(\n        this.viewPiece[newId].div, 1000, {offset: {top: -80}})\n    })\n  }\n}\n\n/**\n * FullPageJolecule - full page wrapper around an embedd EmbedJolecule\n * widget. Handles keypresses and urls and adds a better views annotation\n * list tool\n */\n\nclass FullPageJolecule {\n  constructor (\n    proteinDisplayTag,\n    sequenceDisplayTag,\n    viewsDisplayTag,\n    params) {\n    this.viewsDisplayTag = viewsDisplayTag\n    this.sequenceDisplayTag = sequenceDisplayTag\n\n    this.params = {\n      divTag: proteinDisplayTag,\n      viewId: '',\n      viewHeight: 170,\n      isViewTextShown: false,\n      isEditable: true,\n      isLoop: false,\n      isGrid: true,\n      backgroundColor: 0xCCCCCC\n    }\n\n    console.log('FullPageJolecule.constructor params', params)\n\n    if (exists(params)) {\n      this.params = _.assign(this.params, params)\n    }\n\n    this.embedJolecule = new EmbedJolecule(this.params)\n\n    document.oncontextmenu = _.noop\n    document.onkeydown = (e) => this.onkeydown(e)\n    let resizeFn = () => { this.resize() }\n    $(window).resize(resizeFn)\n    window.onorientationchange = resizeFn\n\n    this.noData = true\n  }\n\n  async asyncAddDataServer (dataServer) {\n    await this.embedJolecule.asyncAddDataServer(dataServer)\n    this.initViewsDisplay(dataServer)\n    console.log('FullPageJolecule.asyncAddDataServer finished adding views')\n  }\n\n  initViewsDisplay (dataServer) {\n    if (this.noData) {\n      this.noData = false\n\n      this.soupView = this.embedJolecule.soupView\n      this.controller = this.embedJolecule.controller\n      this.display = this.embedJolecule.display\n\n      this.viewsDisplay = new ViewPieceList(\n        this.viewsDisplayTag,\n        this.controller,\n        this.display,\n        dataServer,\n        this.params.isEditable)\n\n      this.viewsDisplay.makeAllViews()\n      let hashTag = getWindowUrl().split('#')[1]\n      if (hashTag in this.soupView.savedViewsByViewId) {\n        this.viewsDisplay.setTargetByViewId(hashTag)\n      } else {\n        this.viewsDisplay.setTargetByViewId('view:000000')\n      }\n      this.viewsDisplay.updateViews()\n    }\n\n    this.resize()\n  }\n\n  isChanged () {\n    if (typeof this.soupView !== 'undefined') {\n      return this.soupView.changed\n    }\n    return false\n  };\n\n  draw () {\n    if (this.soupView.changed) {\n      this.viewsDisplay.updateViews()\n      this.embedJolecule.draw()\n      this.soupView.changed = false\n    }\n  }\n\n  animate () {\n    if (typeof this.embedJolecule !== 'undefined') {\n      this.embedJolecule.animate()\n    }\n  }\n\n  resize (event) {\n    if (typeof this.soupView !== 'undefined') {\n      this.soupView.changed = true\n    }\n    if (typeof this.embedJolecule !== 'undefined') {\n      this.embedJolecule.resize()\n    }\n  }\n\n  gotoPrevResidue () {\n    this.controller.setTargetToPrevResidue()\n  }\n\n  gotoNextResidue () {\n    this.controller.setTargetToNextResidue()\n  }\n\n  onkeydown (event) {\n    if (!window.keyboard_lock) {\n      let c = String.fromCharCode(event.keyCode).toUpperCase()\n      if (c === 'V') {\n        this.viewsDisplay.makeNewView()\n        return\n      } else if ((c === 'K') || (event.keyCode === 37)) {\n        this.gotoPrevResidue()\n      } else if ((c === 'J') || (event.keyCode === 39)) {\n        this.gotoNextResidue()\n      } else if (event.keyCode === 38) {\n        this.viewsDisplay.gotoPrevView()\n      } else if (c === ' ' || event.keyCode === 40) {\n        this.viewsDisplay.gotoNextView()\n      } else if (c === 'B') {\n        if (this.soupView.currentView.show.backboneAtom) {\n          this.controller.setBackboneOption('ribbon')\n        } else if (this.soupView.currentView.show.ribbon) {\n          this.controller.setBackboneOption('trace')\n        } else if (this.soupView.currentView.show.trace) {\n          this.controller.setBackboneOption('backboneAtom')\n        }\n      } else if (c === 'L') {\n        this.controller.toggleShowOption('ligands')\n      } else if (c === 'S') {\n        this.controller.toggleShowOption('sidechain')\n      } else if (c === 'W') {\n        this.controller.toggleShowOption('water')\n      } else if (c === 'C') {\n        this.display.controller.clearSelectedResidues()\n      } else if (c === 'E') {\n        let iView = this.display.soupView.iLastViewSelected\n        if (iView > 0) {\n          let viewId = this.display.soupView.savedViews[iView].id\n          this.viewsDisplay.div[viewId].edit_fn()\n        }\n      } else if (c === 'N') {\n        this.display.controller.toggleResidueNeighbors()\n      } else if (c === 'A') {\n        this.display.atomLabelDialog()\n      } else {\n        let i = parseInt(c) - 1\n        if ((i || i === 0) && (i < this.soupView.savedViews.length)) {\n          let id = this.soupView.savedViews[i].id\n          this.viewsDisplay.setTargetByViewId(id)\n        }\n      }\n      this.display.soupView.changed = true\n    }\n  }\n}\n\nexport { FullPageJolecule }\n\n\n\n// WEBPACK FOOTER //\n// ./src/jolecule/fullpagejolecule.js","import { registerGlobalAnimationLoop } from './animation'\nimport { EmbedJolecule, defaultArgs } from './embedjolecule.js'\nimport { FullPageJolecule } from './fullpagejolecule.js'\nimport _ from 'lodash'\nimport $ from 'jquery'\n\n/**\n *\n * @param userArgs = {\n *   divTag: '',\n *   viewId: '',\n *   viewHeight: 170,\n *   isViewTextShown: false,\n *   isEditable: true,\n *   isLoop: false,\n *   onload: onload,\n *   isGrid: false\n * }\n * @returns {EmbedJolecule}\n */\n\nfunction initEmbedJolecule (userArgs) {\n  let args = _.merge(defaultArgs, userArgs)\n  let widget = new EmbedJolecule(args)\n  registerGlobalAnimationLoop(widget)\n  return widget\n}\n\n/**\n * @param protein_display_tag\n * @param sequenceDisplayTag\n * @param views_display_tag\n * @returns {FullPageJolecule}\n */\nfunction initFullPageJolecule (...args) {\n  var widget = new FullPageJolecule(...args)\n  registerGlobalAnimationLoop(widget)\n  return widget\n}\n\nfunction remoteDataServer (pdbId) {\n  return {\n    pdb_id: pdbId,\n    get_protein_data: function (processProteinData) {\n      let url\n      if (pdbId.length === 4) {\n        url = `https://files.rcsb.org/download/${pdbId}.pdb1`\n      } else {\n        url = `/pdb/${pdbId}.txt`\n      }\n      console.log('remoteDataServer.get_protein_data', url)\n      $.get(url, (pdbText) => {\n        processProteinData({pdb_id: pdbId, pdb_text: pdbText})\n      })\n    },\n    get_views: function (processViews) {\n      console.log('remoteDataServer.get_views', `/pdb/${pdbId}.views.json`)\n      $.getJSON(`/pdb/${pdbId}.views.json`, processViews)\n    },\n    save_views: function (views, success) {\n      console.log('remoteDataServer.save_views', '/save/views')\n      $.post('/save/views', JSON.stringify(views), success)\n    },\n    delete_protein_view: function (viewId, success) {\n      console.log('remoteDataServer.delete_protein_view', '/delete/view')\n      $.post('/delete/view', JSON.stringify({pdbId, viewId}), success)\n    }\n  }\n}\n\nexport {\n  initEmbedJolecule,\n  initFullPageJolecule,\n  remoteDataServer\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/jolecule/main.js","import Vue from 'vue'\nimport Vuex from 'vuex'\n\nVue.use(Vuex)\n\nconst store = new Vuex.Store({\n  state: {\n    user: {\n      authenticated: false\n    },\n//below are group18\n    loginMessage: \"\",\n    isWorking: false,\n    isSearchSubmitted: false,\n    searchQuery: {},\n    searchPagination: {\n      sortBy: \"pdb\",\n      descending: false,\n      rowsPerPage: 10,\n      totalItems: 0\n    }, \n    searchResults: [],\n    searchErrors: [],\n    totalResults: 0,\n    pdb: \"1be9\",\n    energyCutoffSet: \"high\",\n    dataServers: [],\n    elements: [\n      { value: \"He\", text: \"Helium\" },\n      { value: \"Ne\", text: \"Neon\" },\n      { value: \"Ar\", text: \"Argon\" },\n      { value: \"Kr\", text: \"Krypton\" },\n      { value: \"Xe\", text: \"Xenon\" }\n    ],\n    energyCutoffSets: [\n      { value: \"veryHigh\", text: \"veryHigh\" },\n      { value: \"high\", text: \"high\" },\n      { value: \"medium\", text: \"medium\" },\n      { value: \"low\", text: \"low\" }\n    ]\n  },\n  getters: {\n    errors: state => state.errors,\n    loginMessage: state => state.loginMessage,\n    isWorking: state => state.isWorking,\n    isSearchSubmitted: state => state.isSearchSubmitted,\n    searchQuery: state => state.searchQuery,\n    searchPagination: state => state.searchPagination,\n    searchResults: state => state.searchResults,\n    searchErrors: state => state.searchErrors,\n    totalResults: state => state.totalResults,\n    pdb: state => state.pdb,\n    energyCutoffSet: state => state.energyCutoffSet,\n    energyCutoffSets: state => state.energyCutoffSets,\n    elements: state => state.elements\n  },\n  mutations: {\n    setUser (state, user) {\n      state.user = user\n    },\n    //below are group18 specific\n    SET_ISWORKING: (state, isWorking)=>{\n      state.isWorking = isWorking\n    },\n    SET_ISSEARCHSUBMITTED: (state, isSearchSubmitted)=>{\n      state.isSearchSubmitted = isSearchSubmitted\n    },\n    SET_PDB: (state, pdb)=>{\n      state.pdb = pdb\n    },\n    SET_ENERGYCUTOFFSET: (state, energyCutoffSet)=>{\n      state.energyCutoffSet = energyCutoffSet\n    }, \n    SET_SEARCHQUERY: (state, searchQuery)=>{\n      state.searchQuery = searchQuery\n    } , \n    SET_SEARCHPAGINATION: (state, searchPagination)=>{\n      state.searchPagination = searchPagination\n    } , \n    SET_DATASERVERS: (state, dataServers)=>{\n      state.dataServers = dataServers\n    } , \n    SET_SEARCHRESULTS: (state, searchResults)=>{\n      state.searchResults = searchResults\n    } , \n    SET_SEARCHERRORS: (state, searchErrors)=>{\n      state.searchErrors = searchErrors\n    } , \n    SET_TOTALRESULTS: (state, totalResults)=>{\n      state.totalResults = totalResults\n    } \n  },    \n  actions: {\n    async refreshDataServers({commit, state}){\n      let dataServers = []\n      for(let i=0;i<=5;i++){\n        let url = `http://localhost:8081/api/dataServer/${state.pdb}/${state.energyCutoffSet}/${i}/`\n        dataServers[i] = axios\n          .get(url)\n          .then(response => {\n            let dataServerFn = response.data\n            let dataServer = eval(dataServerFn)\n            return dataServer \n          })\n      }\n      commit(\"SET_DATASERVERS\",await Promise.all(dataServers))\n    },\n    async search({commit, state}){\n      if (!state.searchQuery || !state.searchPagination) {\n        commit(\"SET_SEARCHERRORS\",\"No query found\") \n        return\n      }\n      const { sortBy, descending, page, rowsPerPage } = state.searchPagination;\n      var queryString = \"\"; \n      let searchQuery = state.searchQuery\n      let searchPagination = state.searchPagination\n      commit(\"SET_SEARCHPAGINATION\",searchPagination)  \n      commit(\"SET_ISWORKING\",true)  \n      commit(\"SET_SEARCHERRORS\",\"\") \n      searchQuery[\"limit\"] = rowsPerPage\n      searchQuery[\"offset\"] = (page - 1) * rowsPerPage\n      searchQuery[\"sort\"] = sortBy ? `${sortBy} ${descending ? \"DESC\" : \"ASC\"}` : \"\"\n      \n      commit(\"SET_SEARCHQUERY\",searchQuery) \n      queryString =\n        \"?\" +\n        Object.entries(searchQuery)\n          .filter(([key, value]) => {\n            return value;\n          })\n          .map(([key, value]) => key + \"=\" + value)\n          .join(\"&\");\n      var url =\n        \"http://localhost:8081/api/nobleGasBindings/search\" + queryString;\n      console.log(\"getting response to\", queryString);\n      await axios.get(url).then(response => {\n        if (response.data.error) {\n          commit(\"SET_TOTALRESULTS\",0) \n          commit(\"SET_SEARCHRESULTS\",{}) \n          //TODO: need to improve error message\n          commit(\"SET_SEARCHERRORS\",JSON.stringify(response.data.error, null, 2))\n        } else {\n          commit(\"SET_TOTALRESULTS\",response.data.count) \n          commit(\"SET_SEARCHRESULTS\",response.data.rows) \n          if (state.totalResults == 0) {\n            commit(\"SET_SEARCHERRORS\",`Try a different set of search terms.${JSON.stringify(\n              searchQuery,\n              null,\n              2\n            )}`)\n          }\n        }\n        searchPagination.totalItems = state.totalResults;  \n        commit(\"SET_SEARCHPAGINATION\",searchPagination)       \n        commit(\"SET_ISWORKING\",false)  \n        console.log(\"got response\", this);\n      })\n    },\n    async updatePDB ({commit,dispatch}, pdb) {\n      commit(\"SET_PDB\",pdb)            \n      await dispatch(\"refreshDataServers\")\n    },\n    async updateEnergyCutOffSet ({commit,dispatch}, energyCutoffSet) {\n      commit(\"SET_ENERGYCUTOFFSET\",energyCutoffSet)      \n      await dispatch(\"refreshDataServers\")\n    },\n    async updateView ({commit,dispatch}, {pdb, energyCutOffSet}) {\n      commit(\"SET_PDB\",pdb)            \n      commit(\"SET_ENERGYCUTOFFSET\",energyCutoffSet)      \n      await dispatch(\"refreshDataServers\")\n    }\n  }\n})\n\nexport default store\n\n\n\n// WEBPACK FOOTER //\n// ./src/store.js"],"sourceRoot":""}